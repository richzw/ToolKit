- [Graph Theory and Additive Combinatorics](https://yufeizhao.com/gtacbook/) 
- [ä¼˜åŒ– Milvus æ€§èƒ½](https://mp.weixin.qq.com/s/4gDsAF4QnmXWzomrSFRLLg)
    - Milvus æ˜¯è¯»å†™åˆ†ç¦»ä¸”æ— çŠ¶æ€çš„å‘é‡æ•°æ®åº“ï¼ŒçŠ¶æ€ä¿¡æ¯å‚¨å­˜åœ¨ etcd ä¸­ï¼Œcoordinator èŠ‚ç‚¹å» etcd è¯·æ±‚çŠ¶æ€å¹¶ä¿®æ”¹çŠ¶æ€
        - å½“ç”¨æˆ·éœ€è¦æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ã€æ¸…ç†çŠ¶æ€ä¿¡æ¯åœºæ™¯æ—¶ï¼Œetcd è°ƒè¯•å·¥å…·å¿…ä¸å¯å°‘ã€‚
        - [BirdWatcher  æ˜¯ Milvus 2.0 é¡¹ç›®çš„è°ƒè¯•å·¥å…·ï¼Œè¯¥å·¥å…·è¿æ¥ etcd å¹¶æ£€æŸ¥ Milvus ç³»ç»Ÿçš„æŸäº›çŠ¶æ€](https://mp.weixin.qq.com/s/ot-eMCKqM7aP5pEbGaMIQA)
    - Milvus å•æœº
        - åœ¨å•æœºæ¨¡å¼ä¸‹ï¼Œmilvuså†…ç½®ä¸€ä¸ªrocksdbç”¨äºä»£æ›¿pulsarçš„åŠŸèƒ½ï¼Œrdb_dataç›®å½•é‡Œçš„ä¸œè¥¿æ˜¯rockdbç®¡ç†çš„ï¼Œæ‰€æœ‰insert/delete/upsertçš„æ•°æ®éƒ½ä¼šå…ˆåœ¨rocksdbé‡Œå­˜ä¸€ä»½åšä¸ºwrite ahead logï¼Œç„¶åquerynode datanodeä»rocksdbé‡ŒæŠŠæ•°æ®æ‹‰å‡ºæ¥æ¶ˆè´¹
        - å¦‚æœrocksdbé‡Œçš„æ•°æ®æ¶ˆè´¹å®Œäº†ï¼Œä¸ä¼šç«‹åˆ»åˆ é™¤ï¼Œå› ä¸ºrocksdbæœ‰è‡ªå·±çš„gcï¼Œåªä¸è¿‡è¿™äº›æ•°æ®å¯¹milvusæ¥è¯´å·²ç»æ¶ˆè´¹è¿‡äº†ï¼Œæ”¾ç€åªæ˜¯ä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨æ€§ï¼Œä¸€æ—¦milvuså´©äº†ï¼Œå†å¯åŠ¨çš„æ—¶å€™ï¼Œé‚£äº›æ²¡è¢«æŒä¹…åŒ–åˆ°minioé‡Œçš„æ•°æ®è¿˜èƒ½ä»rocksdbé‡Œæ‹‰å›æ¥
    - åˆç†çš„é¢„è®¡æ•°æ®é‡ï¼Œè¡¨æ•°ç›®å¤§å°ï¼ŒQPS å‚æ•°ç­‰æŒ‡æ ‡
    - é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹å’Œå‚æ•°
        - ç´¢å¼•çš„é€‰æ‹©å¯¹äºå‘é‡å¬å›çš„æ€§èƒ½è‡³å…³é‡è¦ï¼ŒMilvus æ”¯æŒäº† Annoyï¼ŒFaissï¼ŒHNSWï¼ŒDiskANN ç­‰å¤šç§ä¸åŒçš„ç´¢å¼•ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å¯¹å»¶è¿Ÿã€å†…å­˜ä½¿ç”¨å’Œå¬å›ç‡çš„éœ€æ±‚è¿›è¡Œé€‰æ‹©
        - æ˜¯å¦éœ€è¦ç²¾ç¡®ç»“æœï¼Ÿ
            - åªæœ‰ Faiss çš„ Flat ç´¢å¼•æ”¯æŒç²¾ç¡®ç»“æœï¼Œä½†éœ€è¦æ³¨æ„ Flat ç´¢å¼•æ£€ç´¢é€Ÿåº¦å¾ˆæ…¢ï¼ŒæŸ¥è¯¢æ€§èƒ½é€šå¸¸æ¯”å…¶ä»– Milvus æ”¯æŒçš„ç´¢å¼•ç±»å‹ä½ä¸¤ä¸ªæ•°é‡çº§ä»¥ä¸Šï¼Œå› æ­¤åªé€‚åˆåƒä¸‡çº§æ•°æ®é‡çš„å°æŸ¥è¯¢
        - æ•°æ®é‡æ˜¯å¦èƒ½åŠ è½½è¿›å†…å­˜ï¼Ÿ
            - å¯¹äºå¤§æ•°æ®é‡ï¼Œå†…å­˜ä¸è¶³çš„åœºæ™¯ï¼ŒMilvus æä¾›ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š
                - DiskANN
                    - DiskANN ä¾èµ–é«˜æ€§èƒ½çš„ç£ç›˜ç´¢å¼•ï¼Œå€ŸåŠ© NVMe ç£ç›˜ç¼“å­˜å…¨é‡æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­åªå­˜å‚¨äº†é‡åŒ–åçš„æ•°æ®ã€‚
                    - DiskANN é€‚ç”¨äºå¯¹äºæŸ¥è¯¢ Recall è¦æ±‚è¾ƒé«˜ï¼ŒQPS ä¸é«˜çš„åœºæ™¯ã€‚
                    - DISKANNéœ€è¦nvme ssd
                    - Vamana the algorithm behind the DiskANN
                      - Build a random graph.
                      - Optimize the graph, so it only connects vectors close to each other.
                      - Modify the graph by removing some short connections and adding some long-range edges to speed up the traversal of the graph.
        - æ„å»ºç´¢å¼•å’Œå†…å­˜èµ„æºæ˜¯å¦å……è¶³
            - æ€§èƒ½ä¼˜å…ˆï¼Œé€‰æ‹© HNSW ç´¢å¼•
- [Milvus 2.0 æ•°æ®æ’å…¥ä¸æŒä¹…åŒ–](https://mp.weixin.qq.com/s/D0xdD9mqDgxFvNY19hvDgQ)
  - åˆ æ•°æ®é€»è¾‘
    - è°ƒç”¨deleteåˆ é™¤ä¸€æ¡å·²å­˜åœ¨çš„æ•°æ®æ—¶ï¼Œå®ƒåªæ˜¯åœ¨æŸä¸ªsegmenté‡ŒæŠŠæŸæ¡æ•°æ®æ ‡è®°ä¸ºdeletedï¼Œä½†æ˜¯è¿™ä¸ªsegmentçš„æ•°æ®æ­¤æ—¶ä»ç„¶æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œé‚£æ¡è¢«åˆ çš„æ•°åœ¨å†…å­˜é‡Œä»ç„¶å ç€ç©ºé—´ã€‚
    - å½“ä½ åˆè°ƒç”¨insertå¢åŠ ä¸€æ¡æ•°æ®æ—¶ï¼Œè¿™æ¡æ–°æ•°æ®å®é™…ä¸Šæ˜¯æ”¾å…¥ä¸€ä¸ªæ–°çš„segmentä¸­ï¼Œè¿™æ¡æ–°æ•°æ®ä¹Ÿä¼šå ç”¨é¢å¤–å†…å­˜ç©ºé—´ã€‚å› æ­¤ï¼Œéšç€ä½ ç»§ç»­åˆ é™¤+insertï¼Œä½ ä¼šçœ‹åˆ°å†…å­˜ç”¨é‡å¢åŠ ï¼Œæ–°çš„è¿™ä¸ªsegmentæ‰§è¡Œçš„æ˜¯æš´æœï¼Œcpuç”¨é‡ä¼šå¢åŠ ã€‚
    - éšç€æ–°çš„segmentä¸­çš„æ•°æ®è¾¾åˆ°ä¸€å®šé‡å¯ä»¥å»ºç´¢å¼•äº†ï¼Œindexnodeå°±å¼€å§‹ç»™è¿™ä¸ªæ–°segmentå»ºç´¢å¼•ï¼Œå»ºç´¢å¼•å°±ä¼šæ¶ˆè€—cpuã€‚åªæœ‰å½“æŸä¸ªsegmentä¸­è¢«åˆ çš„æ•°æ®è¾¾åˆ°20%ä»¥ä¸Šï¼Œdatanodeå¼€å§‹å¯¹è¿™ä¸ªsegmentè¿›è¡Œcompactï¼Œ
    - æŠŠdeletedçš„æ•°æ®å»é™¤æ‰ï¼Œå‰©ä¸‹çš„æ•°æ®å­˜ä¸ºä¸€ä¸ªæ–°çš„segmemtã€‚åœ¨compactä¹‹åæœ‰å¯èƒ½ä¼šå‘ç”Ÿå°segmentåˆå¹¶æˆå¤§segmentã€‚æ€»ä¹‹ï¼Œåˆ é™¤å’Œæ›´æ–°æ•°æ®ä¼šäº§ç”Ÿå¾ˆå¤šé¢å¤–çš„å·¥ä½œï¼Œæ¶ˆè€—å†…å­˜æ¶ˆè€—cpuï¼Œè®¾è®¡ä¸Šå°±å¦‚æ­¤
  - How to fully delete data  https://github.com/milvus-io/milvus/discussions/24875
    - small segments are compacted to a large segment, and the small segments are marked as "soft-delete", they will be deleted by garbage collection.
    - compaction do these work: 1. merge small segments into large segment, 2. remove deleted entities from segments
    - garbage collection only does one thing: permanently delete the data files of the soft-delete segments
    - once max size of segment is defined, max rows of segment also defined, a segment with max size 512MB, if vector dimension is 128, each segment will contains no more than 1 million entities.
    - How the compaction handles a segment that contains deleted entities:
      - Let's say there is a segment that has 1000 rows and contains 10 deleted entities. 
      - Compactions firstly read the segment into memory, then pick non-deleted items to construct a new segment with 990 rows.
      - The original segment is marked as soft-delete and wait gc to clean. And index node will build a new index for the new segment.
  - Configs
    - GlobalCompactionInterval means the internal machinery triggers a compaction operation every minute "dataCoord.compaction.global.interval"
    - the SingleCompactionRatioThreshold is for this purpose. You can change this threshold to 10%, but don't set it to 0.
  - å¦‚æœç”¨num_enrtitiesè§‚å¯Ÿè¡Œæ•°çš„è¯ï¼Œæ˜¯çœ‹ä¸å‡ºå˜åŒ–çš„ï¼Œå› ä¸ºnum_entitiesä¸ç»Ÿè®¡è¢«åˆ é™¤çš„è¡Œæ•°ã€‚å¦‚æœä½ æ˜¯åˆ é™¤ä¹‹åå†ç”¨queryå»æŸ¥è¯¢ä¸»é”®ï¼Œè¿˜èƒ½æŸ¥åˆ°çš„è¯ï¼Œé‚£å…«æˆæ˜¯å› ä¸ºä½ æ˜¯åˆ å®Œå°±ç«‹å³queryï¼Œè€Œconsistency_levelæ²¡æœ‰è®¾ä¸ºStrong
  - Compaction https://github.com/milvus-io/milvus/discussions/28565  https://milvus.io/blog/2022-2-21-compact.md
    - When you continually insert data into milvus, the data is not persisted into storage instantly. Querynode accumulates the data in memory to perform brute-force search on it.
    -  Datanode accumulates the data in a buffer until the buffer size exceeds a threshold. The threshold is dataCoord.segment.maxSize * dataCoord.segment.sealProportion, after the datanode flushes the buffer into storage, the data becomes a "sealed segment".
    - The value dataCoord.segment.sealProportion is 0.23, this value should not be too large or too small, the reason is:
      - only "sealed segment" can be indexed, before the "growing segment" is sealed, it always performs brute-force search and slows down the search performance. If this value is large, a large "growing segment" will lead to poor search performance.
      - If the value is small, there will be lots of small sealed segments generated, large number of small segments also slows down search performance, and brings heavy workload to datanode to compact them.
    - The major purposes of compaction:
      - merge small segments into large segments because large amount of small segments slows down search performance. Ideally, the size of each segment is near to dataCoord.segment.maxSize=512MB.
      - in milvus, delete action is "soft-delete". When you call delete(), an entity is marked as "soft-deleted" in a segment, it is invisible/ignored to search/query, but still occupies memory and storage space.
    - Milvus builds an independent index for each segment. So, if segments are compacted to a new segment, the old segments are marked as "deleted" and waiting for GC
      - and indexnode will build index for the new segment. Set indexBasedCompaction to true can avoid unnecessary index work.
- [åŠ¨æ€ Schema](https://mp.weixin.qq.com/s/jhyePhxjUbWBicEvqxIKGQ)
  - Milvus å¦‚ä½•å®ç°åŠ¨æ€ Schema åŠŸèƒ½
    - Milvus é€šè¿‡ç”¨éšè—çš„å…ƒæ•°æ®åˆ—çš„æ–¹å¼ï¼Œæ¥æ”¯æŒç”¨æˆ·ä¸ºæ¯è¡Œæ•°æ®æ·»åŠ ä¸åŒåç§°å’Œæ•°æ®ç±»å‹çš„åŠ¨æ€å­—æ®µçš„åŠŸèƒ½ã€‚
    - å½“ç”¨æˆ·åˆ›å»ºè¡¨å¹¶å¼€å¯åŠ¨æ€å­—æ®µæ—¶ï¼ŒMilvus ä¼šåœ¨è¡¨çš„ Schema é‡Œåˆ›å»ºä¸€ä¸ªåä¸º$metaçš„éšè—åˆ—ã€‚JSON æ˜¯ä¸€ç§ä¸ä¾èµ–è¯­è¨€çš„æ•°æ®æ ¼å¼ï¼Œè¢«ç°ä»£ç¼–ç¨‹è¯­è¨€å¹¿æ³›æ”¯æŒï¼Œå› æ­¤ Milvus éšè—çš„åŠ¨æ€å®é™…åˆ—ä½¿ç”¨ JSON ä½œä¸ºæ•°æ®ç±»å‹ã€‚
  - åŠ¨æ€ Schema çš„ Aã€B é¢
    - ä¸€æ–¹é¢ï¼ŒåŠ¨æ€ Schema è®¾ç½®ç®€ä¾¿ï¼Œæ— éœ€å¤æ‚çš„é…ç½®å³å¯å¼€å¯åŠ¨æ€ Schemaï¼›åŠ¨æ€ Schema å¯ä»¥éšæ—¶é€‚åº”æ•°æ®æ¨¡å‹çš„å˜åŒ–ï¼Œå¼€å‘è€…æ— éœ€è¿›è¡Œé‡æ„æˆ–è°ƒæ•´ä»£ç ã€‚
    - å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨åŠ¨æ€ Schema è¿›è¡Œè¿‡æ»¤æœç´¢æ¯”å›ºå®š Schema æ…¢å¾—å¤šï¼›åœ¨åŠ¨æ€ Schema ä¸Šè¿›è¡Œæ‰¹é‡æ’å…¥æ¯”è¾ƒå¤æ‚ï¼Œæ¨èç”¨æˆ·ä½¿ç”¨è¡Œå¼æ’å…¥æ¥å£å†™å…¥åŠ¨æ€å­—æ®µæ•°æ®ã€‚
- [å‘é‡æ•°æ®åº“](https://developer.aliyun.com/article/1328709?spm=a2c6h.12883283.index.43.5ba74307ZagBs5)
    - æœ¬è´¨ä¸Šå°±æ˜¯ç»™å®šä¸€æ¡å‘é‡ï¼Œæˆ‘ä»¬è¦æœç´¢ç¦»å®ƒæœ€è¿‘çš„ k æ¡å‘é‡ï¼Œé‚£æœ€è¿‘çš„è¿™ä¸ªè·ç¦»çš„å®šä¹‰å¯ä»¥æ˜¯ï¼Œæ¯”å¦‚è¯´ï¼Œå†…ç§¯æˆ–è€…æ¬§æ°è·ç¦»ã€æˆ–è€…ä½™å¼¦è·ç¦»ã€‚æœ‰äº†è·ç¦»çš„å®šä¹‰ä»¥åï¼Œæˆ‘ä»¬è¿˜è¦å®šä¹‰ä¸€äº›å‘é‡çš„æœç´¢ç®—æ³•ã€‚
    - å‘é‡æœç´¢ç®—æ³•æ€»ä½“æ¥è¯´åˆ†ä¸ºä¸¤ç±»ï¼Œ
        - ç¬¬ä¸€ç±»æ˜¯ç²¾å‡†æœç´¢ KNN - FLATï¼Œä¸€ä¸ªå‘é‡ä¸€ä¸ªå‘é‡åœ°å»æ£€ç´¢ï¼Œç„¶åå– top kï¼Œå¬å›ç‡ä¼šå¾ˆé«˜ï¼Œä½†æ˜¯å®ƒçš„æ‰§è¡Œçš„æ€§èƒ½ä¼šæ¯”è¾ƒå·®ï¼Œå› ä¸ºè¦åšå…¨å±€æ‰«æ
        - approximate nearest neighborï¼Œå°±æ˜¯ ANNï¼Œé‚£è¿™ç±»ç®—æ³•å®ƒå¯èƒ½å›ç­”çš„å¹¶ä¸æ˜¯æœ€ç²¾å‡†çš„ top k çš„å‘é‡ï¼Œä½†æ˜¯è¿™ä¸€ç±»ç®—æ³•çš„å¥½å¤„æ˜¯æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚
- æµ·é‡æ•°æ®ç›¸ä¼¼æ•°æ®æŸ¥æ‰¾æ–¹æ³•
    - é«˜ç»´ç¨€ç–å‘é‡å’Œç¨ å¯†å‘é‡ä¸¤å¤§æ–¹å‘
        - é«˜ç»´ç¨€ç–å‘é‡çš„ç›¸ä¼¼æŸ¥æ‰¾ - minhash, lsh(Locality-Sensitive Hashingï¼‰, simhash
            - minhash
                - å®šä¹‰ä¸€ä¸ªå‡½æ•°hï¼šè®¡ç®—é›†åˆSæœ€å°çš„minhashå€¼ï¼Œå°±æ˜¯åœ¨è¿™ç§é¡ºåºä¸‹æœ€å…ˆå‡ºç°1çš„å…ƒç´ 
                - å¦‚æœè¿›è¡Œnæ¬¡é‡æ’çš„è¯ï¼Œå°±ä¼šæœ‰nä¸ªminhashå‡½æ•°ï¼Œ{h1(S), h2(S)â€¦, hn(S)}, é‚£åŸæ¥æ¯ä¸ªé«˜ç»´é›†åˆï¼Œå°±ä¼šè¢«é™åˆ°nç»´ç©ºé—´ï¼Œæ¯”å¦‚S1->{h1(S1), h2(S1)â€¦, hn(S1)}
                - å®é™…ä¸­å› ä¸ºé‡æ’æ¯”è¾ƒè€—æ—¶ï¼Œä¼šç”¨è‹¥å¹²éšæœºå“ˆå¸Œå‡½æ•°æ›¿ä»£. åŒæ ·å¯ä»¥å®šä¹‰nä¸ªå“ˆå¸Œå‡½æ•°ã€ä¸éœ€è¦é‡æ’ï¼Œæ¯ä¸ªhashè®¡ç®—å¯¹åº”çš„å€¼å°±è¡Œã€‘ï¼Œè¿›è¡Œä¸Šè¿°æ“ä½œï¼Œé‚£æ¯ä¸ªé›†åˆSå°±è¢«é™ç»´åˆ°nç»´ç©ºé—´çš„ç­¾åã€‚
            - LSH
                - minhashè§£å†³äº†é«˜ç»´å‘é‡é—´è®¡ç®—å¤æ‚åº¦é—®é¢˜(é€šè¿‡minhash æœºåˆ¶æŠŠé«˜ç»´é™ä½åˆ°nç»´ä½çº¬ç©ºé—´)
                - ä½†æ˜¯è¿˜æ²¡è§£å†³ä¸€ä¸ªé—®é¢˜ï¼šä¸¤ä¸¤æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦O(n^2)
                - LSH å°±æ˜¯è¿™æ ·çš„æœºåˆ¶ï¼Œé€šè¿‡å“ˆå¸Œæœºåˆ¶ï¼Œè®©ç›¸ä¼¼å‘é‡å°½å¯èƒ½å‡ºç°ä¸€ä¸ªæ¡¶ä¸­ï¼Œè€Œä¸ç›¸ä¼¼çš„å‘é‡å‡ºç°åœ¨ä¸åŒçš„æ¡¶ä¸­. ç›¸ä¼¼åº¦è®¡ç®—åªåœ¨ä¹ˆä¸ªæ¡¶ä¸­è¿›è¡Œï¼Œæ¯ä¸ªæ¡¶å½¼æ­¤ä¹‹é—´ä¸åšç›¸ä¼¼åº¦è®¡ç®—ã€‚
                - åœ¨minhashing ç­¾åçš„åŸºç¡€ä¸ŠåšLSH
                    - ä¸€ä¸ªé«˜ç»´å‘é‡é€šè¿‡minhashingå¤„ç†åå˜æˆnç»´ä½ç»´å‘é‡çš„ç­¾åï¼Œç°åœ¨æŠŠè¿™nç»´ç­¾ååˆ†æˆbç»„ï¼Œæ¯ç»„rä¸ªå…ƒç´ ã€‚
                    - æ¯ç»„é€šè¿‡ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ï¼ŒæŠŠè¿™ç»„çš„rä¸ªå…ƒç´ ç»„æˆrç»´å‘é‡å“ˆå¸Œåˆ°ä¸€ä¸ªæ¡¶ä¸­ã€‚
                    - æ¯ç»„å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œä½†æ˜¯æ¯ç»„æ¡¶æ²¡äº¤é›†ï¼Œå³ä½¿å“ˆå¸Œå€¼ä¸€æ ·ã€‚æ¡¶åå¯ä»¥ç±»ä¼¼ï¼šç»„å+å“ˆå¸Œå€¼ã€‚
                    - åœ¨ä¸€ä¸ªæ¡¶ä¸­çš„å‘é‡æ‰è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ï¼Œç›¸ä¼¼åº¦è®¡ç®—çš„å‘é‡æ˜¯minhashçš„nç»´å‘é‡ï¼ˆä¸æ˜¯rç»´å‘é‡ï¼‰ã€‚
            - simHash
                - SimhashæŠ€æœ¯å¼•å…¥åˆ°æµ·é‡æ–‡æœ¬å»é‡é¢†åŸŸ
                - google é€šè¿‡SimhashæŠŠä¸€ç¯‡æ–‡æœ¬æ˜ å°„æˆ64bitsçš„äºŒè¿›åˆ¶ä¸²ã€‚
                    - æ–‡æ¡£æ¯ä¸ªè¯æœ‰ä¸ªæƒé‡ã€‚
                    - æ–‡æ¡£æ¯ä¸ªè¯å“ˆå¸Œæˆä¸€ä¸ªäºŒè¿›åˆ¶ä¸²ã€‚
                    - æ–‡æ¡£æœ€ç»ˆçš„ç­¾åæ˜¯å„ä¸ªè¯å’Œç­¾åçš„åŠ æƒå’Œ(å¦‚æœè¯¥ä½æ˜¯1åˆ™+weightï¼Œå¦‚æœæ˜¯0ï¼Œåˆ™-weight)ï¼Œå†æ±‚ç­¾å[>0åˆ™å˜æˆ1ï¼Œåä¹‹å˜æˆ0]å¾—åˆ°ä¸€ä¸ª64ä½äºŒè¿›åˆ¶æ•°ã€‚
                    - å¦‚æœä¸¤ç¯‡æ–‡æ¡£ç›¸åŒï¼Œåˆ™ä»–ä»¬simhashç­¾åæ±‰æ˜è·ç¦»å°äºç­‰äº3ã€‚
                - å› ä¸ºsimhashæœ¬è´¨ä¸Šæ˜¯å±€éƒ¨æ•æ„Ÿhashï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æµ·æ˜è·ç¦»æ¥è¡¡é‡simhashå€¼çš„ç›¸ä¼¼åº¦ã€‚
                - å‡è®¾æˆ‘ä»¬è¦å¯»æ‰¾æµ·æ˜è·ç¦»3ä»¥å†…çš„æ•°å€¼ï¼Œæ ¹æ®æŠ½å±‰åŸç†ï¼Œåªè¦æˆ‘ä»¬å°†æ•´ä¸ª64ä½çš„äºŒè¿›åˆ¶ä¸²åˆ’åˆ†ä¸º4å—ï¼Œæ— è®ºå¦‚ä½•ï¼ŒåŒ¹é…çš„ä¸¤ä¸ªsimhash codeä¹‹é—´è‡³å°‘æœ‰ä¸€å—åŒºåŸŸæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚
    - é«˜æ•ˆçš„æœç´¢ç®—æ³•æœ‰å¾ˆå¤šï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡ä¸¤ç§æ–¹å¼æé«˜æœç´¢æ•ˆç‡ï¼š
        - å‡å°‘å‘é‡å¤§å°â€”â€”é€šè¿‡é™ç»´æˆ–å‡å°‘è¡¨ç¤ºå‘é‡å€¼çš„é•¿åº¦ã€‚
        - ç¼©å°æœç´¢èŒƒå›´â€”â€”å¯ä»¥é€šè¿‡èšç±»æˆ–å°†å‘é‡ç»„ç»‡æˆåŸºäºæ ‘å½¢ã€å›¾å½¢ç»“æ„æ¥å®ç°ï¼Œå¹¶é™åˆ¶æœç´¢èŒƒå›´ä»…åœ¨æœ€æ¥è¿‘çš„ç°‡ä¸­è¿›è¡Œï¼Œæˆ–è€…é€šè¿‡æœ€ç›¸ä¼¼çš„åˆ†æ”¯è¿›è¡Œè¿‡æ»¤ã€‚
    - ANN æœ€è¿‘é‚»æ£€ç´¢
        - [Comprehensive Guide To Approximate Nearest Neighbors Algorithms](https://towardsdatascience.com/comprehensive-guide-to-approximate-nearest-neighbors-algorithms-8b94f057d6b6)
        - æ ‘æ–¹æ³•ï¼Œå¦‚ KD-treeï¼ŒBall-treeï¼ŒAnnoy
          - KD-Treeï¼ˆKç»´æ ‘ï¼‰ï¼šKD-Treeæ˜¯ä¸€ç§ç”¨äºå¤šç»´ç©ºé—´çš„æ•°æ®ç»“æ„
            - åœ¨å‘é‡æ•°æ®åº“ä¸­ï¼ŒKD-Treeå¯¹å‘é‡çš„å„ä¸ªç»´åº¦è¿›è¡Œåˆ’åˆ†ï¼Œå½¢æˆä¸€ç§æ ‘çŠ¶ç»“æ„ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨ä¸€ä¸ªå‘é‡ï¼Œå¹¶åœ¨æŸä¸ªç»´åº¦ä¸Šæœ‰ä¸€ä¸ªåˆ†è£‚å€¼ï¼Œå°†æ•°æ®ç©ºé—´åˆ†ä¸ºä¸¤åŠ
            - å¯¹äºä½ç»´æ•°æ®ï¼ŒKD-TreeæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œå ç”¨çš„å†…å­˜ç›¸å¯¹è¾ƒå°‘ã€‚ç„¶è€Œï¼Œéšç€æ•°æ®ç»´åº¦çš„å¢åŠ ï¼ŒæŸ¥è¯¢æ•ˆç‡é™ä½ï¼Œå—åˆ°â€œç»´åº¦è¯…å’’â€çš„å½±å“ï¼Œä¸é€‚åˆé«˜ç»´æ•°æ®ã€‚
          - Ball Treesï¼šBall Treesä½¿ç”¨â€œè¶…çƒä½“â€ï¼ˆæˆ–ç®€ç§°â€œçƒâ€ï¼‰æ¥å¯¹æ•°æ®è¿›è¡Œåˆ†åŒº
            - æ¯ä¸ªèŠ‚ç‚¹çš„çƒå†…éƒ½åŒ…å«æ•°æ®ç‚¹çš„å­é›†ï¼Œè€Œå­èŠ‚ç‚¹çš„çƒåˆ™è¿›ä¸€æ­¥ç»†åˆ†è¯¥ç©ºé—´ã€‚Ball Trees é€‚ç”¨äºä»»ä½•åº¦é‡ç©ºé—´ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œæ•ˆæœå¯èƒ½ä¼˜äºKD-Treeã€‚
            - ç¼ºç‚¹æ˜¯æ„å»ºè¿‡ç¨‹å¯èƒ½ç›¸å¯¹è¾ƒæ…¢ï¼Œéœ€è¦æ›´å¤šçš„å†…å­˜
          - Annoyï¼ˆApproximate Nearest Neighbors Oh Yeahï¼‰ï¼šAnnoyæ˜¯ä¸€ç§ä¸ºå¤§å‹æ•°æ®é›†åˆ›å»ºæŒä¹…æ€§ã€é™æ€ã€å¯æŸ¥è¯¢çš„è¿‘ä¼¼æœ€è¿‘é‚»ç´¢å¼•çš„æ–¹æ³•
            - å®ƒé€šè¿‡æ„å»ºå¤šæ£µéšæœºæŠ•å½±æ ‘å®ç°ã€‚Annoy æä¾›äº†æŸ¥è¯¢é€Ÿåº¦å’Œç²¾ç¡®åº¦ä¹‹é—´çš„è‰¯å¥½å¹³è¡¡ï¼Œé€‚ç”¨äºå¤§å‹æ•°æ®é›† ç„¶è€Œå®ƒæ˜¯ä¸€ä¸ªè¿‘ä¼¼æ–¹æ³•ï¼Œå¯èƒ½ä¸ä¿è¯æ€»æ˜¯è¿”å›çœŸæ­£çš„æœ€è¿‘é‚»ã€‚
            - Annoy is a tree-based indexing algorithm that uses random projections to iteratively split the hyperspace of vectors, with the final split resulting in a binary tree
            - Annoy uses two tricks to improve accuracy/recall 
              - 1) traversing down both halves of a split if the query point lies close to the dividing hyperplane, and 
              - 2) creating a forest of binary trees.
            - Annoy is still an in-memory index, the number of trees (n_trees) and the number of nodes explored (search_k), allow users to balance accuracy and speed
              - Number of Trees (n_trees): Increasing the number of trees improves search accuracy but requires more storage and computation during queries.
              - Search Effort (search_k): This parameter determines how many candidate points the system evaluates during a query. Higher values lead to better accuracy at the cost of increased query time.
            - Annoy traverses several trees in parallel to narrow down the search space when performing a query. 
              - The results from all trees are combined to approximate the nearest neighbors to the query vector.
        - å“ˆå¸Œæ–¹æ³•ï¼Œå¦‚ Local Sensitive Hashing (LSH)
        - çŸ¢é‡é‡åŒ–æ–¹æ³•ï¼Œå¦‚ Product Quantization (PQ)
          - PQå°†å¤§å‘é‡ç©ºé—´åˆ†è§£ä¸ºæ›´å°çš„å­ç©ºé—´ï¼Œå¹¶ä¸ºè¿™äº›å­ç©ºé—´çš„æ¯ä¸€ä¸ªç‹¬ç«‹åœ°å­¦ä¹ ä¸€ç»„æœ‰é™çš„â€œä»£ç ç°¿â€ã€‚å‘é‡è¢«ç¼–ç ä¸ºè¿™äº›å­ç©ºé—´ä¸­æœ€è¿‘çš„ä»£ç ç°¿æ¡ç›®çš„ç´¢å¼•
          - PQ æå¤§åœ°å‹ç¼©äº†åŸå§‹å‘é‡ï¼Œä»è€Œå®ç°äº†å­˜å‚¨å’ŒæŸ¥è¯¢çš„é«˜æ•ˆç‡ã€‚ä½†å‡¡äº‹éƒ½æœ‰åŒé¢æ€§ï¼Œç”±äºæ˜¯æœ‰æŸå‹ç¼©ï¼ŒPQ å¯èƒ½ä¼šæŸå¤±ä¸€äº›ç²¾ç¡®åº¦ã€‚
        - è¿‘é‚»å›¾æ–¹æ³•ï¼Œå¦‚ [Hierarchical Navigable Small World (HNSW)](https://towardsdatascience.com/similarity-search-part-4-hierarchical-navigable-small-world-hnsw-2aad4fe87d37)
          - HNSWåˆ©ç”¨å›¾ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ•°æ®ä¸­çš„ä¸€ä¸ªå‘é‡ï¼Œé€šè¿‡ä¸€ç³»åˆ—å±‚æ¬¡æ¥ç¡®ä¿å¿«é€Ÿè®¿é—®ã€‚æ¯ä¸€å±‚éƒ½æ˜¯åŸå§‹æ•°æ®çš„ä¸€ä¸ªå­é›†ï¼Œä¸Šå±‚çš„æ•°æ®ç‚¹æ•°é‡æ¯”ä¸‹å±‚å°‘ã€‚
          - HNSW æä¾›äº†æŸ¥è¯¢é€Ÿåº¦å’Œç²¾ç¡®åº¦ä¹‹é—´çš„è‰¯å¥½å¹³è¡¡ï¼Œé€‚ç”¨äºå¤§å‹å’Œé«˜ç»´æ•°æ®é›†ã€‚ä½†å®ƒéœ€è¦æ›´å¤šçš„å†…å­˜ï¼Œæ„å»ºç´¢å¼•çš„è¿‡ç¨‹å¯èƒ½è¾ƒæ…¢ã€‚
          - M: The number of edges per element during the graph creation in each layer. A higher M value generally results in better search accuracy, but it comes at the cost of slower index-building time.
          - efConstruction: The number of neighbors considered to find the nearest neighbor at each layer during graph creation. The more neighbors considered, the better the index quality, but the slower the index building time will be.
          - efSearch: The number of nearest neighbors to consider during the vector search process. The higher the efSearch, the higher the recall, but the searching process will be slower.
          - Mï¼šNSWå›¾ä¸­æ¯ä¸ªå…ƒç´ çš„è¾¹æ•°ã€‚è¾ƒé«˜çš„Må€¼é€šå¸¸ä¼šå¯¹åº”æ›´å¥½çš„æœç´¢ç²¾åº¦ï¼Œä½†ä»£ä»·æ˜¯æ›´æ…¢çš„ç´¢å¼•æ„å»ºæ—¶é—´ã€‚
          - efConstructionï¼šæ„å»ºç´¢å¼•æ—¶çš„åŠ¨æ€å€™é€‰åˆ—è¡¨å¤§å°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå€™é€‰é˜Ÿåˆ—è¶Šé•¿ï¼Œç´¢å¼•è´¨é‡è¶Šå¥½ï¼Œç´¢å¼•æ„å»ºæ—¶é—´ä¹Ÿå°±ä¼šè¶Šé•¿ã€‚
          - efSearchï¼šæœç´¢é˜¶æ®µçš„åŠ¨æ€å€™é€‰åˆ—è¡¨çš„å¤§å°ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒefSearchè¶Šé«˜ï¼Œå¬å›ç‡è¶Šé«˜ï¼Œä½†æ˜¯æœç´¢è¿‡ç¨‹ä¼šæ¯”è¾ƒæ…¢ã€‚
    - è¿‘ä¼¼æœ€è¿‘é‚» (ANN)ç®—æ³•
      - Voyager vs. Annoy  https://zilliz.com/learn/what-is-voyager
        - Annoy was one of the earliest libraries Spotify used for ANN search. It relies on tree-based indexing, which is effective for static datasets but requires full index rebuilds for updates.
        - Voyager addresses this limitation with dynamic indexing, making it better suited for real-time and dynamic applications
        - Voyager outperforms Annoy in terms of speed and accuracy, especially as datasets grow larger.
      - Voyager vs. hnswlib
        - Hnswlib is a well-known implementation of the HNSW algorithm. While it offers excellent performance and accuracy, 
          - it lacks production-grade features like multi-language support and fault tolerance.
        - Voyager builds on hnswlib by adding these enhancements, making it a more robust and versatile tool for real-world deployments.
      - Voyager vs. ScaNN
        - ScaNN, short for Scalable Nearest Neighbors, excels in inner-product search but does not support dynamic datasets. This limitation makes it less suitable for real-time systems that require frequent updates.
        - Voyagerâ€™s flexibility and support for evolving data make it a better choice for dynamic environments
      - Voyager vs. Faiss
        - Faiss is optimized for GPU-accelerated batch processing, making it ideal for offline tasks like training or preprocessing large datasets.
        -  Voyager is designed for real-time applications, with CPU-based operations that allow for dynamic indexing and low-latency responses.
  - [Comprehensive Guide To Approximate Nearest Neighbors Algorithms](https://towardsdatascience.com/comprehensive-guide-to-approximate-nearest-neighbors-algorithms-8b94f057d6b6)
    - ã€ŒLSHã€ï¼ˆLocality-Sensitive Hashingï¼‰ã€å®ƒå¼•å…¥äº†ä¸€ç§å“ˆå¸Œå‡½æ•°ï¼Œä½¿å¾—ç›¸ä¼¼çš„è¾“å…¥èƒ½ä»¥æ›´é«˜çš„æ¦‚ç‡æ˜ å°„åˆ°ç›¸åŒçš„æ¡¶ä¸­ï¼Œå…¶ä¸­æ¡¶çš„æ•°é‡è¿œå°äºè¾“å…¥çš„æ•°é‡ã€‚
    - ã€ŒANNOYï¼ˆApproximate Nearest Neighborsï¼‰ã€å®ƒçš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯éšæœºæŠ•å½±æ ‘ï¼Œå®é™…æ˜¯ä¸€ç»„äºŒå‰æ ‘ï¼Œå…¶ä¸­æ¯ä¸ªéå¶å­èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå°†è¾“å…¥ç©ºé—´åˆ†æˆä¸¤åŠçš„è¶…å¹³é¢ï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹å­˜å‚¨ä¸€ä¸ªæ•°æ®ã€‚äºŒå‰æ ‘æ˜¯ç‹¬ç«‹ä¸”éšæœºæ„å»ºçš„ï¼Œå› æ­¤åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå®ƒæ¨¡ä»¿äº†å“ˆå¸Œå‡½æ•°ã€‚ANNOYä¼šåœ¨æ‰€æœ‰æ ‘ä¸­è¿­ä»£åœ°æœç´¢æœ€æ¥è¿‘æŸ¥è¯¢çš„é‚£ä¸€åŠï¼Œç„¶åä¸æ–­èšåˆç»“æœã€‚è¿™ä¸ªæƒ³æ³•ä¸ KD æ ‘éå¸¸ç›¸å…³ï¼Œä½†æ›´å…·å¯æ‰©å±•æ€§ã€‚
    - ã€ŒHNSWï¼ˆHierarchical Navigable Small Worldï¼‰ã€å®ƒå—åˆ°å°ä¸–ç•Œç½‘ç»œæ€æƒ³çš„å¯å‘ï¼Œå…¶ä¸­å¤§å¤šæ•°èŠ‚ç‚¹å¯ä»¥åœ¨å¾ˆå°‘çš„æ­¥éª¤å†…è¢«ä»»ä½•å…¶ä»–èŠ‚ç‚¹åˆ°è§¦è¾¾ï¼›ä¾‹å¦‚ç¤¾äº¤ç½‘ç»œçš„â€œå…­åº¦åˆ†éš”â€ç†è®ºã€‚
      - HNSWæ„å»ºè¿™äº›å°ä¸–ç•Œå›¾çš„å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­åº•å±‚ç»“æ„åŒ…å«å®é™…æ•°æ®ã€‚ä¸­é—´çš„å±‚åˆ›å»ºå¿«æ·æ–¹å¼ä»¥åŠ å¿«æœç´¢é€Ÿåº¦ã€‚æ‰§è¡Œæœç´¢æ—¶ï¼ŒHNSWä»é¡¶å±‚çš„éšæœºèŠ‚ç‚¹å¼€å§‹ï¼Œå¯¼èˆªè‡³ç›®æ ‡ã€‚å½“å®ƒæ— æ³•é è¿‘æ—¶ï¼Œå®ƒä¼šå‘ä¸‹ç§»åŠ¨åˆ°ä¸‹ä¸€å±‚ï¼Œç›´åˆ°åˆ°è¾¾æœ€åº•å±‚ã€‚ä¸Šå±‚ä¸­çš„æ¯ä¸ªç§»åŠ¨éƒ½å¯èƒ½è¦†ç›–æ•°æ®ç©ºé—´ä¸­çš„å¾ˆé•¿ä¸€æ®µè·ç¦»ï¼Œè€Œä¸‹å±‚ä¸­çš„æ¯ä¸ªç§»åŠ¨éƒ½å¯ä»¥ç»†åŒ–æœç´¢è´¨é‡ã€‚
    - ã€ŒFAISSï¼ˆfacebook AI Similarity Searchï¼‰ã€å®ƒè¿è¡Œçš„å‡è®¾æ˜¯ï¼šé«˜ç»´ç©ºé—´ä¸­èŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»æœä»é«˜æ–¯åˆ†å¸ƒï¼Œå› æ­¤è¿™äº›æ•°æ®ç‚¹ä¹‹é—´å­˜åœ¨ç€èšç±»ç‚¹ã€‚faissé€šè¿‡å°†å‘é‡ç©ºé—´åˆ’åˆ†ä¸ºç°‡ï¼Œç„¶ååœ¨ç°‡å†…ä½¿ç”¨ç”¨å‘é‡é‡åŒ–ã€‚faissé¦–å…ˆä½¿ç”¨ç²—ç²’åº¦é‡åŒ–æ–¹æ³•æ¥æŸ¥æ‰¾å€™é€‰ç°‡ï¼Œç„¶åè¿›ä¸€æ­¥ä½¿ç”¨æ›´ç²¾ç»†çš„é‡åŒ–æ–¹æ³•æ¥æŸ¥æ‰¾æ¯ä¸ªç°‡ã€‚
      - [ä¸Šæ‰‹Faiss](https://mp.weixin.qq.com/s/GxxPqa1pjDvt9PvAMuebkA)
      - [Faiss: The Missing Manual](https://www.pinecone.io/learn/series/faiss/)
    - ã€ŒScaNNï¼ˆScalable Nearest Neighborsï¼‰ã€çš„ä¸»è¦åˆ›æ–°åœ¨äºå„å‘å¼‚æ€§å‘é‡é‡åŒ–ã€‚å®ƒå°†æ•°æ®ç‚¹é‡åŒ–ä¸ºä¸€ä¸ªå‘é‡ï¼Œä½¿å¾—å®ƒä»¬çš„å†…ç§¯ä¸åŸå§‹è·ç¦»å°½å¯èƒ½ç›¸ä¼¼ï¼Œè€Œä¸æ˜¯é€‰æ‹©æœ€æ¥è¿‘çš„é‡åŒ–è´¨å¿ƒç‚¹ã€‚
      - [blog](https://blog.research.google/2020/07/announcing-scann-efficient-vector.html) [Vector Search ANN æœåŠ¡](https://cloud.google.com/vertex-ai/docs/matching-engine/ann-service-overview?hl=zh-cn)
      - ScaNN ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸€ç§ç§°ä¸º Product Quantizationï¼ˆPQï¼‰çš„æŠ€æœ¯å°†é«˜ç»´å‘é‡å‹ç¼©æˆå¤šä¸ªä½ç»´å‘é‡ï¼Œå¹¶ä½¿ç”¨è¿™äº›ä½ç»´å‘é‡è¿›è¡Œç›¸ä¼¼æ€§æœç´¢ã€‚PQ æŠ€æœ¯å¯ä»¥å°†é«˜ç»´å‘é‡åˆ’åˆ†æˆå¤šä¸ªå­å‘é‡ï¼Œå¹¶å¯¹æ¯ä¸ªå­å‘é‡è¿›è¡Œé‡åŒ–ï¼Œä»è€Œå°†é«˜ç»´å‘é‡å‹ç¼©æˆå¤šä¸ªä½ç»´å‘é‡ã€‚è¿™æ ·å¯ä»¥å¤§å¤§é™ä½ç›¸ä¼¼æ€§æœç´¢çš„è®¡ç®—å¤æ‚åº¦ï¼Œæé«˜æœç´¢æ•ˆç‡ã€‚
      - ScaNN ç®—æ³•è¿˜ä½¿ç”¨äº†ä¸€ç§ç§°ä¸º Clustering Graphï¼ˆCGï¼‰çš„æŠ€æœ¯ï¼Œå°†æ•°æ®é›†åˆ’åˆ†æˆå¤šä¸ªå­é›†ï¼Œå¹¶æ„å»ºä¸€ä¸ªå›¾æ¥è¡¨ç¤ºè¿™äº›å­é›†ä¹‹é—´çš„ç›¸ä¼¼æ€§å…³ç³»ã€‚è¿™æ ·å¯ä»¥å°†ç›¸ä¼¼çš„å‘é‡èšé›†åœ¨ä¸€èµ·ï¼Œä»è€Œæé«˜æœç´¢æ•ˆç‡ã€‚
      - ScaNN ç®—æ³•çš„ä¼˜ç‚¹åœ¨äºå®ƒå¯ä»¥åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šè¿›è¡Œé«˜æ•ˆçš„ç›¸ä¼¼æ€§æœç´¢ï¼ŒåŒæ—¶å…·æœ‰è¾ƒé«˜çš„æœç´¢å‡†ç¡®ç‡ã€‚ScaNN ç®—æ³•è¿˜æ”¯æŒå¢é‡å¼æ›´æ–°ï¼Œå¯ä»¥åŠ¨æ€åœ°æ·»åŠ å’Œåˆ é™¤å‘é‡ï¼Œä»è€Œé€‚åº”æ•°æ®é›†çš„å˜åŒ–ã€‚
    - Faiss 
        - æˆ‘ä»¬å¯ä»¥å°†å‘é‡æƒ³è±¡ä¸ºåŒ…å«åœ¨ Voronoi å•å…ƒæ ¼ä¸­ - å½“å¼•å…¥ä¸€ä¸ªæ–°çš„æŸ¥è¯¢å‘é‡æ—¶ï¼Œé¦–å…ˆæµ‹é‡å…¶ä¸è´¨å¿ƒ (centroids) ä¹‹é—´çš„è·ç¦»ï¼Œç„¶åå°†æœç´¢èŒƒå›´é™åˆ¶åœ¨è¯¥è´¨å¿ƒæ‰€åœ¨çš„å•å…ƒæ ¼å†…ã€‚
        - ä¸ºäº†è§£å†³æœç´¢æ—¶å¯èƒ½å­˜åœ¨çš„é—æ¼é—®é¢˜ï¼Œå¯ä»¥å°†æœç´¢èŒƒå›´åŠ¨æ€è°ƒæ•´ï¼Œä¾‹å¦‚å½“ nprobe = 1 æ—¶ï¼Œåªæœç´¢æœ€è¿‘çš„ä¸€ä¸ªèšç±»ä¸­å¿ƒï¼Œå½“ nprobe = 2 æ—¶ï¼Œæœç´¢æœ€è¿‘çš„ä¸¤ä¸ªèšç±»ä¸­å¿ƒï¼Œæ ¹æ®å®é™…ä¸šåŠ¡çš„éœ€æ±‚è°ƒæ•´ nprobe çš„å€¼ã€‚
    - Product Quantization (PQ)
        - åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸­ï¼Œèšç±»ç®—æ³•æœ€å¤§çš„é—®é¢˜åœ¨äºå†…å­˜å ç”¨å¤ªå¤§
            - ä¿å­˜æ¯ä¸ªå‘é‡çš„åæ ‡ï¼Œè€Œæ¯ä¸ªåæ ‡éƒ½æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå ç”¨çš„å†…å­˜å°±å·²ç»éå¸¸å¤§äº†ã€‚
            - è¿˜éœ€è¦ç»´æŠ¤èšç±»ä¸­å¿ƒå’Œæ¯ä¸ªå‘é‡çš„èšç±»ä¸­å¿ƒç´¢å¼•ï¼Œè¿™ä¹Ÿä¼šå ç”¨å¤§é‡çš„å†…å­˜ã€‚
        - å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡é‡åŒ– (Quantization) çš„æ–¹å¼è§£å†³ï¼Œä¹Ÿå°±æ˜¯å¸¸è§çš„æœ‰æŸå‹ç¼©.ä¾‹å¦‚åœ¨å†…å­˜ä¸­å¯ä»¥å°†èšç±»ä¸­å¿ƒé‡Œé¢æ¯ä¸€ä¸ªå‘é‡éƒ½ç”¨èšç±»ä¸­å¿ƒçš„å‘é‡æ¥è¡¨ç¤ºï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰å‘é‡åˆ°èšç±»ä¸­å¿ƒçš„ç æœ¬ï¼Œè¿™æ ·å°±èƒ½å¤§å¤§å‡å°‘å†…å­˜çš„å ç”¨ã€‚
            - ä½†æ˜¯åœ¨é«˜ç»´åæ ‡ç³»ä¸­ï¼Œè¿˜ä¼šé‡åˆ°ç»´åº¦ç¾éš¾é—®é¢˜ï¼Œå…·ä½“æ¥è¯´ï¼Œéšç€ç»´åº¦çš„å¢åŠ ï¼Œæ•°æ®ç‚¹ä¹‹é—´çš„è·ç¦»ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œåœ¨é«˜ç»´åæ ‡ç³»ä¸­ï¼Œéœ€è¦æ›´å¤šçš„èšç±»ä¸­å¿ƒç‚¹å°†æ•°æ®ç‚¹åˆ†æˆæ›´å°çš„ç°‡ï¼Œæ‰èƒ½æé«˜åˆ†ç±»çš„è´¨é‡ã€‚å¦è€…ï¼Œå‘é‡å’Œè‡ªå·±çš„èšç±»ä¸­å¿ƒè·ç¦»å¾ˆè¿œï¼Œä¼šæå¤§çš„é™ä½æœç´¢çš„é€Ÿåº¦å’Œè´¨é‡ã€‚
        - å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œå°†å‘é‡åˆ†è§£ä¸ºå¤šä¸ªå­å‘é‡ï¼Œç„¶åå¯¹æ¯ä¸ªå­å‘é‡ç‹¬ç«‹è¿›è¡Œé‡åŒ–ï¼Œæ¯”å¦‚å°† 128 ç»´çš„å‘é‡åˆ†ä¸º 8 ä¸ª 16 ç»´çš„å‘é‡ï¼Œç„¶ååœ¨ 8 ä¸ª 16 ç»´çš„å­å‘é‡ä¸Šåˆ†åˆ«è¿›è¡Œèšç±»ï¼Œå› ä¸º 16 ç»´çš„å­å‘é‡å¤§æ¦‚åªéœ€è¦ 256 ä¸ªèšç±»ä¸­å¿ƒå°±èƒ½å¾—åˆ°è¿˜ä¸é”™çš„é‡åŒ–ç»“æœï¼Œæ‰€ä»¥å°±å¯ä»¥å°†ç æœ¬çš„å¤§å°ä» 2^64 é™ä½åˆ° 8 * 256 = 2048 ä¸ªèšç±»ä¸­å¿ƒï¼Œä»è€Œé™ä½å†…å­˜å¼€é”€
    - Hierarchical Navigable Small Worlds (HNSW) ç±»ä¼¼ skiplist
        - è¿™ç§æ–¹æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯æ¯æ¬¡å°†å‘é‡åŠ åˆ°æ•°æ®åº“ä¸­çš„æ—¶å€™ï¼Œå°±å…ˆæ‰¾åˆ°ä¸å®ƒæœ€ç›¸é‚»çš„å‘é‡ï¼Œç„¶åå°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªå›¾ã€‚å½“éœ€è¦æœç´¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä»å›¾ä¸­çš„æŸä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œä¸æ–­çš„è¿›è¡Œæœ€ç›¸é‚»æœç´¢å’Œæœ€çŸ­è·¯å¾„è®¡ç®—ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ç›¸ä¼¼çš„å‘é‡ã€‚
        - HNSW ç»§æ‰¿äº†ç›¸åŒçš„åˆ†å±‚æ ¼å¼ï¼Œæœ€é«˜å±‚å…·æœ‰æ›´é•¿çš„è¾¹ç¼˜ï¼ˆç”¨äºå¿«é€Ÿæœç´¢ï¼‰ï¼Œè€Œè¾ƒä½å±‚å…·æœ‰è¾ƒçŸ­çš„è¾¹ç¼˜ï¼ˆç”¨äºå‡†ç¡®æœç´¢ï¼‰
    - ç›¸ä¼¼æ€§æµ‹é‡ (Similarity Measurement)
        - æ¬§å‡ é‡Œå¾—è·ç¦»ï¼ˆEuclidean Distanceï¼‰
            - æ¬§å‡ é‡Œå¾—è·ç¦»ç®—æ³•çš„ä¼˜ç‚¹æ˜¯å¯ä»¥åæ˜ å‘é‡çš„ç»å¯¹è·ç¦»ï¼Œé€‚ç”¨äºéœ€è¦è€ƒè™‘å‘é‡é•¿åº¦çš„ç›¸ä¼¼æ€§è®¡ç®—ã€‚
            - ä¾‹å¦‚æ¨èç³»ç»Ÿä¸­ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·çš„å†å²è¡Œä¸ºæ¥æ¨èç›¸ä¼¼çš„å•†å“ï¼Œè¿™æ—¶å°±éœ€è¦è€ƒè™‘ç”¨æˆ·çš„å†å²è¡Œä¸ºçš„æ•°é‡ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”¨æˆ·çš„å†å²è¡Œä¸ºçš„ç›¸ä¼¼åº¦
        - ä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆCosine Similarityï¼‰
            - ä½™å¼¦ç›¸ä¼¼åº¦æ˜¯æŒ‡ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ä½™å¼¦å€¼
            - ä½™å¼¦ç›¸ä¼¼åº¦ç®—æ³•çš„ä¼˜ç‚¹æ˜¯å¯ä»¥åæ˜ å‘é‡çš„æ–¹å‘ï¼Œé€‚ç”¨äºä¸éœ€è¦è€ƒè™‘å‘é‡é•¿åº¦çš„ç›¸ä¼¼æ€§è®¡ç®—ã€‚å› æ­¤é€‚ç”¨äºé«˜ç»´å‘é‡çš„ç›¸ä¼¼æ€§è®¡ç®—ã€‚ä¾‹å¦‚è¯­ä¹‰æœç´¢å’Œæ–‡æ¡£åˆ†ç±»ã€‚
        - ç‚¹ç§¯ç›¸ä¼¼åº¦ (Dot product Similarity)
            - ç‚¹ç§¯ç›¸ä¼¼åº¦æ˜¯æŒ‡ä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå‘é‡å¯¹åº”ä½ç½®çš„å…ƒç´ ç›¸ä¹˜ä¹‹åå†æ±‚å’Œã€‚ç‚¹ç§¯ç›¸ä¼¼åº¦ç®—æ³•çš„ä¼˜ç‚¹æ˜¯å¯ä»¥åæ˜ å‘é‡çš„ç»å¯¹è·ç¦»å’Œæ–¹å‘ï¼Œé€‚ç”¨äºéœ€è¦è€ƒè™‘å‘é‡é•¿åº¦çš„ç›¸ä¼¼æ€§è®¡ç®—ã€‚ä¾‹å¦‚æ¨èç³»ç»Ÿä¸­ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·çš„å†å²è¡Œä¸ºæ¥æ¨èç›¸ä¼¼çš„å•†å“ï¼Œè¿™æ—¶å°±éœ€è¦è€ƒè™‘ç”¨æˆ·çš„å†å²è¡Œä¸ºçš„æ•°é‡ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”¨æˆ·çš„å†å²è¡Œä¸ºçš„ç›¸ä¼¼åº¦ã€‚
            - ç‚¹ç§¯ç›¸ä¼¼åº¦ç®—æ³•çš„ç¼ºç‚¹æ˜¯éœ€è¦å¯¹å‘é‡è¿›è¡Œå½’ä¸€åŒ–ï¼Œå¦åˆ™ä¼šå—åˆ°å‘é‡é•¿åº¦çš„å½±å“ã€‚ä¾‹å¦‚åœ¨æ¨èç³»ç»Ÿä¸­ï¼Œå¦‚æœç”¨æˆ·çš„å†å²è¡Œä¸ºæ•°é‡å¾ˆå¤šï¼Œé‚£ä¹ˆç”¨æˆ·çš„å†å²è¡Œä¸ºå‘é‡çš„é•¿åº¦å°±ä¼šå¾ˆå¤§ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç‚¹ç§¯ç›¸ä¼¼åº¦ç®—æ³•çš„ç»“æœåå‘äºå†å²è¡Œä¸ºæ•°é‡è¾ƒå°‘çš„ç”¨æˆ·ã€‚
            - ç‚¹ç§¯ç›¸ä¼¼åº¦ç®—æ³•çš„ä¼˜ç‚¹åœ¨äºå®ƒç®€å•æ˜“æ‡‚ï¼Œè®¡ç®—é€Ÿåº¦å¿«ï¼Œå¹¶ä¸”å…¼é¡¾äº†å‘é‡çš„é•¿åº¦å’Œæ–¹å‘ã€‚å®ƒé€‚ç”¨äºè®¸å¤šå®é™…åœºæ™¯ï¼Œä¾‹å¦‚å›¾åƒè¯†åˆ«ã€è¯­ä¹‰æœç´¢å’Œæ–‡æ¡£åˆ†ç±»ç­‰ã€‚ä½†ç‚¹ç§¯ç›¸ä¼¼åº¦ç®—æ³•å¯¹å‘é‡çš„é•¿åº¦æ•æ„Ÿï¼Œå› æ­¤åœ¨è®¡ç®—é«˜ç»´å‘é‡çš„ç›¸ä¼¼æ€§æ—¶å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚
    - è¿‡æ»¤ (Filtering)
        - åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾€å¾€ä¸éœ€è¦åœ¨æ•´ä¸ªå‘é‡æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼æ€§æœç´¢ï¼Œè€Œæ˜¯é€šè¿‡éƒ¨åˆ†çš„ä¸šåŠ¡å­—æ®µè¿›è¡Œè¿‡æ»¤å†è¿›è¡ŒæŸ¥è¯¢ã€‚æ‰€ä»¥å­˜å‚¨åœ¨æ•°æ®åº“çš„å‘é‡å¾€å¾€è¿˜éœ€è¦åŒ…å«å…ƒæ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ· IDã€æ–‡æ¡£ ID ç­‰ä¿¡æ¯ã€‚è¿™æ ·å°±å¯ä»¥åœ¨æœç´¢çš„æ—¶å€™ï¼Œæ ¹æ®å…ƒæ•°æ®æ¥è¿‡æ»¤æœç´¢ç»“æœï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚
        - ä¸ºæ­¤ï¼Œå‘é‡æ•°æ®åº“é€šå¸¸ç»´æŠ¤ä¸¤ä¸ªç´¢å¼•ï¼šä¸€ä¸ªæ˜¯å‘é‡ç´¢å¼•ï¼Œå¦ä¸€ä¸ªæ˜¯å…ƒæ•°æ®ç´¢å¼•ã€‚ç„¶åï¼Œåœ¨è¿›è¡Œç›¸ä¼¼æ€§æœç´¢æœ¬èº«ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œå…ƒæ•°æ®è¿‡æ»¤ï¼Œä½†æ— è®ºå“ªç§æƒ…å†µä¸‹ï¼Œéƒ½å­˜åœ¨å¯¼è‡´æŸ¥è¯¢è¿‡ç¨‹å˜æ…¢çš„å›°éš¾ã€‚
        - Pre-filteringï¼šåœ¨å‘é‡æœç´¢ä¹‹å‰è¿›è¡Œå…ƒæ•°æ®è¿‡æ»¤ã€‚è™½ç„¶è¿™å¯ä»¥å¸®åŠ©å‡å°‘æœç´¢ç©ºé—´ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´ç³»ç»Ÿå¿½ç•¥ä¸å…ƒæ•°æ®ç­›é€‰æ ‡å‡†ä¸åŒ¹é…çš„ç›¸å…³ç»“æœã€‚
        - Post-filteringï¼šåœ¨å‘é‡æœç´¢å®Œæˆåè¿›è¡Œå…ƒæ•°æ®è¿‡æ»¤ã€‚è¿™å¯ä»¥ç¡®ä¿è€ƒè™‘æ‰€æœ‰ç›¸å…³ç»“æœï¼Œåœ¨æœç´¢å®Œæˆåå°†ä¸ç›¸å…³çš„ç»“æœè¿›è¡Œç­›é€‰ã€‚
    - https://guangzhengli.com/blog/zh/vector-database/
- [å‘é‡æ£€ç´¢æŠ€æœ¯](https://mp.weixin.qq.com/s/705usxBUmLcZL3rrB4Du9A)
  - å®šä¹‰
    - å‘é‡æ£€ç´¢ä¸»è¦æ˜¯åšä¸€ä¸ª K Nearest Neighbors (Kæœ€è¿‘é‚»ï¼Œç®€ç§° KNN) è®¡ç®—ï¼Œç›®æ ‡æ˜¯åœ¨Nä¸ªDç»´çš„å‘é‡çš„åº“ä¸­æ‰¾æœ€ç›¸ä¼¼çš„kä¸ªç»“æœ
    - KNN è®¡ç®—é€šå¸¸ä»£ä»·æ¯”è¾ƒå¤§ï¼Œå¾ˆéš¾åœ¨è¾ƒçŸ­æ—¶é—´å†…è¿”å›ç»“æœï¼Œæ­¤å¤–ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ï¼Œç”¨æˆ·å¹¶ä¸éœ€è¦ç»å¯¹ç²¾ç¡®çš„ç›¸ä¼¼ç»“æœ
    - é€šå¸¸ä¼šä½¿ç”¨ç›¸ä¼¼æœ€è¿‘é‚»æœç´¢ï¼Œå³ ANN çš„æ–¹å¼æ¥æ›¿ä»£ KNNï¼Œä»kä¸ªç»å¯¹æœ€è¿‘ä¼¼ç»“æœå˜æˆkä¸ªè¿‘ä¼¼æœ€ä¼˜ç»“æœï¼Œä»¥ç‰ºç‰²ä¸€å®šå‡†ç¡®åº¦çš„å‰æï¼Œå¾—åˆ°æ›´çŸ­çš„å“åº”æ—¶é—´ã€‚
  - å‘é‡æ£€ç´¢çš„å››ç§ç®—æ³•
    - Table-basedï¼Œå…¸å‹ç®—æ³•å¦‚ LSH
    - Tree-basedï¼Œæ˜¯æŠŠå‘é‡æ ¹æ®ç›¸ä¼¼åº¦å»æ„é€ æˆä¸€ä¸ªæ ‘çš„ç»“æ„
    - Cluster-basedï¼Œä¹Ÿç§°ä¸º IVFï¼ˆInverted Fileï¼‰ï¼ŒæŠŠå‘é‡å…ˆè¿›è¡Œèšç±»å¤„ç†ï¼Œæ£€ç´¢æ—¶é¦–å…ˆè®¡ç®—å‡ºæœ€è¿‘çš„ k ä¸ªèšç±»ä¸­å¿ƒï¼Œå†åœ¨è¿™äº›èšç±»ä¸­å¿ƒä¸­è®¡ç®—å‡ºæœ€è¿‘çš„ k ä¸ªå‘é‡
    - Graph-basedï¼Œ æŠŠå‘é‡æŒ‰ç…§ç›¸ä¼¼åº¦æ„å»ºæˆä¸€ä¸ªå›¾ç»“æ„ï¼Œæ£€ç´¢å˜æˆä¸€ä¸ªå›¾éå†çš„è¿‡ç¨‹ã€‚å¸¸ç”¨ç®—æ³•æ˜¯HNSW
  - [Vector Search Explained](https://weaviate.io/blog/vector-search-explained)
    - Vector search is a technique for finding and retrieving similar items in large datasets by comparing their vector representations, which are numerical encodings of their features
    - distance metrics, like cosine similarity and Euclidean distance (L2 distance).
    - Approximate nearest neighbors (ANN)
      - trees â€“ e.g. ANNOY (Figure 3),
      - proximity graphs - e.g. HNSW (Figure 4),
      - HNSW ä¸‰å‰‘å®¢ï¼š
        - mï¼šæ¯æœ¬ä¹¦çš„â€œç›´æ¥å¥½å‹â€æ•°é‡ï¼ˆå½±å“ç²¾åº¦ & ç›®å½•å¤§å°ï¼‰ã€‚
        - ef_constructï¼šå»ºç›®å½•æ—¶è€ƒè™‘å¤šå°‘â€œé‚»å±…â€ï¼ˆå½±å“ç›®å½•è´¨é‡ & æ„å»ºé€Ÿåº¦ï¼‰ã€‚
        - efï¼šæ‰¾ä¹¦æ—¶çœ‹å¤šå°‘â€œé‚»å±…â€ï¼ˆå½±å“æœç´¢ç²¾åº¦ & é€Ÿåº¦ï¼‰ã€‚
      - clustering - e.g. FAISS,
      - hashing - e.g. LSH
    - Vector indexing libraries such as FAISS, Annoy, and ScaNN
  - [Vector Search Resource Optimization Guide](https://qdrant.tech/articles/vector-search-resource-optimization/#)
    -  Overview
      - High Search Precision + Low Memory Expenditure :	On-Disk Indexing
      - Low Memory Expenditure + Fast Search Speed :	Quantization
      - High Search Precision + Fast Search Speed :	RAM Storage + Quantization
      - Balance Latency vs Throughput : 	Segment Configuration
    - Scalar Quantization
      - Qdrant compresses 32-bit floating-point values (float32) into 8-bit unsigned integers (uint8), slashing memory usage by an impressive 75%
    - Binary Quantization
      - Binary quantization takes scalar quantization to the next level by compressing each vector component into just a single bit.
    - Summary
      - ğ—•ğ—¶ğ—»ğ—®ğ—¿ğ˜† ğ—¤ğ˜‚ğ—®ğ—»ğ˜ğ—¶ğ˜‡ğ—®ğ˜ğ—¶ğ—¼ğ—» (ğ—•ğ—¤)
        - â€¢ Compresses each dimension to just 1 bit (positive/negative)
        - â€¢ Memory reduction: 97%
        - â€¢ Speed: 3-4x faster than uncompressed vectors due to bitwise operations
        - â€¢ Perfect for high-volume, approximate searches
      - ğŸ®. ğ—£ğ—¿ğ—¼ğ—±ğ˜‚ğ—°ğ˜ ğ—¤ğ˜‚ğ—®ğ—»ğ˜ğ—¶ğ˜‡ğ—®ğ˜ğ—¶ğ—¼ğ—» (ğ—£ğ—¤)
        - â€¢ Breaks vectors into segments and quantizes each independently
        - â€¢ Memory reduction: 85%
        - â€¢ Requires a training step to calculate centroids
        - â€¢ Trade-off: Better accuracy than BQ, approaches uncompressed performance at 97%+ recall
      - ğŸ¯. ğ—¦ğ—°ğ—®ğ—¹ğ—®ğ—¿ ğ—¤ğ˜‚ğ—®ğ—»ğ˜ğ—¶ğ˜‡ğ—®ğ˜ğ—¶ğ—¼ğ—» (ğ—¦ğ—¤)
        - â€¢ Maps dimension values into 256 buckets (8 bits)
        - â€¢ Memory reduction: 75%
        - â€¢ More accurate than BQ while still offering significant compression
        - â€¢ Trade-off: Sweet spot between compression and accuracy
      - ğŸ°. ğ—¥ğ—¼ğ˜ğ—®ğ˜ğ—¶ğ—¼ğ—»ğ—®ğ—¹ ğ—¤ğ˜‚ğ—®ğ—»ğ˜ğ—¶ğ˜‡ğ—®ğ˜ğ—¶ğ—¼ğ—»
        - â€¢ Another compression technique available in modern vector databases
          - Rotate the vector by multiplying it with a rotation matrix, which is a random orthogonal matrix.
            - This step works to distribute the amount of meaningful information across all dimensions of the vector, allowing for full use of each dimension.
          - Quantize the rotated vector by reducing the number of bits used to represent each dimension of the vector.
            - This step is similar to traditional scalar quantization, but it is applied to the rotated vector.
        - â€¢ Memory reduction: 75%
        - â€¢ Focuses on preserving angular relationships between vectors
- [å‘é‡æ•°æ®åº“](https://mp.weixin.qq.com/s/UCgJi7MfAnn8tAPvL3sldQ)
  - å‘é‡æ£€ç´¢ç®—æ³•
    - åŸºäºæ ‘çš„æ–¹æ³•ï¼Œä¾‹å¦‚KDTreeå’ŒAnnoy
    - åŸºäºå›¾çš„æ–¹æ³•ï¼Œä¾‹å¦‚HNSW
    - åŸºäºä¹˜ç§¯é‡åŒ–çš„æ–¹æ³•ï¼Œä¾‹å¦‚SQå’ŒPQ
    - åŸºäºå“ˆå¸Œçš„æ–¹æ³•ï¼Œä¾‹å¦‚LSH
    - åŸºäºå€’æ’ç´¢å¼•çš„æ–¹æ³•
    - åŸºäºèšç±» IVF
  - æ•°æ®å‹ç¼©æ–¹å¼å»ºç«‹ç´¢å¼•, ä¸»è¦åŒ…æ‹¬å¹³å¦å‹ç¼©å’Œé‡åŒ–å‹ç¼©
    - å¹³å¦å‹ç¼©æ˜¯æŒ‡ä»¥æœªç»ä¿®æ”¹çš„å½¢å¼å­˜å‚¨å‘é‡çš„ç´¢å¼•ï¼Œ
    - é‡åŒ–ä¸­ç´¢å¼•çš„åº•å±‚å‘é‡è¢«åˆ†è§£æˆç”±è¾ƒå°‘å­—èŠ‚ç»„æˆçš„å—ï¼ˆé€šå¸¸é€šè¿‡å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼‰ä»¥å‡å°‘å†…å­˜æ¶ˆè€—å’Œæœç´¢è¿‡ç¨‹ä¸­çš„è®¡ç®—æˆæœ¬ã€‚
  - Milvus
    - mmapåŠŸèƒ½åœ¨collection.loadçš„æ—¶å€™ä¼šæŠŠs3ä¸Šçš„æ•°æ®æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥é¦–å…ˆæœ¬åœ°ç¡¬ç›˜å¾—æœ‰åŒç­‰å¤§å°ã€‚ç„¶åå†…å­˜è¿˜æ˜¯è¦çš„ï¼Œæœ€å¥½èƒ½è¾¾åˆ°æ•°æ®é‡çš„1/4ä»¥ä¸Šã€‚
    - ç„¶åå¦‚æœä½ ç”¨çš„æ˜¯hnswç´¢å¼•ï¼Œæ€§èƒ½å¯èƒ½ä¼šæ¯”çº¯å†…å­˜æ…¢ä¸€åˆ°ä¸¤å€è¿™æ ·ã€‚å¦‚æœç”¨çš„ivfç´¢å¼•ï¼Œæ€§èƒ½ä¼šæ¯”çº¯å†…å­˜æ…¢ä¸€åˆ°ä¸¤ä¸ªæ•°é‡çº§
- [Milvus]
  - ![img.png](vector_db_milvus_overview.png)
    - æ¥å…¥å±‚ï¼ˆAccess Layerï¼‰ï¼šç³»ç»Ÿçš„é—¨é¢ï¼Œç”±ä¸€ç»„æ— çŠ¶æ€ proxy ç»„æˆã€‚å¯¹å¤–æä¾›ç”¨æˆ·è¿æ¥çš„ endpointï¼Œè´Ÿè´£éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚å¹¶åˆå¹¶è¿”å›ç»“æœã€‚
    - åè°ƒæœåŠ¡ï¼ˆCoordinator Serviceï¼‰ï¼šç³»ç»Ÿçš„å¤§è„‘ï¼Œè´Ÿè´£åˆ†é…ä»»åŠ¡ç»™æ‰§è¡ŒèŠ‚ç‚¹ã€‚åè°ƒæœåŠ¡å…±æœ‰å››ç§è§’è‰²ï¼Œåˆ†åˆ«ä¸º root coordã€data coordã€query coord å’Œ index coordã€‚
    - æ‰§è¡ŒèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰ï¼šç³»ç»Ÿçš„å››è‚¢ï¼Œè´Ÿè´£å®Œæˆåè°ƒæœåŠ¡ä¸‹å‘çš„æŒ‡ä»¤å’Œ proxy å‘èµ·çš„æ•°æ®æ“ä½œè¯­è¨€ï¼ˆDMLï¼‰å‘½ä»¤ã€‚æ‰§è¡ŒèŠ‚ç‚¹åˆ†ä¸ºä¸‰ç§è§’è‰²ï¼Œåˆ†åˆ«ä¸º data nodeã€query node å’Œ index nodeã€‚
    - å­˜å‚¨æœåŠ¡ ï¼ˆStorageï¼‰ï¼šç³»ç»Ÿçš„éª¨éª¼ï¼Œè´Ÿè´£ Milvus æ•°æ®çš„æŒä¹…åŒ–ï¼Œåˆ†ä¸ºå…ƒæ•°æ®å­˜å‚¨ï¼ˆmeta storeï¼‰ã€æ¶ˆæ¯å­˜å‚¨ï¼ˆlog brokerï¼‰å’Œå¯¹è±¡å­˜å‚¨ï¼ˆobject storageï¼‰ä¸‰ä¸ªéƒ¨åˆ†
      - å…ƒæ•°æ®å­˜å‚¨ï¼šä½¿ç”¨ etcd ä½œä¸ºå®ç°ï¼Œä¸»è¦è´Ÿè´£å­˜å‚¨ç³»ç»Ÿè¿è¡Œæ‰€å¿…éœ€çš„å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚é›†åˆçš„ schema å®šä¹‰ã€ç³»ç»ŸèŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯ä»¥åŠæ¶ˆæ¯æ¶ˆè´¹çš„ checkpoint çŠ¶æ€ç­‰
      - å¯¹è±¡å­˜å‚¨ï¼šé‡‡ç”¨ MinIO ä½œä¸ºé»˜è®¤æ–¹æ¡ˆï¼Œå¹¶å…¼å®¹ AWS S3 å’Œ Azure Blob ç­‰äº‘å­˜å‚¨æœåŠ¡ï¼Œç”¨äºå­˜æ”¾æ—¥å¿—å¿«ç…§ã€ç´¢å¼•æ–‡ä»¶åŠæŸ¥è¯¢è¿‡ç¨‹ä¸­çš„ä¸´æ—¶ç»“æœ
      - æ¶ˆæ¯å­˜å‚¨ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­é‡‡ç”¨ Pulsarï¼Œåœ¨å•æœºç‰ˆæœ¬ä¸­ä½¿ç”¨ RocksDBï¼Œä½œä¸ºæ•°æ®æµå¼å¤„ç†ä¸æŒä¹…åŒ–çš„åŸºçŸ³ã€‚
    - Milvus çš„è®¾è®¡å“²å­¦å›´ç»•æ—¥å¿—å³æ•°æ®çš„åŸåˆ™ï¼Œæ‘’å¼ƒäº†ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ç‰©ç†è¡¨ç»“æ„ï¼Œè½¬è€Œåˆ©ç”¨æ—¥å¿—çš„å‘å¸ƒè®¢é˜…æœºåˆ¶æ¥è§£è€¦æ•°æ®çš„è¯»å†™æ“ä½œï¼Œå®ç°äº†ç³»ç»Ÿçš„é«˜åº¦å¯æ‰©å±•æ€§å’Œçµæ´»æ€§
    - [Segment](https://mp.weixin.qq.com/s/6TPJwoSbLio3Dai7YizGpg)
      - Think of segments as being in the intersection of shards and partitions. By design, segments cannot cross shard or partition boundaries
      - Segments are the smallest unit in Milvus for load balancing. Indexes built on separate data segments donâ€™t depend on each other
      - Indexes are typically built only on sealed segments, posing challenges when dealing with rapidly changing data like user clicks on a shopping site
      - æ•°æ®å†™å…¥ï¼šInsert è¯·æ±‚å¦‚ä½•æ‹†è§£ä¸º Segment
        - proxy ä¼šæŒ‰ç…§ shards_num å¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œå¹¶å°†å…¶å‘é€åˆ°æ¶ˆæ¯ç®¡é“ ï¼Œç„¶ådata nodeä»æ¶ˆæ¯ç®¡é“ä¸­å¼‚æ­¥æ¥æ”¶æ•°æ®
        - åœ¨ data node ç«¯ï¼Œæ¯ä¸ªpartitionä¸­çš„æ¯ä¸ª shard éƒ½ä¼šå¯¹åº”ä¸€ä¸ª growing segmentã€‚data node ä¸ºæ¯ä¸ª growing segment ç»´æŠ¤ä¸€ä¸ªç¼“å­˜ï¼Œç”¨äºå­˜æ”¾å°šæœªè½ç›˜çš„æ•°æ®
      - Growing Segment å¦‚ä½•æŒä¹…åŒ–
        - å„ä¸ª shard çš„æ•°æ®ä¼šè¢«ç´¯ç§¯åœ¨å¯¹åº” growing segment çš„ç¼“å­˜é‡Œã€‚è¯¥ç¼“å­˜çš„æœ€å¤§å®¹é‡ç”± milvus.yaml ä¸­ dataNode.segment.insertBufSize æ§åˆ¶ï¼Œé»˜è®¤å€¼ä¸º 16MB
        - ä¸€æ—¦ç¼“å­˜ä¸­æ•°æ®è¶…è¿‡æ­¤é˜ˆå€¼ï¼Œdata node å°±ä¼šå°†è¿™éƒ¨åˆ†æ•°æ®å†™å…¥ S3/MinIOï¼Œå½¢æˆä¸€ä¸ª Chunk, Chunk æŒ‡çš„æ˜¯ segment ä¸­çš„ä¸€å°æ®µæ•°æ®ï¼Œå¹¶ä¸”æ¯ä¸ªå­—æ®µçš„æ•°æ®ä¹Ÿä¼šè¢«åˆ†åˆ«å†™å…¥ç‹¬ç«‹çš„æ–‡ä»¶ã€‚å› æ­¤ï¼Œæ¯ä¸ª Chunk é€šå¸¸åŒ…å«å¤šä¸ªæ–‡ä»¶
        - dataNode.segment.syncPeriodï¼ˆé»˜è®¤ 600 ç§’ï¼‰å®šä¹‰äº†æ•°æ®åœ¨ç¼“å­˜ä¸­å…è®¸åœç•™çš„æœ€é•¿æ—¶é—´ã€‚å¦‚æœåœ¨ 10 åˆ†é’Ÿå†…ç¼“å­˜æ•°æ®å°šæœªè¾¾åˆ° insertBufSize çš„ä¸Šé™ï¼Œdata node åŒæ ·ä¼šå°†ç¼“å­˜å†™å…¥ S3/MinIOã€‚
        - å½“æŸä¸ª growing segment ç´¯è®¡å†™å…¥é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼åï¼Œdata node ä¼šå°†å…¶è½¬æ¢ä¸º sealed segmentï¼Œå¹¶æ–°å»ºä¸€ä¸ªæ–°çš„ growing segment æ¥ç»§ç»­æ¥æ”¶ shard æ•°æ®ã€‚
          - è¿™ä¸ªé˜ˆå€¼ç”± dataCoord.segment.maxSizeï¼ˆé»˜è®¤ 1024MBï¼‰å’Œ dataCoord.segment.sealProportionï¼ˆé»˜è®¤ 0.12ï¼‰å…±åŒå†³å®š
        - å¦‚æœç”¨æˆ·é€šè¿‡ Milvus SDK è°ƒç”¨ flush æ¥å£ï¼Œåˆ™ä¼šå¼ºåˆ¶å°†æŒ‡å®š Collection çš„æ‰€æœ‰ growing segment ç¼“å­˜è½ç›˜å¹¶è½¬ä¸º sealed segment
        - é¢‘ç¹è°ƒç”¨ flush() å®¹æ˜“äº§ç”Ÿå¤§é‡ä½“é‡è¾ƒå°çš„ sealed segmentï¼Œè¿›è€Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚
      - Segment åˆå¹¶ä¼˜åŒ–ï¼šCompaction çš„ä¸‰ç§åœºæ™¯
        - data node ä¼šé€šè¿‡ compaction å°†è‹¥å¹²è¾ƒå°çš„ sealed segment åˆå¹¶æˆæ›´å¤§çš„ sealed segmentã€‚åˆå¹¶åå½¢æˆçš„ segment å¤§å°ä¼šå°½é‡æ¥è¿‘ dataCoord.segment.maxSizeï¼ˆé»˜è®¤ 1GBï¼‰
        - å°æ–‡ä»¶åˆå¹¶ï¼ˆç³»ç»Ÿè‡ªåŠ¨ å­˜åœ¨å¤šä¸ªä½“ç§¯è¾ƒå°çš„ sealed segmentï¼Œå…¶æ€»å¤§å°æ¥è¿‘ 1GB
        - åˆ é™¤æ•°æ®æ¸…ç†ï¼ˆç³»ç»Ÿè‡ªåŠ¨ï¼‰ segment ä¸­çš„è¢«åˆ é™¤æ•°æ®å æ¯” â‰¥ dataCoord.compaction.single.ratio.thresholdï¼ˆé»˜è®¤ 20%ï¼‰
        - æŒ‰èšç±»é”®ï¼ˆClustering Keyï¼‰é‡ç»„ï¼ˆæ‰‹åŠ¨è§¦å‘ï¼‰ SDK è°ƒç”¨ compact()ï¼Œå¹¶æŒ‰ç…§æŒ‡å®šçš„ Clustering Key å¯¹ Segment è¿›è¡Œé‡ç»„ã€‚
      - ä¸´æ—¶ç´¢å¼• vs æŒä¹…åŒ–ç´¢å¼•
        - å¯¹äºæ¯ä¸ª growing segmentï¼Œquery node ä¼šåœ¨å†…å­˜ä¸­ä¸ºå…¶å»ºç«‹ä¸´æ—¶ç´¢å¼•; å½“ query node åŠ è½½æœªå»ºç«‹ç´¢å¼•çš„ sealed segment æ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºä¸´æ—¶ç´¢å¼•
        - å½“ data coordinator ç›‘æµ‹åˆ°æ–°çš„ sealed segment ç”Ÿæˆåï¼Œä¼šæŒ‡ç¤º index node ä¸ºå…¶æ„å»ºå¹¶æŒä¹…åŒ–ç´¢å¼•
          - å¦‚æœè¯¥ sealed segment çš„æ•°æ®é‡å°äº indexCoord.segment.minSegmentNumRowsToEnableIndexï¼ˆé»˜è®¤ 1024 è¡Œï¼‰ï¼Œindex node å°†ä¸ä¼šä¸ºå…¶åˆ›å»ºç´¢å¼•ã€‚
      - Segment åŠ è½½ï¼šQuery Node å¦‚ä½•ç®¡ç†æ•°æ®ï¼Ÿ
        - å½“ç”¨æˆ·è°ƒç”¨ load_collection æ—¶ï¼š
          - (1)Query node ä¼šä» S3/MinIO åŠ è½½è¯¥ Collection çš„æ‰€æœ‰ sealed segmentï¼Œå¹¶è®¢é˜…ç›¸åº”çš„ shard æµæ•°æ®ã€‚
          - (2)ç³»ç»ŸåŠ›æ±‚å°†å¤šä¸ª shard åˆ†é…ç»™ä¸åŒçš„ query node ä»¥å®ç°è´Ÿè½½å‡è¡¡ï¼›å¦‚æœåªæœ‰ä¸€ä¸ª query nodeï¼Œåˆ™è¯¥èŠ‚ç‚¹è®¢é˜…å…¨éƒ¨ shardã€‚
          - å¯¹äºæ¯ä¸ª shardï¼Œquery node ä¼šåŒæ ·åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå¯¹åº”çš„ growing segmentï¼Œä¿è¯ä¸ data node ä¸Šçš„æ•°æ®ä¿æŒä¸€è‡´ã€‚
          - å¯¹äºå·²æ„å»ºå¥½æŒä¹…åŒ–ç´¢å¼•çš„ sealed segmentï¼Œquery node ä¼šä» S3/MinIO ä¸­åŠ è½½å…¶ç´¢å¼•æ–‡ä»¶ã€‚
      - Sharding - for distributed data writing https://zilliz.com/blog/sharding-partitioning-segments-get-most-from-your-database
        - ç™¾ä¸‡è¡Œçº§åˆ«æ•°æ®é‡å»ºè®®è®¾ç½® shards_num=1ï¼Œåƒä¸‡è¡Œçº§åˆ«æ•°æ®é‡å»ºè®®è®¾ç½® shards_num=2ï¼Œäº¿çº§åˆ«ä»¥ä¸Šæ•°æ®é‡å»ºè®®è®¾ç½® shards_num=4 æˆ– 8
        - In distributed data writes, a shard refers to a horizontal data partition in a database. 
        - Think of it like dividing a book into chapters, where each chapter resides on a separate server, and each chapter can be written concurrently.
        -  For faster writes:
          - Increase the number of shards, but not too much
          - Increase the number of data nodes if flush takes too long.
          - Add proxy servers if the network is the bottleneck
      - Partitioning - for targeted data reading
        - Imagine a book with chapters and a reader interested in a specific subject. They will read through the book based on specific criteria, akin to using a database key.
        - For targeted reading:
          - Automatic Partitioning with metadata filters if desired
          - Multi-tenancy manual use case: `tenant_id` as the partition key
            - this is just logical isolation, not real RBAC, which is defined at the collection level
  - indexnodeï¼Œæ¯ä¸ªquerynodeï¼Œæ¯ä¸ªdatanodeéƒ½æ˜¯å•ç‹¬çš„å®¹å™¨
    - indexnodeåªè´Ÿè´£å»ºç´¢å¼•ä»»åŠ¡ï¼Œquerynodeåªè´Ÿè´£æŸ¥è¯¢ä»»åŠ¡ï¼Œdatanodeåªè´Ÿè´£æ•°æ®çš„æŒä¹…åŒ–å’Œæ•´ç†ä»»åŠ¡ã€‚indexnodeå»ºç´¢å¼•æ—¶æ€»æ˜¯ä¼šå°½é‡ç”¨æ»¡cpuï¼Œä»¥æœ€å¿«é€Ÿåº¦å»ºå¥½ç´¢å¼•
      - querynodeè´Ÿè´£æœç´¢ä»»åŠ¡ï¼Œè¦æŠŠæ•´ä¸ªè¡¨çš„ç´¢å¼•éƒ½åŠ è½½åˆ°è‡ªå·±çš„å†…å­˜é‡Œã€‚
      - indexnodeåªè´Ÿè´£å»ºç´¢å¼•ä»»åŠ¡ï¼Œä½ å¯ä»¥ç†è§£ä¸ºå®ƒç»™segmentä¸€ä¸ªä¸€ä¸ªåœ°å»ºç´¢å¼•ï¼ŒåŠ è½½ä¸€ä¸ªsegmentçš„å‘é‡è¿›è‡ªå·±å†…å­˜ï¼Œå»ºå¥½ç´¢å¼•åé‡Šæ”¾å†…å­˜ï¼Œå†ä¸ºä¸‹ä¸€ä¸ªsegmentå»ºç´¢å¼•ã€‚
      - datanodeä¸»è¦è´Ÿè´£segmentçš„è½ç›˜ï¼Œå’Œåˆå¹¶ã€‚åˆå¹¶çš„æ—¶å€™ä¼šæŠŠå‡ ä¸ªå°çš„segmentæ•°æ®åŠ è½½è¿›è‡ªå·±å†…å­˜ï¼Œç„¶ååˆæˆä¸€ä¸ªå¤§çš„è½ç›˜ï¼Œç„¶åé‡Šæ”¾å†…å­˜ã€‚
    - loadçš„æ—¶å€™ï¼Œæ•°æ®ä¼šloadåˆ°querynodeèŠ‚ç‚¹ä¸Š
    - ä¸€ä¸ªquerynodeèŠ‚ç‚¹searchæ—¶å¯ä»¥ç”¨å¤šå¼ gpuå¡åŒæ—¶ç®—ã€‚ä½†å»ºç´¢å¼•çš„ä»»åŠ¡ï¼Œä¸€ä¸ªindexnodeé»˜è®¤æ˜¯ä¸€ä¸ªä»»åŠ¡ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œæ‰€ä»¥åªç”¨åˆ°ä¸€å¼ æ˜¾å¡
  - Deployment
    - standaloneæ˜¯å†…ç½®çš„rocksdbå®ç°message queueï¼Œ
    - clusteræ˜¯ç”¨pulsaræˆ–è€…kafkaæ¥åšä¸ºmessage queueã€‚è€Œcdcæ˜¯é€šè¿‡æ“ä½œkafka/pulsaræ¥åŒæ­¥æ•°æ®çš„ï¼Œæ‰€ä»¥standaloneä¸èƒ½ç”¨
    - deploymentæ¨èçš„resources.limits,indexnodeï¼Œdatanodeçš„å†…å­˜é™åˆ¶ï¼Œrefer https://milvus.io/tools/sizing/
  - Configå‚è€ƒ https://github.com/zilliztech/milvus-helm/blob/master/charts/milvus/values.yaml#L731C7-L731C45
    - [Milvusæ ¸å¿ƒå‚æ•°](https://mp.weixin.qq.com/s/FoyiQCchwY9AkOmi6ElmKA)
    - milvus rpcçš„ä¼ è¾“é™åˆ¶ï¼Œè¿™ä¸ªå¯ä»¥åœ¨milvus.yamlçš„proxy. grpc. serverMaxRecvSize/clientMaxSendSize
    - autoindexæ˜¯å®šä¹‰åœ¨milvus.yamlé‡Œçš„ï¼Œé»˜è®¤å¥½åƒæ˜¯hnswç´¢å¼•ï¼Œæ•°æ®æœ‰100gbçš„è¯ï¼Œç´¢å¼•å°±è¦100gb+çš„å†…å­˜
    - indexbasedCompactionè®¾ä¸ºtrueï¼Œcompactionçš„æ—¶å€™å°±åªé’ˆå¯¹å»ºå¥½ç´¢å¼•çš„åˆ†ç‰‡ï¼Œæ²¡å»ºå¥½ç´¢å¼•çš„åˆ†ç‰‡æ²¡èµ„æ ¼å‚ä¸compaction
    - bloomfiltersizeåº”è¯¥æ˜¯é’ˆå¯¹å•ä¸ªsegmentã€‚é»˜è®¤æ˜¯åä¸‡è¡Œã€‚å°±æ˜¯è¯´å¦‚æœæ¯ä¸ªåˆ†ç‰‡é‡Œçš„è¡Œæ•°æ˜¯åä¸‡è¡Œå·¦å³çš„è¯ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„æ•ˆæœæœ€å¥½æœ€é€‚åˆ
      - milvuså†…éƒ¨ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½æœ‰ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ï¼Œç”¨äºå¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªä¸»é”®æ˜¯å¦å¯èƒ½å­˜åœ¨äºè¯¥åˆ†ç‰‡ä¸­ã€‚bloomfiltersizeç”¨äºæ§åˆ¶å¸ƒéš†è¿‡æ»¤å™¨çš„é€‚ç”¨èŒƒå›´ï¼Œå½±å“å¸ƒéš†è¿‡æ»¤å™¨å™¨çš„æ•ˆæœã€‚
      - å¸ƒéš†è¿‡æ»¤å™¨ä¼šè¢«æŒä¹…åŒ–ï¼Œå‚¨å­˜åœ¨æ¯ä¸ªsegmentçš„stat_logé‡Œ
    - interimindexæ˜¯ç»™growing segmentç”¨çš„ä¸´æ—¶ç´¢å¼•ï¼Œæ˜¯IVF_FLATï¼Œå‚æ•°å®šä¹‰åœ¨milvus.yamlçš„queryNode.segcore.intermindexé‡Œ
    - minSegmentNumRowsToEnableIndexæ˜¯ç»™growing segmentç”¨çš„ï¼Œæ˜¯æŒ‡ä¸€ä¸ªsegmenté‡Œçš„è¡Œæ•°è¾¾åˆ°å¤šå°‘æ‰èƒ½å»ºç´¢å¼•. é»˜è®¤1024
    - dataCoord.segment.maxIdleTmeæ˜¯600ï¼Œä¹Ÿå°±æ˜¯600ç§’ä¹‹åå¼ºåˆ¶æŠŠgrowingè½¬ä¸ºsealed
    - GlobalCompactionIntervalï¼Œè¿™ä¸ªå‚æ•°æ˜¯æ§åˆ¶å®šæœŸè§¦å‘compactionæ£€æŸ¥çš„ï¼Œé»˜è®¤æ˜¯60ç§’
    - TTL
      - ttl feature is more like a async cleanup. if you want to trigger cleanup you will need to run manualy compaction
      - flush operate is needed to ManualCompaction success
    - PVå·ï¼ˆæŸ¥è¯¢èŠ‚ç‚¹å’Œç´¢å¼•èŠ‚ç‚¹æ‰€åœ¨å®¹å™¨ä¸­çš„/var/lib/milvus/dataä½¿ç”¨çš„PVå·ï¼‰æŒ‚è½½åˆ°NVMe SSD ä¸Šå°±å¯ä»¥ã€‚values.yamlä¸­çš„queryNode.disk.enabledå’ŒindexNode.disk.enabledè·ŸqueryNode.enableDiskæ˜¯ä¸€æ ·çš„ä½œç”¨ï¼Œ
      - ç›¸å½“äºæ˜¯åœ¨values.yamlä¸­åŠ äº†è®¾ç½®ç£ç›˜ç´¢å¼•çš„å¿«æ·å…¥å£ï¼Œä½ ç”¨äº†values.yamlé‡Œçš„è¿™ä¸ªé…ç½®ï¼Œå°±ä¸ç”¨milvus.yamlé‡Œçš„é…ç½®äº†
    - [Milvus Kafka Topic å‘½åè§„åˆ™](https://xie.infoq.cn/article/44c20de81d705ec44c857e094)
      - é…ç½®æ–‡ä»¶ä¸­çš„ chanNamePrefix
      - Milvus ä¼šåˆ›å»ºä¸‰ç§ç±»å‹çš„ Topicï¼š
        - Datacoord-timetick-channelâ€”â€”chanNamePrefix.cluster-chanNamePrefix.dataCoordTimeTick
        - Dml channel--chanNamePrefix.cluster-chanNamePrefix.rootCoordDml
        - Delta channel--chanNamePrefix.cluster-chanNamePrefix.rootCoordDelta
      - Milvus utilizes two types of channels, PChannel and VChannel. https://github.com/milvus-io/milvus/discussions/36095
        - Each PChannel corresponds to a topic for log storage --- physical channel
        - Each VChannel corresponds to a shard in a collection ----- virtual channel
        - Multiple vchannels can share one pchannel.
          - A P-channel does not always serve one collection. V-channel is assigned to a P-channel by a runtime balancer.
          - A collection with multiple vchannels, the multiple vchannels could be assigned to multiple pchannels, or assigned to a single P-channel, depending on the runtime balancer.
        - åˆ›å»ºcollectionæ—¶ä¼šæŒ‡å®šåˆ†ç‰‡(shard)æ•°é‡ï¼Œæ¯ä¸ªåˆ†ç‰‡å¯¹åº”ä¸€ä¸ªè™šæ‹Ÿé€šé“(vchannel)
        - Milvusä¼šä¸ºlog brokerä¸­çš„æ¯ä¸ªvchannelåˆ†é…ä¸€ä¸ªç‰©ç†é€šé“(pchannel)
        - ä¸åŒçš„collectionå¯ä»¥å…±äº«ç›¸åŒçš„pchannel,è¿™æ ·å¯ä»¥é€šè¿‡log brokerçš„é«˜å¹¶å‘æé«˜ååé‡
        - å½“collectionåˆ›å»ºæ—¶,ä¸ä»…æŒ‡å®šäº†åˆ†ç‰‡æ•°é‡,åŒæ—¶ä¹Ÿç¡®å®šäº†vchannelå’Œpchannelåœ¨log brokerä¸­çš„æ˜ å°„å…³ç³»
      - Each kafka topic is a "physical channel". The number of physical channels is defined in the milvus.yaml `rootCorrd.dmlChannelNum`
      - By default, milvus creates 16 physical channels during startup
      - ä¿®æ”¹é…ç½®
        - å¦‚æœæ˜¯Docker Composeéƒ¨ç½²ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶ milvus.yamlï¼Œ
        - è‹¥æ˜¯hemléƒ¨ç½²ï¼Œå¯ä»¥helm upgrade my-release milvus/milvus --set queryNode.enableDisk
        - è‹¥æ˜¯ operatoréƒ¨ç½² https://github.com/zilliztech/milvus-operator/blob/main/docs/administration/configure-milvus.md
      - milVuså•æœºé»˜è®¤16ä¸ªchannel(p/væ€»å’Œ)ã€‚
        - ä¸€ä¸ªcollectionä¼šé»˜è®¤æœ‰ä¸¤ä¸ªchannelå¤„ç†TTç­‰æ¶ˆæ¯ï¼Œchannelçš„å€¼æ˜¯2*collectionæ•°é‡ã€‚ collectionè¿‡å¤šï¼Œä¼šå¯¼è‡´å¹¶å‘äº‰16ä¸ªchannelï¼ŒCPUä¼šé£™èµ·æ¥
  - [æŸ¥è¯¢](https://milvus.io/blog/deep-dive-5-real-time-query.md)
    - milvusçš„è°ƒç”¨é¡ºåºå¯ä»¥æ˜¯ï¼šå»ºè¡¨ï¼Œinsertï¼Œå»ºç´¢å¼•ï¼Œloadï¼Œsearch
      - ä¹Ÿå¯ä»¥æ˜¯ï¼šå»ºè¡¨ï¼Œå»ºç´¢å¼•ï¼Œinsertï¼Œloadï¼Œsearch
      - è¿˜å¯ä»¥æ˜¯ï¼šå»ºè¡¨ï¼Œå»ºç´¢å¼•ï¼Œloadï¼Œinsertï¼Œsearch 
      - æ— è®ºä½•ç§é¡ºåºï¼Œå»ºç´¢å¼•å¿…é¡»åœ¨loadä¹‹å‰ï¼Œloadå¿…é¡»åœ¨searchä¹‹å‰
    - milvusæ¯æ¬¡æŸ¥è¯¢æœ€å¤šåªèƒ½è¿”å›16384æ¡ç»“æœï¼Œåˆ†é¡µä¹Ÿè¦éµå¾ªè¿™ä¸ªé™åˆ¶
    - milvus2.3 searchå’Œqueryä¸èµ°æ¶ˆæ¯å­˜å‚¨, ç›´æ¥ç”±proxyå‘é€ç»™query node
      - proxy ä¸­ æŸ¥è¯¢ï¼Œæ¯æ¬¡éƒ½è¦å» rootcoordi è¯·æ±‚ä¸€æ¬¡å—ï¼Ÿåªæœ‰è®¾ç½®strongä¸€è‡´æ€§æ‰ä¼šæ¯æ¬¡è¯·æ±‚rootcoordï¼Œå…¶ä»–ä¸€è‡´æ€§ç­‰çº§éƒ½ä¼šè·³è¿‡
    - å¦‚æœä½ ä¸ç”¨è¿‡æ»¤æŸ¥è¯¢çš„è¯ï¼Œhnswç´¢å¼•ä¼šæ¯”ivf_flatå¿«ã€‚åŠ¨æ€æ•°æ®æ˜¯è¦æ¯”é™æ€æ•°æ®æŸ¥è¯¢æ…¢çš„ã€‚å¯¹äºåŠ¨æ€æ•°æ®ï¼Œå¦‚æœpartitionå¤šçš„è¯ï¼Œæ€§èƒ½ä¼šæ›´å·®ä¸€äº›
    - nlistå–2048æ¯”è¾ƒå¥½ï¼ŒnprobeæŒ‰ä½ ä¹‹å‰çš„æ¯”ä¾‹å–10å·¦å³ã€‚ivfpqï¼Œä¸€äº¿çš„æ•°æ®ï¼Œnlist å¯ä»¥è®¾ç½®æˆå¤šå°‘åˆé€‚ï¼Œ2048å—ï¼Ÿ
      - åœ¨milvusé‡Œï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½æ˜¯ç‹¬ç«‹çš„å†…å­˜ï¼Œæ‰€ä»¥nlistçš„å–å€¼æ˜¯ä»¥æ¯ä¸ªåˆ†ç‰‡æ‰€åŒ…å«çš„è¡Œæ•°æ¥æ¨èã€‚æˆ‘ä»¬æ¨èæ˜¯4*sqrt(æ¯ä¸ªåˆ†ç‰‡é‡Œçš„è¡Œæ•°)ã€‚faisséƒ½æ˜¯æŠŠæ•°æ®æ•´æˆä¸€ä»½ï¼Œæ‰€ä»¥å®ƒé‚£ä¸ªå¾ˆå¤§
      - nlistçš„æ¨èå€¼æ˜¯4*sqrt(n)ï¼Œå…¶ä¸­næ˜¯å•ä¸ªsegmentä¸­çš„æ•°æ®è¡Œæ•°ï¼Œå¦‚æœmilvus.yamlä¸­çš„segment. maxSizeä¸ºé»˜è®¤çš„512MBï¼Œåˆ™nå¯ä»¥ç”¨512MB/(dimension*4Bytes)æ¥è®¡ç®—
      - nlistæ˜¯èšç±»ä¸­å¿ƒçš„æ•°é‡ï¼Œnprobeæ˜¯æœç´¢æ—¶æŸ¥è¯¢çš„èšç±»ä¸­å¿ƒçš„æ•°é‡ã€‚nlistè¶Šå¤§ï¼Œèšç±»ä¸­å¿ƒè¶Šå¤šï¼Œæœç´¢æ—¶éœ€è¦æŸ¥è¯¢çš„èšç±»ä¸­å¿ƒä¹Ÿå°±è¶Šå¤šï¼Œæœç´¢çš„æ—¶é—´ä¹Ÿå°±è¶Šé•¿ã€‚
      - nprobeæ˜¯æœç´¢æ—¶æŸ¥è¯¢çš„èšç±»ä¸­å¿ƒçš„æ•°é‡ï¼Œnprobeè¶Šå¤§ï¼Œæœç´¢çš„æ—¶é—´ä¹Ÿå°±è¶Šé•¿ã€‚nlistå’Œnprobeçš„å–å€¼è¦æ ¹æ®å®é™…æƒ…å†µæ¥è°ƒæ•´ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œnlistå’Œnprobeçš„å–å€¼è¦æ ¹æ®æ•°æ®é‡ã€æ•°æ®ç»´åº¦ã€ç´¢å¼•ç±»å‹ã€æœç´¢å‚æ•°ç­‰å› ç´ æ¥è°ƒæ•´ã€‚
      - nlist å’Œ nprobe éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªsegmenté‡Œçš„æ•°æ®æ¥è¯´çš„ï¼Œè¿™ä¸¤ä¸ªå€¼è°ƒæ§çš„æ˜¯ä¸€ä¸ªsegmenté‡Œé¢å‚ä¸æœç´¢çš„æ•°æ®æ¯”ä¾‹ã€‚nlist æ˜¯æŠŠä¸€ä¸ªsegmenté‡Œçš„æ•°æ®åˆ†æˆå¤šå°‘ä¸ªå †ï¼Œnprobeæ˜¯å†³å®šä»è¿™nlistä¸ªå †é‡Œé€‰å¤šå°‘ä¸ªå‡ºæ¥å‚ä¸æœç´¢è®¡ç®—ã€‚
      - nlistå’ŒnprobeåŒ¹é…ç€ç”¨å°±é—®é¢˜ä¸å¤§ã€‚æ¯”å¦‚nlist=1024 nprobe=128èƒ½æ»¡è¶³ä½ å¯¹äºå¬å›ç‡çš„è¦æ±‚ï¼Œé‚£ä¹ˆæŠŠnlistæ”¹æˆ512åé‡å»ºç´¢å¼•ï¼Œä¹Ÿç›¸åº”åœ°æŠŠnprobe=64ï¼Œé‚£ä¹ˆå¬å›ç‡ä¹Ÿå¤§æ¦‚ç‡èƒ½æ»¡è¶³ä½ å¬å›ç‡çš„è¦æ±‚ã€‚
      - éšç€nlist/nprobeçš„è¾ƒå°ï¼Œå¯¹å¬å›ç‡çš„å½±å“å°±å¼€å§‹è¶Šæ¥è¶Šå¤§ï¼Œæ¯”å¦‚16/2å’Œ8/1ï¼Œè¿™ä¸¤è€…çš„å¬å›ç‡å¯èƒ½å°±å·®æŒºå¤§äº†ã€‚åä¹‹ï¼Œéšç€nlist/nprobeç­‰æ¯”æ”¾å¤§ï¼Œä¸¤ç»„å¬å›ç‡å·®åˆ«å˜å°ï¼Œä½†ç”±äºnlistçš„è®¡ç®—é‡å·®åˆ«å¢å¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦çš„å·®è·ä¹Ÿå˜å¤§ã€‚æ‰€ä»¥æ‰æœ‰4*sqrt(n)è¿™ä¹ˆä¸€ä¸ªæ¨èå€¼
    - è¦æ˜ç™½k-meansçš„åŸç†ï¼ŒçŸ¥é“nlistå’Œnprobeçš„å…³ç³»ã€‚nlistå’Œnprobeå›ºå®šä¸å˜çš„æƒ…å†µä¸‹ï¼Œè¢«è®¡ç®—çš„æ•°æ®æ¯”ä¾‹åŸºæœ¬æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¬å›ç‡ä¹Ÿæ˜¯åŸºæœ¬ä¸å˜
      - k-meansæ˜¯èšç±»å‡ºnlistä¸­å¿ƒç‚¹ï¼Œnprobeæ˜¯æ£€ç´¢çš„æ—¶å€™ï¼ŒæŸ¥è¯¢å¤šå°‘ä¸ªä¸­å¿ƒç‚¹ã€‚éšæœºæƒ…å†µä¸‹ï¼Œæ¯ä¸ªä¸­å¿ƒç‚¹ä»£è¡¨çš„æ•°æ®æ¡æ•°æ˜¯åˆ†ç‰‡é‡Œçš„æ•°æ®é‡é™¤ä»¥nlistï¼Œé‚£æ¯æ¬¡æœç´¢nprobeæ ¸ä¸­å¿ƒï¼Œè¿™æ¯”ä¾‹ä¸å°±å›ºå®šçš„
    - æ¯æ¬¡search()è¿”å›çš„listç¬¬ä¸€ä¸ªdistanceéƒ½æ˜¯æœ€å¤§çš„ï¼Ÿ
      - é€‰çš„metric_typeæ˜¯L2è¿˜æ˜¯IPã€‚
      - å¦‚æœæ˜¯L2çš„è¯ï¼Œdistanceè¶Šæ¥è¿‘0å°±è¶Šç›¸ä¼¼ï¼Œæ’ç¬¬ä¸€ä¸ªçš„æœ€ç›¸ä¼¼ã€‚
      - å¦‚æœæ˜¯IPçš„è¯ï¼Œåœ¨å‘é‡éƒ½åšäº†å½’ä¸€åŒ–çš„å‰æä¸‹ï¼Œdistanceè¶Šæ¥è¿‘1è¶Šç›¸ä¼¼ã€‚è¯¦æƒ…å‚è€ƒå®˜ç½‘æ–‡æ¡£çš„metric typeã€‚
    - metric_type
      - COSINEï¼Œmilvusä¼šåœ¨å»ºç´¢å¼•çš„æ—¶å€™ä¸ºæ¯ä¸€æ¡å‘é‡è®¡ç®—ä¸€ä¸ªæ¨¡é•¿ï¼Œå¹¶æŠŠè¿™äº›æ¨¡é•¿å­˜åœ¨ç´¢å¼•é‡Œï¼Œæœç´¢çš„æ—¶å€™ç”¨è¿™ä¸ªæ¨¡é•¿æ¥è®¡ç®—cosineçš„å€¼ã€‚å°±ç›¸å½“äºå†…éƒ¨åšäº†å½’ä¸€åŒ–ã€‚
      - L2æ˜¯æ¬§å¼è·ç¦»ï¼Œæ²¡å¿…è¦å½’ä¸€åŒ–ï¼Œå½’ä¸€åŒ–ä¹Ÿè¡Œï¼Œä½†æ˜¯å½’ä¸€åŒ–æˆ–è€…ä¸å½’ä¸€åŒ–å¾—å‡ºæ¥çš„topkç»“æœæœ‰å¯èƒ½ä¸åŒ.
      - IPéƒ½ä¸ä¼šåšå½’ä¸€åŒ–ï¼Œåªè®¡ç®—cosineå…¬å¼çš„åˆ†å­éƒ¨åˆ†ï¼Œå¦‚æœå‘é‡æ˜¯å½’ä¸€åŒ–çš„ï¼Œé‚£ä¹ˆåˆ†å­é™¤ä»¥åˆ†æ¯1ï¼Œç»“æœå¿…ç„¶å’ŒçœŸæ­£çš„cosineå…¬å¼ç›¸åŒã€‚ IP normalizeä¹‹åå°±æ˜¯cosine æœ¬è´¨ä¸Šè¦çœ‹ä½ å…³ä¸å…³å¿ƒæ¨¡é•¿
      - ä½¿ç”¨IPå¿…é¡»è¦æŠŠå‘é‡éƒ½å½’ä¸€åŒ–ï¼Œä¸ç„¶æ²¡æœ‰æ„ä¹‰ã€‚å¯¹äºå½’ä¸€åŒ–çš„å‘é‡ï¼ŒIPç®—å‡ºæ¥çš„ç»“æœå’ŒCOSINEç†è®ºä¸Šæ˜¯ç›¸åŒçš„ã€‚å¦‚æœä½ è‡ªå·±åšäº†å½’ä¸€åŒ–ï¼Œé‚£å°±å¯ä»¥ç”¨IPã€‚æ²¡åšï¼Œé‚£å°±ç”¨COSINEæˆ–è€…L2
      - cosineæ˜¯åœ¨æ•°æ®è¢«insertè¿›æ¥è½ç›˜çš„æ—¶å€™å°±è®¡ç®—å¥½å‘é‡çš„lengthï¼Œç„¶ååœ¨æŸ¥è¯¢çš„æ—¶å€™ä¼šæŠŠä¸¤æ¡å‘é‡çš„å†…ç§¯é™¤ä»¥å®ƒä»¬çš„lengthï¼Œæ‰€ä»¥æ˜¯è®¡ç®—äº†ä¸€ä¸ªä½™å¼¦ã€‚ç”±äºlengthå·²ç»æå‰ç®—å¥½ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½å’ŒIPç›¸æ¯”ä¸ä¼šå·®å¤šå°‘
    - æœ‰å‘é‡ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè¿‡æ»¤æŸ¥è¯¢æ˜¯æœ‰å¯èƒ½æœä¸å‡ºç»“æœã€‚
      - æœ‰æ—¶å€™èƒ½æœåˆ°æœ‰æ—¶ä¸èƒ½æœåˆ°ï¼Œå¤šåŠæ˜¯å› ä¸ºåº•ä¸‹çš„segmentåšäº†compactionä¹‹åé‡å»ºäº†ç´¢å¼•ã€‚å‡ ä¸ªæœ‰ç´¢å¼•çš„å°åˆ†ç‰‡å’Œä¸€ä¸ªæœ‰ç´¢å¼•çš„å¤§åˆ†ç‰‡ï¼Œè¿‡æ»¤æœç´¢å‡ºæ¥çš„ä¸œè¥¿å¾ˆå¯èƒ½ä¸åŒã€‚
    - æŸ¥è¯¢èŠ‚ç‚¹å†…å­˜è‡ªåŠ¨å‡è¡¡çš„å‡ ç§ç­–ç•¥ï¼Ÿå½“å‰é»˜è®¤æ˜¯scorebase
    - search()æ¥å£æ˜¯ç”¨å‘é‡åšè¿‘ä¼¼æœç´¢ï¼Œå¿…é¡»è¦ä¼ å…¥å‘é‡ã€‚query()æ¥å£åº”è¯¥æ¯”è¾ƒç¬¦åˆä½ æƒ³æŸ¥æ ‡é‡çš„åŠŸèƒ½
    - å…³äºquery/searchçš„ç»“æœé‡Œoutput_fieldsè¿”å›åŸå§‹å‘é‡çš„åŠŸèƒ½
      - ä»2.3.0ç‰ˆæœ¬å¼€å§‹ï¼Œå¯¹äºhnsw/ivf_flatç´¢å¼•ï¼Œå¯ä»¥è¿”å›åŸå§‹å‘é‡ï¼Œç›´æ¥ä»å†…å­˜ä¸­çš„ç´¢å¼•è·å–åŸå§‹å‘é‡
      - ä»2.3.2ç‰ˆæœ¬å¼€å§‹ï¼Œå¯¹äºivf_sq8/ivf_pqç´¢å¼•ï¼Œå¯ä»¥è¿”å›åŸå§‹å‘é‡ï¼Œä»ç¼“å­˜åˆ°æœ¬åœ°çš„åŸå§‹å‘é‡æ•°æ®æ–‡ä»¶é‡Œè¯»å–åŸå§‹å‘é‡
    - milvusæŸ¥çœ‹è¡Œæ•°æœ‰ä¸¤ç§æ–¹å¼ï¼Œ
      - ä¸€ç§æ˜¯collection.num_entitiesï¼Œåªæ˜¯ä»etcdä¸­æ‹¿å–æ¯ä¸ªsegmentåˆ›å»ºæ—¶æ‰€è®°å½•çš„è¡Œæ•°ï¼Œä¸ä¼šç»Ÿè®¡deleteçš„æ•°é‡
      - ç¬¬äºŒç§æ˜¯collection.query(output_fields=["count(*)"])ã€‚åšä¸€æ¬¡è¯¦ç»†ç»Ÿè®¡ï¼Œå¹¶æŠŠdeleteæ•°é‡ä¹Ÿç»Ÿè®¡åœ¨å†…ã€‚
        - query(output_fields="count(*)")æ˜¯ç»Ÿè®¡å·²è½ç›˜ä»¥åŠè¢«querynodeæ¶ˆè´¹åˆ°çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚æœ‰äº›æ•°æ®å¦‚æœä»ç„¶åœ¨pulsarä¸­å°±ä¸ä¼šè¢«ç»Ÿè®¡åˆ°
      - Attuä¸Šçœ‹åˆ°çš„approximate countæ˜¯ç”¨çš„å‰ä¸€ç§æ–¹å¼ï¼Œæ‰€ä»¥ä¸ä¼šç»Ÿè®¡deleteçš„æ•°é‡
    - Search()
      - milvusçš„è¿‡æ»¤åšæ³•æ˜¯å…ˆæŒ‰æ¡ä»¶é‡Œçš„æ ‡é‡è¿‡ä¸€éï¼ŒæŠŠç¬¦åˆæ¡ä»¶çš„æ¡ç›®æ ‡ä¸º1ï¼Œä¸ç¬¦åˆçš„æ ‡ä¸º0ï¼Œç„¶ååšANNæœç´¢ï¼Œç¢°åˆ°1çš„å°±è®¡ç®—è·ç¦»ï¼Œç¢°åˆ°0çš„å°±å¿½ç•¥ã€‚è¿‡æ»¤çš„æ€§èƒ½è·Ÿç´¢å¼•æœ‰å…³ç³»ï¼ŒHNSWç´¢å¼•å¦‚æœæ ‡ä¸º1çš„æ•°é‡å¾ˆå°‘ï¼Œå°±å¾ˆæ…¢ã€‚IVFç´¢å¼•ä¸å—è¿™ä¸ªå½±å“ï¼Œæ¯”è¾ƒå¿«
    - å…¨é‡æŸ¥è¯¢åŠŸèƒ½ - Query iterator
    - `collection.query(expr="id==xx", output_fields=["*"])`  è¿™æ˜¯å–å‡ºä¸€æ•´è¡Œæ•°æ®
    - å¦‚æœæ£€ç´¢ä¸å‡ºï¼Œä¸€æœ‰å¯èƒ½æ˜¯embeddingä¸å¤ªå¥½ï¼ŒäºŒæœ‰å¯èƒ½ç´¢å¼•å‚æ•°æœç´¢å‚æ•°è®¾çš„ä¸åˆç†ï¼Œä¸‰æœ‰å¯èƒ½consistency levelæ˜¯eventually
      - insertæ•°æ®åˆ°collectionï¼Œæ•°æ®çš„å¯è§æ€§è·Ÿmessage queueæ¶ˆè´¹çš„é€Ÿåº¦æœ‰å…³ï¼ŒæŸ¥è¯¢æ—¶æƒ³è¦ç¡®å®šæ•°æ®å¯è§å°±ç”¨consistency_level=Strong
      - collectionåˆ›å»ºæ—¶è®¾ç½®çš„consistency_levelæ˜¯åšä¸ºé»˜è®¤å€¼ä½¿ç”¨ï¼Œä¸èƒ½ä¿®æ”¹
      - searchå’Œqueryæ¥å£éƒ½æœ‰consistency_levelå‚æ•°æŒ‡å®šæœ¬æ¬¡æŸ¥è¯¢çš„levelï¼Œå¦‚æœæ²¡å¡«search/queryçš„consistency_levelå‚æ•°ï¼Œæ‰ä¼šä½¿ç”¨collectionçš„é»˜è®¤è®¾å®šã€‚
      - consistency_levelæ˜¯æ§åˆ¶æ•°æ®å¯è§æ€§çš„
        - milvuså„ä¸ªèŠ‚ç‚¹é€šè¿‡åŒæ­¥æ—¶é—´æˆ³çš„æ–¹å¼æ¥ç¡®è®¤è¾¾åˆ°æŸä¸ªæ—¶é—´ç‚¹çš„æ•°æ®å¯è§æ€§ï¼Œç”±ä¸€ä¸ªrootcoordèŠ‚ç‚¹æ¯éš”200æ¯«ç§’å‘é€ä¸€ä¸ªæ—¶é—´æˆ³æ¶ˆæ¯åˆ°æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå¦‚æœæŸä¸ªæ—¶é—´æˆ³è¢«æ‰€æœ‰çš„querynodeèŠ‚ç‚¹çœ‹åˆ°ï¼Œé‚£å°±è¯´æ˜è¿™ä¸ªæ—¶é—´æˆ³ä¹‹å‰çš„æ•°æ®éƒ½å·²å¯è§ã€‚
        - è®¾ä¸ºStrongæ„æ€æ˜¯ç­‰å¾…å½“å‰æœ€è¿‘çš„æ—¶é—´æˆ³æ¶ˆæ¯è¢«æ‰€æœ‰querynodeæ¶ˆè´¹ä¹‹åå†å¼€å§‹æœç´¢ã€‚æœ‰å¯èƒ½ä¼šç­‰å¾…200åˆ°400æ¯«ç§’ã€‚
    - å‘é‡æœç´¢ä¸ä¿è¯ä½ æƒ³è¦çš„é‚£æ¡æ•°æ®ä¸€å®šä¼šåœ¨ç»“æœé›†é‡Œçš„ç¬¬ä¸€ä¸ªï¼Œä¹Ÿä¼šä¼šåœ¨ç¬¬äº”ç¬¬å…­ä¸ªç”šè‡³ç¬¬10ä¸ª å‘é‡æœç´¢æ˜¯ANNSï¼Œâ€œè¿‘ä¼¼è¿‘é‚»æœç´¢â€è¿™å‡ ä¸ªè¯çš„ç®€å†™ï¼Œå®ƒä¸å«ç²¾ç¡®æœç´¢
    - searchè¿”å›çš„ç»“æœé‡Œä¸å¸¦æœ‰partitionä¿¡æ¯ã€‚å¯ä»¥å»ºè¡¨æ—¶ç”¨ä¸€ä¸ªå­—æ®µæ¥å­˜partitionçš„åå­—æˆ–è€…æ ‡è®°ï¼Œç„¶åsearchçš„æ—¶å€™åœ¨output_fieldsé‡Œå¡«å†™è¿™ä¸ªå­—æ®µçš„åå­—ã€‚
    - ç”¨gpuæ¥åšæŸ¥è¯¢ï¼Œå¿…é¡»è¦ä½¿ç”¨"GPU_"åå­—æ‰“å¤´çš„ç´¢å¼•
      - gpuçš„æ˜¾å­˜æ²¡æœ‰æœºå™¨å†…å­˜é‚£ä¹ˆå¤§ï¼Œèƒ½åŠ è½½çš„æ•°æ®é‡ç›¸å¯¹è¾ƒå°ï¼Œæ‰€ä»¥ä¸é€‚åˆå·¨å‹æ•°æ®é›†ã€‚gpuåœ¨nqæ¯”è¾ƒå¤§çš„æ—¶å€™æ¯”è¾ƒæœ‰ä¼˜åŠ¿ï¼Œæ¯”å¦‚å•æ¬¡æŸ¥è¯¢è¾“å…¥ä¸€åƒæ¡ä»¥ä¸Šçš„å‘é‡å»æœ
      - æ¯æ¬¡æœç´¢æ—¶è¦æŠŠç›®æ ‡å‘é‡ä»å†…å­˜æ‹·åˆ°æ˜¾å­˜ï¼Œæœç´¢å®ŒæˆåæŠŠç»“æœä»æ˜¾å­˜æ‹·åˆ°å†…å­˜ï¼Œè¿™äº›éƒ½æ˜¯æœ‰æˆæœ¬çš„
      - ç´¢å¼•æ˜¯å¸¦æœ‰GPU_å‰ç¼€çš„ç´¢å¼•ï¼Œindexnodeå’Œquerynodeéƒ½éœ€è¦gpu
    - qps
      - qpså—å½±å“çš„å› ç´ å¾ˆå¤šï¼Œæ•°æ®é‡ï¼Œç»´åº¦ï¼Œç´¢å¼•ç±»å‹å‚æ•°ï¼Œæœç´¢å‚æ•°ï¼Œæ˜¯å¦æœ‰è¿‡æ»¤ï¼Œæ˜¯å¦æœ‰output_fieldsï¼Œmilvus. yamlé‡Œé¢çš„queryNode.groupé‡Œçš„é…ç½®ï¼Œquerynodeæ•°é‡ï¼Œloadçš„å‚æ•°replica_numberï¼Œç­‰ç­‰ã€‚
      - è¦è·å¾—æ›´é«˜çš„qpså¯ä»¥ä»ä¸Šé¢è¿™äº›æ–¹é¢å…¥æ‰‹ã€‚cpuçš„æ ¸æ•°å’Œæ€§èƒ½ä¹Ÿä¼šå½±å“qpsï¼Œç”šè‡³NUMAæ¶æ„ä¹Ÿä¼šå½±å“qpsã€‚å•æœºç‰ˆçš„indexnode datanodeå¦‚æœæœ‰å»ºç´¢å¼•æˆ–è€…compactionçš„ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œä¹Ÿä¼šå½±å“qpsã€‚
    - count(*)æ˜¯ç²¾ç¡®å€¼ï¼Œä½†å®ƒå¾—å‡ºçš„ç»“æœä¼šå—consistency_levelçš„å½±å“ã€‚å¦‚æœStrongï¼Œåˆ™æ˜¯å®Œå…¨ç²¾ç¡®çš„ã€‚å¦‚æœæ˜¯Bounded/Eventuallyï¼Œæœ‰å¯èƒ½å°‘æ•°æ•°æ®è¿˜åœ¨pulsaré‡Œæœªæ¶ˆè´¹å®Œæˆï¼Œå°±ä¸è¢«è®¡å…¥è¡Œæ•°
    - try_search_fillæ–¹æ³•æ˜¯å½“ç¼“å­˜é‡Œçš„ç»“æœé›†ä¸å¤šçš„æ—¶å€™ï¼Œæ‰§è¡Œè‹¥å¹²æ¬¡searchï¼ˆæœç´¢åŠå¾„ä¼šå‘å¤–æ‰©ä¸€åœˆï¼‰ä»¥è·å–æ›´å¤šçš„ç»“æœé›†
      - åˆå§‹åŒ–iteratorçš„æ—¶å€™æœ‰ä¸ªbatch_sizeå‚æ•°ï¼Œå¦‚æœç¼“å­˜é‡Œçš„ç»“æœé›†ä»ç„¶å°äºbatch_sizeï¼Œå®ƒå°±ä¼šå†æ¬¡æ‰§è¡Œsearch(åŠå¾„ç»§ç»­å¾€å¤–æ‰©)æ¥è·å–æ›´å¤šçš„ç»“æœé›†
    - å¤šåˆ—å‘é‡æŸ¥è¯¢
      - 2.4ç‰ˆæœ¬çš„å¤šåˆ—å‘é‡æŸ¥è¯¢æ˜¯å…ˆåˆ†åˆ«è®¡ç®—æ¯ä¸ªå­æŸ¥è¯¢çš„ç»“æœï¼Œå†æŠŠå­ç»“æœrerankã€‚æ ¹æ®topkå†åšrerankingã€‚ä¸æ˜¯ç®€å•çš„å–äº¤é›†ï¼Œæœ‰ fusion ç­–ç•¥çš„
    - ç´¢å¼•ä¸­åšå‘é‡ç›¸ä¼¼æ€§æ£€ç´¢
      - æœ¬è´¨ä¸Šéƒ½æ˜¯é€šè¿‡é¢„å…ˆå¯¹å‘é‡æ•°æ®çš„åˆ†å¸ƒåšäº†ä¸€ä¸ªç»Ÿè®¡ï¼Œç„¶ååœ¨æœç´¢çš„æ—¶å€™ä»…è®¡ç®—å¾ˆå°çš„èŒƒå›´å°±èƒ½æ‰¾åˆ°ç»å¤§éƒ¨åˆ†ç»“æœã€‚ä¸ç®¡æ˜¯hnswè¿˜æ˜¯ivfï¼Œæœç´¢çš„æ—¶å€™éƒ½åªè®¡ç®—å¾ˆå°ä¸€éƒ¨åˆ†æ•°æ®å°±èƒ½æ‰¾åˆ°ç»“æœ
      - é‚£å¦‚æœåŠ ä¸Šè¿‡æ»¤æ¡ä»¶ï¼ŒæŠŠä¸€å¤§æ‰¹æ•°æ®éƒ½æ’é™¤åœ¨è®¡ç®—ä¹‹å¤–ï¼Œé‚£ä¹ˆæœ¬æ¥è¦æœç´¢çš„é‚£å°èŒƒå›´é‡Œä¹Ÿä¼šæœ‰å‘é‡è¢«æ’é™¤åœ¨å¤–ï¼Œå°±å‡‘ä¸å‡ºè¶³å¤Ÿçš„ç»“æœ
      -  localstorageå¯¹diskannæœ‰æ•ˆï¼Œå½“ä½ è°ƒç”¨loadçš„æ—¶å€™å°±ä¼šæŠŠdiskannç´¢å¼•æ•°æ®éƒ½ä¸‹è½½åˆ°localstorageé‡Œã€‚
      - å†…å­˜é‡Œæœ‰å°éƒ¨åˆ†é‡åŒ–è¿‡çš„æ•°æ®ï¼Œæœç´¢çš„æ—¶å€™å…ˆåœ¨å†…å­˜é‡Œåšä¸€æ¬¡å¿«é€Ÿæœç´¢ï¼Œç„¶ååœ¨localstorageé‡Œæ‰¾åˆ°å¯¹åº”çš„åˆ†å—æ–‡ä»¶ï¼Œè¯»å‡ºåŸå§‹å‘é‡åšç²¾ç¡®æ£€ç´¢
    - æŸ¥è¯¢å»¶è¿Ÿå°±ä¸»è¦è·Ÿquerynodeæœ‰å…³ï¼Œæœ‰æ—¶querynodeèµ„æºå……è¶³è€ŒproxyèŠ‚ç‚¹ä¸å¤ªè¡Œçš„è¯ï¼Œproxyä¹Ÿæœ‰å¯èƒ½æˆä¸ºç“¶é¢ˆ
    - milvusç›®å‰çš„querynodeåšè´Ÿè½½å‡è¡¡çš„æ—¶å€™æ˜¯æ ¹æ®è¡Œæ•°æ¥ä¼°ç®—çš„ï¼Œå¦‚æœæŸä¸€ä¸ªentityçš„textåˆ—ç‰¹åˆ«å¤§ï¼Œæœ‰çš„ç‰¹åˆ«å°ï¼Œbalanceæ˜¯ä¸ªæŒ‘æˆ˜
    - query node cpu https://github.com/milvus-io/milvus/discussions/25571
      - a search request CPU usage is estimated by cpuRatio * nq * segment_count
      - Assume a query node has 16 cores, we say the CPU ability is 1600. The collection has 5 segments. Now you send 100 search requests at the same time with nq=8. cpuRatio=10.
        - The search engine estimates usage of each request to be 8510=400. Then it allows 1600/400=4 requests to be executed at the same time
      - maxNQ is for search requests combination. The search engine can combine similar search requests into a big request to execute.
    - [Similarity Metrics for Vector Search](https://zilliz.com/blog/similarity-metrics-for-vector-search)
      - ğ—˜ğ˜‚ğ—°ğ—¹ğ—¶ğ—±ğ—²ğ—®ğ—» ğ——ğ—¶ğ˜€ğ˜ğ—®ğ—»ğ—°ğ—² (ğ—ŸğŸ®) â€“ for absolute distances
      -  ğ—–ğ—¼ğ˜€ğ—¶ğ—»ğ—² ğ—¦ğ—¶ğ—ºğ—¶ğ—¹ğ—®ğ—¿ğ—¶ğ˜ğ˜† â€“ for directional comparison
      -  ğ—œğ—»ğ—»ğ—²ğ—¿ ğ—£ğ—¿ğ—¼ğ—±ğ˜‚ğ—°ğ˜ â€“ for combined direction and magnitude
      -  ğ— ğ—®ğ—»ğ—µğ—®ğ˜ğ˜ğ—®ğ—» ğ——ğ—¶ğ˜€ğ˜ğ—®ğ—»ğ—°ğ—² (ğ—ŸğŸ­) â€“ for grid-based calculations
      -  ğ—›ğ—®ğ—ºğ—ºğ—¶ğ—»ğ—´ ğ——ğ—¶ğ˜€ğ˜ğ—®ğ—»ğ—°ğ—² â€“ for binary vector comparison
      - Choose the right metric based on your data characteristics and application needs.
        - Use Euclidean distance when you care about the difference in magnitude. It's great for when your vectors have different magnitudes and you primarily care about how far your data points are in space.
        - Use Cosine similarity when you care about the difference in orientation. Perfect for NLP applications and scenarios where vector direction matters more than magnitude.
        - Use Inner product when you care about both magnitude and orientation. It's a versatile option that works well for both normalized and non-normalized datasets.
        - Use specialized metrics like Hamming or Jaccard for binary data or specific applications where these metrics are more appropriate.
  - ç´¢å¼•
    - [index overview](https://www.slideshare.net/slideshow/introduction-to-multilingual-retrieval-augmented-generation-rag/267957576)
      - L2 (Euclidean) - Spatial distance ä¸»è¦è¿ç”¨äºè®¡ç®—æœºè§†è§‰é¢†åŸŸ
      - Cosine - Orientation distance
      - IP (Inner Product) - Both - ä¸»è¦è¿ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸ
        - With normalized vectors, IP is equivalent to cosine similarity
      - SQ - Scalar Quantization - Bucketize across one dimension, accracy x memory tradeoff
        - The dimensions in a vector embedding are usually represented as 32 bit floats. SQ transforms the float representation to an 8 bit integer. This is a 4x reduction in size.
        - like BQ, is a lossy compression technique. However, SQ has a much greater range.
        - SQ compressed vectors are more accurate than BQ compressed vectors
        - æŠŠä¸€ä¸ªé«˜ç²¾åº¦çš„æµ®ç‚¹å‘é‡ï¼Œä¸»åŠ¨ä¸¢å¤±éƒ¨åˆ†ç²¾åº¦ï¼Œå˜ä¸ºä¸€ä¸ªä½ç²¾åº¦å‘é‡ï¼Œå‡å°‘è®¡ç®—å’Œå­˜å‚¨å¼€é”€ã€‚ä¾‹å¦‚æŠŠå‘é‡ä¸­çš„å…ƒç´  0.1192 å’Œ 0.1365 ç»Ÿä¸€ç”¨ 0.1 æ¥æ›¿æ¢
      - PQ - Product Quantization - bucketize across multiple dimensions, accuracy x memory tradeoff
        - æŠŠé«˜ç»´å‘é‡ç©ºé—´é™ç»´ã€‚å› ä¸ºä½ç»´å‘é‡çš„å­˜å‚¨å’Œè®¡ç®—å¼€é”€éƒ½è¿œè¿œä½äºé«˜ç»´
        - First, it reduces the number of vector dimensions to a smaller number of "segments",
        - then each segment is quantized to a smaller number of bits from the original number of bits (typically a 32-bit float).
        - PQ makes tradeoffs between recall, performance, and memory usage. This means a PQ configuration that reduces memory may also reduce recall.
      - BQ - Binary quantization - a quantization technique that converts each vector embedding to a binary representation
        - The tradeoff is that BQ is lossy. The binary representation by nature omits a significant amount of information, and as a result the distance calculation is not as accurate as the original vector embedding.
    - [å‘é‡ç´¢å¼•é€‰å‹](https://mp.weixin.qq.com/s/yJIHKfUOAtz4iWVHURri9g)
    - Index type
      - FLATï¼šé€‚ç”¨äºéœ€è¦ 100% å¬å›ç‡ä¸”æ•°æ®è§„æ¨¡ç›¸å¯¹è¾ƒå°ï¼ˆç™¾ä¸‡çº§ï¼‰çš„å‘é‡ç›¸ä¼¼æ€§æœç´¢åº”ç”¨ã€‚
      - IVF_FLATï¼šåŸºäºé‡åŒ–çš„ç´¢å¼•ï¼Œé€‚ç”¨äºè¿½æ±‚æŸ¥è¯¢å‡†ç¡®æ€§å’ŒæŸ¥è¯¢é€Ÿåº¦ä¹‹é—´ç†æƒ³å¹³è¡¡çš„åœºæ™¯ï¼ˆé«˜é€ŸæŸ¥è¯¢ã€è¦æ±‚é«˜å¬å›ç‡ï¼‰ã€‚
      - IVF_SQ8ï¼šåŸºäºé‡åŒ–çš„ç´¢å¼•ï¼Œé€‚ç”¨äºç£ç›˜æˆ–å†…å­˜ã€æ˜¾å­˜èµ„æºæœ‰é™çš„åœºæ™¯ï¼ˆé«˜é€ŸæŸ¥è¯¢ã€ç£ç›˜å’Œå†…å­˜èµ„æºæœ‰é™ã€æ¥å—å¬å›ç‡çš„å°å¹…å¦¥åï¼‰ã€‚
      - IVF_PQï¼šåŸºäºé‡åŒ–çš„ç´¢å¼•ï¼Œé€‚ç”¨äºè¿½æ±‚é«˜æŸ¥è¯¢é€Ÿåº¦ã€ä½å‡†ç¡®æ€§çš„åœºæ™¯ï¼ˆè¶…é«˜é€ŸæŸ¥è¯¢ã€ç£ç›˜å’Œå†…å­˜èµ„æºæœ‰é™ã€æ¥å—å¬å›ç‡çš„å®è´¨æ€§å¦¥åï¼‰ã€‚
        - m ä¸€èˆ¬è®¾ç½®ä¸º[4,8], nbitsè®¾ç½®ä¸º8
      - HNSWï¼šåŸºäºå›¾çš„ç´¢å¼•ï¼Œé€‚ç”¨äºè¿½æ±‚é«˜æŸ¥è¯¢æ•ˆç‡çš„åœºæ™¯ï¼ˆé«˜é€ŸæŸ¥è¯¢ã€è¦æ±‚å°½å¯èƒ½é«˜çš„å¬å›ç‡ã€å†…å­˜èµ„æºå¤§çš„æƒ…æ™¯ï¼‰ã€‚
      - ANNOYï¼šåŸºäºæ ‘çš„ç´¢å¼•ï¼Œé€‚ç”¨äºè¿½æ±‚é«˜å¬å›ç‡çš„åœºæ™¯ï¼ˆä½ç»´å‘é‡ç©ºé—´ï¼‰ã€‚
      - IVF_HNSWï¼šåŸºäºé‡åŒ–å’Œå›¾çš„ç´¢å¼•ï¼Œé«˜é€ŸæŸ¥è¯¢ã€éœ€è¦å°½å¯èƒ½é«˜çš„å¬å›ç‡ã€å†…å­˜èµ„æºå¤§çš„æƒ…æ™¯
    - milvusé‡Œé¢ï¼Œæ¯ä¸ªå‘é‡å­—æ®µæœ€å¤šåªèƒ½å»ºç«‹ä¸€ç§ç´¢å¼•ï¼Œå¦‚æœè¦æ¢ï¼Œè¦æŠŠæ—§çš„åˆ é™¤å†å»ºæ–°çš„ã€‚æ‰§è¡Œsearchçš„æ—¶å€™æ€»æ˜¯ä¼šä½¿ç”¨é‚£å”¯ä¸€æŒ‡å®šçš„ç´¢å¼•ã€‚ æŸ¥è¯¢è®¡åˆ’æ— æ³•è¢«å¤–ç•Œæ„ŸçŸ¥
    - seal compact indexè¿™å‡ ä¸ªäº‹æƒ…æœ‰ç‚¹å¤æ‚ã€‚sealä¹‹åä¼šå»ºä¸€æ¬¡ç´¢å¼•ï¼Œä½†sealçš„åˆ†ç‰‡å¯èƒ½ä¼šè¢«åˆå¹¶æˆå¤§çš„åˆ†ç‰‡ï¼Œå¤§çš„åˆ†ç‰‡åˆè¦å»ºä¸€æ¬¡ç´¢å¼•
    - é™¤äº†DISKANNä¹‹å¤–ï¼Œæ‰€æœ‰çš„ç´¢å¼•éƒ½æ˜¯çº¯å†…å­˜çš„ã€‚è‹¥æ‰“å¼€äº†mmapï¼Œè¿™æ ·querynodeä¼šæŠŠæ•°æ®æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åé€šè¿‡mmapè¯»å–ã€‚å†…å­˜ä¸è¶³çš„è¯å¯ä»¥è€ƒè™‘ivf_sq8  ivf_pw  diskindexè¿™äº›ç´¢å¼•ï¼Œæˆ–è€…å¼€mmap
      - mmapæ˜¯å¯¹diskannç´¢å¼•å’Œgpuç´¢å¼•ä»¥å¤–çš„å…¶ä»–ç´¢å¼•æœ‰æ•ˆ
    - é•¿æ–‡æœ¬ä¸€èˆ¬ä¸è¿‡æ»¤çš„ mmapæœ€åˆé€‚äº†ï¼Œæ ‡é‡æ–‡æœ¬åæœŸä½ å¦‚æœä¸éœ€è¦ä½¿ç”¨ï¼ˆè¿‡æ»¤/outputfieldè¾“å‡ºï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨partial loadï¼Œä¸åŠ è½½è¿™ä¸ªå­—æ®µã€‚å¦‚æœéœ€è¦ä½¿ç”¨ï¼Œå¯ä»¥ç»™è¿™ä¸ªå­—æ®µä½¿ç”¨mmap
    - diskannåŠ è½½åˆ°å†…å­˜é‡Œçš„æ˜¯ç±»ä¼¼äºä¸€ä¸ªIVF_PQç´¢å¼•ã€‚æœç´¢æ—¶æ˜¯å…ˆåœ¨å†…å­˜é‡Œçš„ç´¢å¼•ç²—ç•¥åœ°æœç´¢ä¸€ä¸‹ï¼Œç„¶ååˆ°ç£ç›˜é‡Œå–å‡ºéƒ¨åˆ†å‘é‡æ•°æ®åšæ›´ç²¾ç¡®çš„æœç´¢
    - [é›†ç¾¤å¼€äº†mmapï¼Œåˆ›å»ºé›†åˆç´¢å¼•çš„æ—¶å€™æ˜¯é»˜è®¤å°±å¼€å¯äº†ï¼Œè¿˜æ˜¯éœ€è¦collection.set_properties({'mmap.enabled': True})å‚æ•°æŒ‡å®š](https://github.com/milvus-io/milvus/discussions/33621)
      - If mmap is enabled, when you call collection.load(), the query node will download the index files to local. The default local path is configured by the localStorage.path + "/mmap" in the milvus.yaml
      - Query node maps the file between RAM and disk by mmap(). And maps the index files into memory, but the files are not immediately read from disk to physical RAM, so the memory usage is very low.
      - Query node calls unlink() to drop the index file. But the mmap file still occupies disk space.
      - When search, query node actually read data from disk, acts like read from RAM.
      - https://docs.zilliz.com/docs/use-mmap?utm_source=x
    - hnswç´¢å¼•çš„å‘é‡ç±»å‹åªèƒ½ç”¨floatvectorï¼Ÿ float16Vectorå¯ä»¥ä½¿ç”¨å’ŒfloatVectorä¸€æ ·çš„ç´¢å¼•ï¼Œhnsw ivféƒ½è¡Œ
    - ivf_flatå»ºç´¢å¼•çš„æ—¶é—´è·Ÿnlistçš„å¤§å°ç›¸å…³ï¼Œè®¾å°ç‚¹å°±å¿«ï¼Œå¤§ç‚¹å°±æ…¢ï¼Œ1Gçš„è€—æ—¶1åˆ†é’Ÿä¹Ÿæ˜¯æœ‰å¯èƒ½çš„
      - æ¨èå€¼æ˜¯4*sqrt(n)ï¼Œnæ˜¯å•ä¸ªsegmenté‡Œçš„è¡Œæ•°ã€‚4096 dimï¼Œé»˜è®¤å•ä¸ªsegment 512MBï¼Œé‚£æ¯ä¸ªsegmenté‡Œå¤§çº¦æœ‰15000æ¡æ•°æ®ï¼Œé‚£ä¹ˆnlistå¤§çº¦ä¸º4*sqrt(15000)=480ï¼Œæœ€å¥½æ˜¯è½¬æˆ2çš„æ¯”æ–¹æ•°ï¼Œé‚£å°±é€‰512ã€‚
    - Normalization
      - å½’ä¸€åŒ–æ˜¯æŒ‡å°†åµŒå…¥ï¼ˆå‘é‡ï¼‰è½¬æ¢ä¸ºèŒƒæ•°ç­‰äº1çš„è¿‡ç¨‹ã€‚å¦‚æœå†…ç§¯ï¼ˆIPï¼‰ç”¨äºè®¡ç®—åµŒå…¥ç›¸ä¼¼æ€§ï¼Œåˆ™æ‰€æœ‰åµŒå…¥éƒ½å¿…é¡»æ ‡å‡†åŒ–ã€‚å½’ä¸€åŒ–åï¼Œå†…ç§¯ç­‰äºä½™å¼¦ç›¸ä¼¼æ€§
    - hnsw/ivfflatæ‰€éœ€çš„å†…å­˜ç¨å¤§äºå‘é‡æ•°æ®çš„sizeã€‚ivfsq8/ivfpqæ‰€éœ€å†…å­˜å¤§çº¦ç›¸å½“äºå‘é‡æ•°æ®sizeçš„1/4ã€‚diskannæ‰€éœ€å†…å­˜å¤§çº¦ç›¸å½“äºå‘é‡æ•°æ®sizeçš„1/4åˆ°1/6ã€‚
      - HNSW å›¾ç®—æ³•çš„æœ€å¤§ä¼˜ç‚¹æ˜¯å¬å›ç‡é«˜ï¼Œæ€§èƒ½å¥½ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä¸€æ˜¯æ•°æ®éœ€è¦å…¨éƒ¨åŠ è½½åœ¨å†…å­˜é‡Œé¢é‡Œé¢ï¼Œæˆæœ¬å¾ˆé«˜
      - èšç±»ç®—æ³•çš„æœ€å¤§ä¼˜ç‚¹æ˜¯æˆæœ¬ä½ï¼Œç´¢å¼•æ€§èƒ½å¥½ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¬å›ç‡ä½
    - å‘é‡åœ¨milvusé‡Œæ˜¯ä»¥float32æ•°ç»„çš„å½¢å¼å­˜å‚¨å’Œè®¡ç®—ï¼Œæ¯ä¸ªç»´åº¦æ˜¯ä¸€ä¸ªfloat32ï¼Œæ‰€ä»¥æ¯ä¸ªç»´åº¦å æ®4å­—èŠ‚ç©ºé—´ã€‚500ä¸‡æ¡2048ç»´å‘é‡ï¼Œæ€»å­—èŠ‚æ•°å°±æ˜¯5M*2048*4bytes=40GBã€‚
      - åŠ è½½åˆ°å†…å­˜é‡Œæ‰€ç”¨çš„ç©ºé—´è¿˜è¦çœ‹æ˜¯ä»€ä¹ˆç´¢å¼•ã€‚FLAT/IVFFLAT/HNSWè¿™äº›åŸºæœ¬ä¸Šæ˜¯1æ¯”1ï¼Œä¹Ÿå°±æ˜¯å ç”¨40GBå†…å­˜ã€‚IVFSQ8/IVFPQå¤§çº¦æ˜¯30%ï¼Œä¹Ÿå°±æ˜¯å ç”¨12GBå†…å­˜ã€‚
      - DISKANNå¤§çº¦æ˜¯20%å·¦å³ã€‚DISKANNç´¢å¼•å€ŸåŠ©ç£ç›˜ï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¸­ä¼šæœ‰è¯»ç£ç›˜è¡Œä¸ºã€‚å…¶ä»–ç´¢å¼•éƒ½æ˜¯çº¯å†…å­˜ç´¢å¼•
      - å¦‚æœæ‰“å¼€mmapåŠŸèƒ½ï¼Œæ‰€æœ‰çš„ç´¢å¼•éƒ½å¯ä»¥å€ŸåŠ©ç£ç›˜æ¥å‡å°‘å†…å­˜å ç”¨ã€‚
      - æ¯”å¦‚IVFFLATç´¢å¼•åŸæœ¬è¦å ç”¨40GBå†…å­˜çš„ï¼Œå¦‚æœquerynodeæ²¡æœ‰å¤§äº40GNå†…å­˜ï¼Œloadå°±ä¼šå¤±è´¥ã€‚ä½†å¦‚æœæ‰“å¼€mmapä¹‹åï¼Œåªéœ€è¦ç»™querynodeé…ç½®æ›´å°‘çš„å†…å­˜ï¼Œæ¯”å¦‚é…ç½®20GBï¼Œä¹Ÿèƒ½åŠ è½½æˆåŠŸæŸ¥è¯¢æˆåŠŸï¼Œåªæ˜¯è€—æ—¶ä¼šä¹…ä¸€äº›ã€‚
    -  float16å‘é‡åœ¨æœ‰äº›ç´¢å¼•ç±»å‹é‡Œè¿˜æ˜¯ä»¥float32æ¥è®¡ç®—çš„ï¼Œæ¯”å¦‚IVFç´¢å¼•ã€‚åœ¨HNSWå’ŒDISKANNé‡Œæ˜¯çœŸæ­£ä»¥float16è®¡ç®—çš„ã€‚ç›¸åº”çš„ä»¥float16è®¡ç®—çš„ç´¢å¼•å†…å­˜å ç”¨å‡åŠï¼Œé€Ÿåº¦ä¹Ÿå¿«ä¸€äº›ã€‚
    - ä½¿ç”¨ivf_flatï¼Œé¢‘ç¹æ’å…¥å¤§é‡æ•°æ®ä¼šè‡ªåŠ¨é‡å»ºç´¢å¼•ä¹ˆï¼Ÿ
      - ä¹‹å‰è°ƒè¿‡åˆ›å»ºç´¢å¼•çš„æ¥å£ï¼Œåé¢æ–°æ’å…¥çš„æ•°æ®éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºç´¢å¼•ã€‚æ¯ä¸ªivf_flatç´¢å¼•æ˜¯ç”¨å½“å‰segmentçš„æ•°æ®åšè®­ç»ƒçš„ï¼Œå‰åæ•°æ®åˆ†å¸ƒå˜äº†ä¸å½±å“ã€‚
  - load
    - loadæ˜¯å¦æœ‰å¹¶å‘çš„è®¾ç½®å‘¢ï¼Ÿ
      - milvus.yamlé‡Œçš„queryCoord.taskExecutionCapï¼Œè¿™ä¸ªè®¾å°ç‚¹æ¯æ‰¹é€ç»™ä¸€ä¸ªquerynodeåŠ è½½çš„segmentçš„æœ€å¤§æ•°é‡ï¼Œæ¯ä¸ªsegmenté‡Œæœ‰å¤šä¸ªæ•°æ®æ–‡ä»¶ï¼Œquerynodeä¹Ÿæœ‰è‡ªå·±çš„å¹¶å‘è¯»å–çš„é™åˆ¶ï¼Œè·Ÿcpuæ ¸æ•°ç›¸å…³
    -  loadæ—¶æ˜¯åŠ è½½ç´¢å¼•åˆ—åˆ°å†…å­˜è¿˜æ˜¯å…¨é‡å­—æ®µæ•°æ®åˆ°å†…å­˜å‘¢ï¼Ÿ
      - å¯¹äºå‘é‡å­—æ®µæ¥è¯´ï¼Œå¦‚æœæ²¡å»ºå¥½ç´¢å¼•çš„åˆ†ç‰‡ï¼ŒåŸå§‹å‘é‡æ•°æ®ä¼šä¿æŒåœ¨å†…å­˜é‡Œåšæœç´¢ï¼Œå»ºå¥½ç´¢å¼•çš„å°±æŠŠç´¢å¼•åŠ è½½è¿›å†…å­˜ï¼ŒåŸå…ˆé‚£äº›åŸå§‹å‘é‡å°±ä¼šä»å†…å­˜é‡Šæ”¾æ‰ã€‚
      - å¯¹äºéå‘é‡å­—æ®µï¼Œä¹Ÿæ˜¯æœ‰ç´¢å¼•å°±åŠ è½½ç´¢å¼•ï¼Œæ²¡ç´¢å¼•å°±æŠŠåŸå§‹æ•°æ®åŠ è½½è¿›å†…å­˜ã€‚åŸºæœ¬ä¸Šä½ å¯ä»¥è®¤ä¸ºå…¨é‡æ•°æ®éƒ½åœ¨å†…å­˜é‡Œã€‚
    - é‡å¯çš„æ—¶å€™ä¼šæŠŠä¹‹å‰loadedçŠ¶æ€çš„è¡¨å…¨éƒ¨åŠ è½½è¿›å†…å­˜ã€‚loadçš„é€Ÿåº¦ä¸å¯æ§ï¼Œè·Ÿå†…éƒ¨çš„è°ƒåº¦å’Œå­˜å‚¨çš„è¯»å¸¦å®½ç›¸å…³ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåƒä¸‡çº§åˆ«çš„æ•°æ®é‡loadè€—æ—¶åˆ†é’Ÿçº§çš„éƒ½æ˜¯æ­£å¸¸
    - å¼€å¯milvusä»¥åï¼Œæ•°æ®ä¸åŠ è½½åˆ°å†…å­˜æ˜¯ä»€ä¹ˆé—®é¢˜?
      - å¦‚æœç”¨çš„æ˜¯ python çš„ Milvus Clientï¼Œcreate_collection å¦‚æœæ²¡è¾“å…¥ index param æ˜¯ä¸ä¼š load åˆ°å†…å­˜é‡Œçš„.
      - å¦‚æœæ²¡æœ‰è®¾ç½®è¿™ä¸ªå‚æ•°ï¼Œä½ å¯ä»¥å•ç‹¬è°ƒç”¨create_index()å’Œload_collection()æ¥å£
    - æŠŠæ–‡ä»¶ä¸Šä¼ åˆ°S3ä¸Šï¼Œç„¶åæŠŠè·¯å¾„ä¼ ç»™milvusè®©å®ƒå»è¯»å–å¹¶è§£æã€‚ä¼ è·¯å¾„çš„æ¥å£åœ¨pymilvusé‡Œå«utility.do_bulk_insert()
    - Query nodeåŠ è½½æ•°æ®åŸç† https://github.com/milvus-io/milvus/discussions/32698
      - æ¯ä¸ªcollectionæœ‰ä¸€æ ¹æ•°æ®ç®¡é“ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªquerynodeè´Ÿè´£ç®¡ç†è¿™æ ¹ç®¡é“ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºshard-leaderï¼Œå®ƒä»ç®¡é“ä¸­æ¥æ”¶æ¥è‡ªpulsarçš„æ•°æ®ï¼Œæ•°æ®ç§¯ç´¯åœ¨å†…å­˜é‡Œï¼Œç§°ä¸ºgrowing segmentï¼Œ
      - å½“æ•°æ®è¾¾åˆ°ä¸€å®šé‡ï¼Œæ¯”å¦‚ä¸€ç™¾å…†ï¼Œå°±æŠŠè¿™å—æ•°æ®è½ç›˜å˜æˆsealed segmentï¼Œå…¶ä»–çš„querynodeç­‰åŠ è½½sealed segmentã€‚
  - insert
    - [æ•°æ®æ’å…¥æµç¨‹](https://milvus.io/blog/a-day-in-the-life-of-milvus-datum.md)
      - Proxy Nodes and the Message Queue
        - send an _insert()_ request to a proxy node. Proxy nodes are the gateway between the user and the database system,
        - A hash function is applied to the itemâ€™s primary key to determine which channel to send it to. Channels, implemented with either Pulsar or Kafka topics
      - Data Nodes, Segments, and Chunks
        - insert_log
          - collection ID -> partition ID -> Segment ID -> Field ID -> Chunk ID
      - Sealing, Merging, and Compacting Segments
    - å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªinsertè¯·æ±‚
      - å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªinsertè¯·æ±‚ï¼Œmilvus serverçš„proxyæ¥åˆ°è¯·æ±‚ï¼ŒproxyæŠŠæ•°æ®è½¬å‘ç»™pulsar/kafkaï¼Œè½¬å‘å®Œä¹‹åå°±ç«‹åˆ»è¿”å›ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¯´insertå®Œæˆ
      - æ•°æ®è¿˜åœ¨kafkaé‡Œï¼Œç„¶åquerynode/datanodeéƒ½è¦å‘kafkaè®¢é˜…æ•°æ®ï¼Œè¿™é‡Œå°±æ˜¯å¼‚æ­¥çš„ã€‚kafkaå°±å¥½æ¯”milvusçš„WALç»„ä»¶ï¼Œä¿è¯æ’å…¥çš„æ•°æ®ä¸ä¸¢
    - auto_id
      - å»ºè¡¨æ—¶è®¾ç½®ä¸»é”®çš„auto_id=trueï¼Œä¸»é”®å°±ç”±milvusæ¥äº§ç”Ÿï¼Œæ‰€äº§ç”Ÿçš„ä¸»é”®æ•°å€¼ç¡®å®æ˜¯å¾€ä¸Šå¢çš„ï¼Œä½†è·Ÿé‚£ç§æ¯æ¬¡+1çš„é€’å¢ä¸ä¸€æ ·
      - è‡ªåŠ¨äº§ç”Ÿçš„ä¸»é”®å€¼æ˜¯åŸºäºæ—¶é—´æˆ³çš„ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼Œæ¯æ¬¡insertéƒ½ä¼šç”¨å½“å‰çš„æ—¶é—´æˆ³æ¥äº§ç”Ÿä¸€æ‰¹ä¸»é”®ï¼ŒåŒä¸€æ‰¹æ¬¡é‡Œçš„ä¸»é”®æ˜¯+1é€’å¢ã€‚ä½†ä¸åŒæ‰¹æ¬¡çš„ä¸»é”®çš„å€¼æœ‰å¯èƒ½æœ‰é—´éš”
    - insert_log
      - insert_logé‡Œçš„ä¸œè¥¿å°±æ˜¯æ¯ä¸ªè¡¨çš„åŸå§‹æ•°æ®ï¼ŒåŒ…æ‹¬å‘é‡æ•°æ®ï¼Œå„ä¸ªå­—æ®µçš„æ•°æ®ã€‚åˆ†ç‰‡åˆå¹¶æ—¶ï¼Œæ—§çš„åˆ†ç‰‡æ•°æ®ä¸ä¼šç«‹åˆ»åˆ é™¤ï¼Œè¦ç­‰å¾…GCæœºåˆ¶å¤§çº¦2â€”3å°æ—¶ååˆ é™¤ã€‚
      - å¦‚æœåœæ­¢äº†æ•°æ®è¾“å…¥ï¼Œç­‰é‚£äº›æ—§çš„åˆ†ç‰‡éƒ½è¢«GCæ¸…ç†ä¹‹åï¼Œinsert_logçš„å¤§å°å°±æ˜¯çœŸå®çš„åŸå§‹æ•°æ®å¤§å°
      - å•ä¸ªsegmentå­˜æ”¾åœ¨minioé‡Œæ˜¯åˆ‡åˆ†æˆå¾ˆå¤šä¸ªå°æ–‡ä»¶çš„ï¼Œinsert_logç›®å½•ä¸‹ä¾æ¬¡æŒ‰collection/partition/segment/field å±‚çº§ï¼Œä½ ä¼šçœ‹åˆ°æ¯ä¸ªfieldç›®å½•ä¸‹é¢æœ‰è‹¥å¹²ä¸ªå°æ–‡ä»¶ï¼Œé‚£äº›å°±æ˜¯binlogæ–‡ä»¶
      -  delta logæ˜¯deleteæ“ä½œäº§ç”Ÿçš„æ–‡ä»¶ï¼Œè®°å½•çš„ä¸»è¦æ˜¯é‚£äº›è¦è¢«åˆ é™¤æ•°æ®çš„idã€‚delta logè·Ÿinsert logæ— æ‰€è°“ä»€ä¹ˆå…ˆåï¼Œä¸€ä¸ªæ˜¯delete/upsertæ“ä½œäº§ç”Ÿï¼Œå¦ä¸€ä¸ªæ˜¯insertäº§ç”Ÿ
      - stats logä¸»è¦åŒ…å«bloom flterçš„æ•°æ®å’Œä¸€äº›ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸æ˜¯ç”±å¤–éƒ¨æ“ä½œäº§ç”Ÿï¼Œè€Œæ˜¯å†…éƒ¨ç”Ÿæˆ
    - milvusè·Ÿå®¢æˆ·ç«¯ä¹‹é—´çš„rpcè¯·æ±‚ï¼Œé»˜è®¤å•æ¬¡ä¼ è¾“çš„æ•°æ®ä¸Šé™æ˜¯64MB.
      - å‡è®¾æ¯è¡Œåªæœ‰ä¸€æ¡å‘é‡åŠ ä¸€ä¸ªidï¼Œå‘é‡ç»´åº¦æ˜¯512ï¼Œé‚£ä¹ˆæ¯æ¡å‘é‡æ˜¯2048å­—èŠ‚ï¼ŒåŠ ä¸Šidæ˜¯2056å­—èŠ‚ã€‚64MBé™¤ä»¥2056å°±æ˜¯å¤§çº¦çš„è¡Œæ•°
    - Proxyä¹Ÿå¯ä»¥åšå¤šå‰¯æœ¬çš„ã€‚
      - Milvusé‡Œé¢æ²¡æœ‰è‡ªå¸¦LoadBalancerï¼Œéœ€è¦å’±ä»¬è‡ªå·±åšä¸€ä¸ªï¼Œä¸ç„¶æ‰©å±•proxyèŠ‚ç‚¹è¿˜æ˜¯åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æœ‰è´Ÿè½½ã€‚è¿™ä¸ªlb å¯ä»¥é€šè¿‡kubernetes æ¥å®ç°çš„ï¼Œå¯ä»¥é€šè¿‡service å’Œingress
    - [Clearing Up Misconceptions about Data Insertion Speed in Milvus](https://zilliz.com/blog/clear-up-misconceptions-about-data-insertion-speed-in-milvus)
      - around 97% of the "Milvus insert" time observed in LangChain or LlamaIndex is spent on embedding generation, while about 3% is spent on the actual database insertion step
    - bulkinsertè¦æ±‚æŠŠæ–‡ä»¶ä¸Šä¼ åˆ°è¯¥milvusæ‰€ä½¿ç”¨çš„minioçš„bucketé‡Œã€‚é»˜è®¤çš„standalone milvusä¼šå¸¦ä¸€ä¸ªminio containerï¼Œå®ƒæ‰€ä½¿ç”¨çš„bucket nameæ˜¯ç”±milvus.yamlé…ç½®ï¼Œé»˜è®¤åæ˜¯a-bucketã€‚
      - æ‰€ä»¥ï¼Œè¦å…ˆæŠŠæ–‡ä»¶ä¸Šä¼ åˆ°è¯¥minioå®¹å™¨é‡Œa-bucketä¹‹ä¸‹
  - milvusçš„é›†ç¾¤çƒ­å¤‡æ–¹æ¡ˆï¼Œå¯ä»¥çœ‹ä¸‹github.com/zilliztech/milvus-cdc 
    - milvus backupæ˜¯å…ˆè°ƒç”¨milvusçš„ä¸€ä¸ªæ¥å£å»å¾—çŸ¥æŸä¸ªcollectionä¸‹é¢æœ‰å“ªäº›segmentï¼Œç„¶åä»etcdé‡Œæ‹¿åˆ°è¿™äº›segmentåœ¨s3ä¸Šçš„è·¯å¾„ï¼ŒåŒæ—¶é€šè¿‡æ¥å£æ‹¿åˆ°è¯¥è¡¨çš„schema
    - æ¥ç€æŠŠs3ä¸Šçš„segment æ–‡ä»¶æ‹·è´åˆ°å¤‡ä»½ç›®å½•é‡Œï¼ŒæŠŠè¯¥è¡¨çš„schemaå­˜è¿›ä¸€ä¸ªjsonæ–‡ä»¶é‡Œä¹Ÿæ”¾åœ¨å¤‡ä»½ç›®å½•ä¸‹ã€‚milvusæ˜¯ä¸ªé“¶è¡Œï¼Œetcdæ˜¯è´¦æœ¬ï¼Œs3æ˜¯é‡‘åº“
  - milvusé‡Œä¸»è¦æœ‰ä¸¤ç§æ•°æ®ï¼Œä¸€ç§æ˜¯å…ƒæ•°æ®å­˜åœ¨etcdï¼Œå¦ä¸€ç§æ˜¯æ•°æ®æ–‡ä»¶å­˜åœ¨minio (å…ƒæ•°æ®å­˜åœ¨etcdï¼Œæ•°æ®æ–‡ä»¶å­˜åœ¨minio/s3; å°±å¥½æ¯”etcdé‡Œå­˜ç€è´¦æœ¬ï¼Œminioé‡Œå­˜ç€é’ç¥¨)
    - æ•°æ®æ˜¯åˆ†ç‰‡ç®¡ç†ï¼Œä¸»è¦æœ‰ä¸¤ç§åˆ†ç‰‡(segment)
      - ä¸€ç§æ˜¯growing segmentï¼Œè´Ÿè´£æ¥æ”¶æ–°æ’å…¥çš„æ•°æ®ï¼Œæ²¡æœ‰ç´¢å¼•ï¼Œæœç´¢æ—¶æš´æœ(åœ¨æœ€æ–°çš„ç‰ˆæœ¬é‡Œæä¾›äº†ä¸´æ—¶ç´¢å¼•ï¼Œivfï¼Œè¶…è¿‡å‡ åƒæ¡æ•°æ®æ—¶å¼€å§‹ç”Ÿæ•ˆ)
      - å¦ä¸€ç§æ˜¯sealed segmentï¼Œæ•°æ®æ˜¯å›ºå®šçš„ï¼Œä¸æ¥å—æ–°æ•°æ®ï¼Œæ¯ä¸ªsealedåˆ†ç‰‡å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„ç´¢å¼•ï¼Œå»ºç«‹ç´¢å¼•çš„è¿‡ç¨‹å°±æ˜¯trainï¼Œivfç´¢å¼•æ˜¯è¿­ä»£è‹¥å¹²æ¬¡å¾—åˆ°nlistä¸ªcluster
    - ç‰©ç†æ–‡ä»¶åˆ é™¤ï¼Ÿè¿™ä¸ªéœ€è¦æ•°æ®æ–‡ä»¶ï¼ˆsegmentï¼‰ ä¸Šçš„æ•°æ®éƒ½å¤±æ•ˆæ‰èƒ½åˆ æ‰ã€‚è€Œsegmentå¤±æ•ˆï¼Œè¦ä¹ˆæ˜¯ä¸Šé¢çš„æ•°æ®å…¨è¢«deleteï¼Œè¦ä¹ˆæ˜¯è¢«compactã€‚
      - ä¸è¦æœŸæœ›ç‰©ç†æ–‡ä»¶åœ¨åˆ é™¤åç«‹å³ç¼©å°ã€‚è¢«åˆ é™¤çš„é‡è¦è¾¾åˆ°ä¸€å®šé‡æ‰è¡Œï¼Œæ¯”å¦‚æŸä¸ªsegmenté‡Œè¢«åˆ é™¤çš„æ•°æ®è¾¾åˆ°äº†10%ä»¥ä¸Šï¼Œæ‰ä¼šè§¦å‘ä¸€ä¸ªåŠ¨ä½œæŠŠè¿™10%çš„æ•°æ®çœŸæ­£åœ°ä»ç£ç›˜ä¸Šæ¸…é™¤ã€‚
      - æ¸…é™¤çš„æµç¨‹æ˜¯ï¼šç”¨é‚£90%çš„æ•°æ®æ„å»ºä¸€ä¸ªæ–°çš„segmentï¼Œç„¶åæŠŠæ—§çš„segmentæ ‡è®°ä¸ºåˆ é™¤ï¼Œç­‰å¾…åƒåœ¾æ¸…ç†æœºåˆ¶åšæœ€ç»ˆæ¸…é™¤ã€‚
    - milvusçš„æ–‡ä»¶æ ¼å¼æ˜¯åœ¨parquetæ ¼å¼å¤–é¢åŒ…äº†ä¸€å±‚ï¼Œå¤–éƒ¨å·¥å…·æ²¡æ³•ç›´æ¥è¯»çš„
    - nfs ä¸èƒ½åšä¸šåŠ¡å­˜å‚¨
      - nfsæ²¡æœ‰å®Œå…¨å®ç°posix æ–‡ä»¶è¯­ä¹‰ã€‚ä¸€æ—¦ä¸€ä¸ªç³»ç»Ÿæœ‰å¤§é‡çš„æ–‡ä»¶åˆ é™¤ï¼Œæ–‡ä»¶é‡å‘½åçš„è¯·æ±‚ï¼Œnfså°±ä¼šå‡ºæ•…éšœã€‚nfsï¼Œåªèƒ½åšè¿½åŠ ï¼Œæ–°å»ºçš„å’Œå°è§„æ¨¡çš„æ–‡ä»¶åˆ é™¤ã€‚è€Œä¸”åˆ äº†ä»¥åæœ€å¥½å°±æ˜¯å†ä¹Ÿä¸ç®¡äº†
      - å¦‚æœæŠŠä¸šåŠ¡æ•°æ®åº“æ”¾åˆ°nfsè¿™ç§ç³»ç»Ÿï¼Œåªèƒ½è·‘è·‘1-2 tpsè¿™ç§demoã€‚ååä½
    - å¯¹äºstandalone çš„milvusæ¥è¯´ï¼Œrdb_dataé‡Œå­˜æ”¾çš„æ•°æ®å°±ç›¸å½“äºwrite-ahead-logï¼Œå°±ç­‰åŒäºclusterçš„milvuså­˜æ”¾åœ¨pulsaré‡Œçš„æ•°æ®
      - æ‰€æœ‰çš„insertè¯·æ±‚éƒ½ä¼šè¢«å…ˆå­˜å…¥rdb_dataã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æ’å…¥å¤šå°‘æ•°æ®ï¼Œrdb_dataé‡Œé¢å°±æœ‰å¤šå°‘æ•°æ®
      - rdb_dataé‡Œçš„æ•°æ®ç”±milvus.yamlé‡Œçš„rockmq.retentionTimeInMinutesæ§åˆ¶ï¼Œé»˜è®¤æ˜¯ä¿ç•™3å¤©rdb_dataé‡Œä¸»è¦æ˜¯walï¼Œè¿˜æœ‰äº›time tickets messageï¼Œåˆ æ‰é—®é¢˜ä¸å¤§
  - Knowhere æ˜¯ Milvus çš„å†…éƒ¨æ ¸å¿ƒå¼•æ“ï¼Œè´Ÿè´£å‘é‡æœç´¢ï¼Œæ˜¯åŸºäºè¡Œä¸šæ ‡å‡†å¼€æºåº“ï¼ˆå¦‚ Faissã€DiskANN å’Œ hnswlib ç­‰ï¼‰çš„å¢å¼ºç‰ˆæœ¬
    - Knowhere å±äºå¼€æºï¼Œå…¶éƒ¨ç½²ç¯å¢ƒæ›´å¤šæ ·ï¼Œå¯åœ¨æ‰€æœ‰ä¸»æœºç±»å‹ä¸Šè¿è¡Œ
    - Knowhere ä¾èµ–äº OSS åº“ï¼ˆå¦‚ Faissã€DiskANN å’Œ hnswlibï¼‰
    - milvusçš„ivfsq8ï¼Œå®é™…ç”¨çš„å°±æ˜¯faissçš„IndexIvfScalarQuantizer
    - [HNSWlib](https://zilliz.com/learn/learn-hnswlib-graph-based-library-for-fast-anns)
      - HNSWlib is a library for vector search. It implements the HNSW algorithm, which creates a hierarchical graph structure for efficient similarity search in high-dimensional spaces.
  - [å¤šç§Ÿæˆ·](https://mp.weixin.qq.com/s/3QV7xjJ4G7MUxKOb0T427Q)
    - to B å¤§å‹çŸ¥è¯†åº“ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ºæ¯ä¸ªç§Ÿæˆ·æä¾›ä¸€åˆ°å¤šä¸ª Databaseï¼Œä»¥æ»¡è¶³æ•°æ®è§„æ¨¡åŠçŸ¥è¯†åº“æ„å»ºçµæ´»åº¦çš„éœ€è¦
    -  to C å¯¹è¯ä¸Šä¸‹æ–‡çš„æ•°æ®éš”ç¦»ï¼Œä¸€èˆ¬ä¼šé€‰æ‹©åœ¨ Colletionï¼Œæˆ– Partition Key è¿™ä¸¤å±‚å®ç°ã€‚Partition Key æ˜¯é€»è¾‘ä¸Šçš„è¡¨å†…éš”ç¦»,  Partition Key ç†è§£ä¸ºä¸€ä¸ª Hash åˆ†æ¡¶çš„è¿‡ç¨‹
      - ä¸€ä¸ªå¿«é€Ÿçš„é€‰å‹åŸåˆ™æ˜¯ï¼šå¦‚æœä½ çš„ç”¨æˆ·æ•°é‡åœ¨å‡ åƒæˆ–ä¸‡è¿™ä¸ªé‡çº§ï¼Œä½ å¯ä»¥è€ƒè™‘ä¸ºæ¯ä¸ªç”¨æˆ·åˆ†é…ä¸€ä¸ª Collectionï¼›å¦‚æœä½ çš„ç”¨æˆ·æ•°é‡åœ¨å‡ ç™¾ä¸‡ç”šè‡³ä¸Šåƒä¸‡è¿™ä¸ªé‡çº§ï¼Œä½ åº”è¯¥è€ƒè™‘ä¸ºæ¯ä¸ªç”¨æˆ·åˆ†é…ä¸€ä¸ª Partition Keyã€‚
      - é‡‡ç”¨ partition key æ–¹æ¡ˆè¿›è¡Œæ•°æ®éš”ç¦»ï¼ŒMilvus æä¾›äº† mmap æœºåˆ¶è¿›è¡Œå†·çƒ­æ•°æ®å‘å¤šå±‚å­˜å‚¨çš„æ˜ å°„ã€‚
      - Milvus è¿˜æä¾›äº†é€»è¾‘å±‚çš„æ˜¾å¼æ•°æ®åŠ è½½/é‡Šæ”¾èƒ½åŠ›ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ load/release è¿™å¯¹æ“ä½œï¼Œåœ¨ä¸šåŠ¡å±‚æ§åˆ¶æ˜¯å¦å°†ä¸€ä¸ªéæ´»è·ƒç”¨æˆ·çš„ collection åœ¨å†…å­˜ä¸Šé‡Šæ”¾ï¼Œæˆ–å°†ä¸€ä¸ªå›å½’æ´»è·ƒçš„ç”¨æˆ·çš„ collection ä»ç£ç›˜åŠ è½½è‡³å†…å­˜
      - åœ¨ mmap æœºåˆ¶ä¸­ï¼Œæ•°æ®ä»ç£ç›˜åˆ°å†…å­˜çš„ç§»åŠ¨è¿‡ç¨‹åº”ç”¨ä¾§æ˜¯ä¸æ„ŸçŸ¥çš„ï¼Œè€Œ load/release åœ¨åº”ç”¨ä¾§å¿…é¡»æ„ŸçŸ¥
    - [å¤šç§Ÿæˆ·å®è·µ](https://mp.weixin.qq.com/s/YpQ1TkJx9H6tawzvqstHCw)
  - attu
    -  attué‡Œæ˜¾ç¤ºçš„approx entities numberç›¸å½“äºç”¨pymilvusçš„collection.num_entitiesè·å–è¡Œæ•°ï¼Œè¿™ä¸ªæ˜¯ä»etcdä¸­å¿«é€Ÿç»Ÿè®¡å·²è½ç›˜çš„è¡Œæ•°ã€‚åŠ è½½åœ¨å†…å­˜é‡Œçš„æ•°é‡æœ‰å¯èƒ½ä¸ä¸€æ ·ï¼Œå› ä¸ºæœ‰äº›æ•°æ®å¯èƒ½æ²¡è½ç›˜
  - ç¼–è¯‘
    - ç¼–è¯‘å¯ä»¥çœ‹çœ‹milvus repoä¸‹çš„DEVELOPMENT.md, å¯ä»¥å»github milvus disscusionsé‡Œæœç´¢compileå…³é”®å­—çœ‹åˆ«äººéƒ½è¸©äº†å“ªäº›å‘
    - è¦ç¼–è¯‘å’Œåˆ›å»ºmilvusé•œåƒï¼Œå‚è€ƒè¿™ä¸ªå¸–å­ï¼šhttps://github.com/milvus-io/milvus/discussions/31043
    - ç¼–è¯‘milvusæºç çš„ï¼Œåœ¨è¿è¡Œstart_standalone.shä¹‹å‰ï¼Œå…ˆåšä¸¤ä»¶äº‹ï¼šä¸€æ˜¯æ”¹configs/milvus.yamlé‡Œé…ç½®é¡¹ï¼ŒæŠŠæ‰€æœ‰å¸¦æœ‰/var/libè·¯å¾„çš„æ›¿æ¢ä¸ºä¸€ä¸ªä½ æœºå™¨ä¸Šåˆæ³•çš„è·¯å¾„ï¼Œæ¯”å¦‚/tmp/milvusã€‚
      - äºŒæ˜¯è¿›å…¥development/docker/devç›®å½•è¿è¡Œdocker-compose up -d ä»¥å¯åŠ¨etcdæœåŠ¡å’ŒminioæœåŠ¡
    - ä¸ºäº†å°½é‡é™ä½ç¯å¢ƒå› ç´ çš„å½±å“ï¼Œå¯ä»¥å°è¯•åœ¨dockeré‡Œå»ç¼–è¯‘ï¼šhttps://github.com/milvus-io/milvus/blob/master/build/README.md
  - [Cardinal æœç´¢å¼•æ“](https://mp.weixin.qq.com/s/4xx2U8Xyr1RetTkMtRrxyw)
    - Cardinal æ˜¯ç”¨ç°ä»£ C++ è¯­è¨€å’Œå®ç”¨çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆANNSï¼‰ç®—æ³•æ„å»ºçš„å¤šçº¿ç¨‹ã€é«˜æ•ˆç‡å‘é‡æœç´¢å¼•æ“ï¼Œ å°†æœç´¢å¼•æ“çš„æ€§èƒ½æ¯”åŸæ¥æå‡äº† 3 å€ï¼Œæœç´¢æ€§èƒ½ï¼ˆQPSï¼‰æ˜¯ Milvus çš„ 10 å€
    - åŒæ—¶èƒ½å¤Ÿå¤„ç†æš´æœè¯·æ±‚å’Œ ANNS ç´¢å¼•ä¿®æ”¹è¯·æ±‚ï¼›å¤„ç†å„ç§æ•°æ®æ ¼å¼ï¼ŒåŒ…æ‹¬ FP32ã€FP16 å’Œ BF16;æ‰§è¡Œç´¢å¼• Top-K å’Œç´¢å¼•èŒƒå›´æœç´¢ï¼ˆRange Searchï¼‰;ä½¿ç”¨å†…å­˜ä¸­æ•°æ®æˆ–æä¾›åŸºäºå†…å­˜ã€ç£ç›˜å’Œ MMap ç­‰ä¸åŒæ–¹å¼çš„ç´¢å¼•
    - Cardinal åˆ©ç”¨ x86 çš„ AVX-512 æ‰©å±•å’Œ ARM çš„ NEON åŠ SVE æŒ‡ä»¤é›†ç­‰å°–ç«¯æŠ€æœ¯ï¼Œæä¾›é’ˆå¯¹é«˜æ•ˆè®¡ç®—ä¼˜åŒ–çš„ä»£ç 
    - å®ƒå¼•å…¥äº† AUTOINDEX æœºåˆ¶ï¼Œè‡ªåŠ¨é€‰æ‹©é€‚åˆäºæ•°æ®é›†æœ€ä½³çš„æœç´¢ç­–ç•¥å’Œç´¢å¼•ã€‚å¼€å‘è€…æ— éœ€æ‰‹åŠ¨è°ƒä¼˜ï¼Œèƒ½å¤ŸèŠ‚çœæ—¶é—´å’Œç²¾åŠ›
    - å†…éƒ¨ç®—æ³•
      - æœç´¢ç®—æ³•ï¼ŒåŒ…æ‹¬åŸºäº IVF å’ŒåŸºäºå›¾çš„æ–¹æ³• 
      - å¸®åŠ©æœç´¢ä¿æŒæ‰€éœ€å¬å›ç‡çš„ç®—æ³•ï¼Œä¸è®ºè¿‡æ»¤æ ·æœ¬çš„ç™¾åˆ†æ¯”å¦‚
      - æ›´é«˜æ•ˆçš„ Best-First æœç´¢ç®—æ³•è¿­ä»£æ–¹
      - å®šåˆ¶äº†ä¼˜å…ˆé˜Ÿåˆ—æ•°æ®ç»“æ„ä¸­çš„ç®—æ³•
  - misc
    - [Milvus æ•°æ®ä» A é›†ç¾¤ï¼ˆK8Sé›†ç¾¤ï¼‰è¿åˆ° B é›†ç¾¤ï¼ˆK8Sé›†ç¾¤](https://mp.weixin.qq.com/s/INvX-BVEtkchz6gFB7Ni9Q)
    - æ•°æ®ç®¡ç†
      - Migration made easy: Move data between platforms with Vector Transport Service (VTS), whether from Elastic/Pinecone/Qdrant or between Milvus deployments
      - Reliable backup: Use milvus-backup tool (https://milvus.io/docs/milvus_backup_overview.md) for creating snapshots on permanent storage and restore for data rollback or disaster recovery.
      - Data replication: To reach higher availability in production. You can also implement your hot-cold cluster setup with Milvus CDC (https://milvus.io/docs/milvus-cdc-overview.md).
    - ä¼°ç®—å®¹é‡
      - 5ç™¾ä¸‡128ç»´ï¼ŒåŸå§‹æ•°æ®é‡å¤§çº¦æ˜¯2.5gï¼Œå·¥å…·ä¼°ç®—æ—¶ä¼šä¹˜ä»¥ä¸€ä¸ªå®‰å…¨ç³»æ•°ï¼Œè¿™ä¸ªç³»æ•°ä¸€èˆ¬æ˜¯2åˆ°3ä¹‹é—´ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°çš„Loading Memoryæ˜¯5Gå¤šç‚¹
      - å·¥å…·æ˜¯æŒ‰clusterä¼°çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ç»™äº†æ¨èï¼Œå¦‚æœä¸ç®—etcd/minio/plasarè¿™äº›çš„è¯ï¼Œmilvusçš„èŠ‚ç‚¹çš„æ¨èå†…å­˜é…ç½®å¤§çº¦æ€»å…±27. 5g  etcdæ¨è3*4gï¼Œminioæ¨è2*8gï¼Œpulsarçš„æ¯”è¾ƒå¤šï¼Œå› ä¸ºå®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ æ‰€ä»¥å¦‚æœ500ä¸‡128ç»´çš„å‘é‡å…¶å®å¿…è¦ç”¨clusterï¼Œä¸€ä¸ªstandaloneå°±å¥½äº†
    - https://github.com/zilliztech/vts è¿ç§»ç”¨è¿™ä¸ªå·¥å…·
    - milvusçš„æ£€ç´¢ç­–ç•¥è¿™é‡Œçš„çŸ­è¯å’Œé•¿å¥çš„æƒé‡é€‚é…ç­–ç•¥æ˜¯æ€ä¹ˆåš
      - ç®€å•çš„æ–¹æ³•å°±æ˜¯æ ¹æ®ç”¨æˆ· query æ¥çš„é—®é¢˜åˆ†è¯çš„é•¿åº¦æ¥è®¡ç®—ï¼Œæ¯”å¦‚é•¿åº¦å°äº3ï¼ŒBM25 è¿™ä¸€è·¯çš„åˆ†æ•°ç»™ 0.7ï¼Œdense ç»™ 0.3ï¼›å¦‚æœé—®é¢˜é•¿åº¦é•¿ï¼Œåˆ†æ•°å°±å€¾å‘äº denseï¼›æœ€åæ ¹æ®ä¸šåŠ¡å¬å›å‡†ç¡®ç‡æ¥è°ƒæ•´è¿™é‡Œçš„å‚æ•°å®šä¹‰
    - [Milvus SDK v2 ](https://mp.weixin.qq.com/s/VXupxtWpiC1XIgbswdt3Og)
    - Milvuså¦‚ä½•å®ç°æ— æ„Ÿæ‰©å®¹è‡ªåŠ¨åˆ†ç‰‡
      - Milvus åˆ©ç”¨ Kubernetes å’Œå­˜ç®—åˆ†ç¦»æ¶æ„æ¥æ”¯æŒæ— ç¼æ‰©å±•ä¸åŠ¨æ€èµ„æºåˆ†é…
      - å…¶ä¸€ï¼ŒåŸºäºSegmentçš„æ¶æ„ï¼šåœ¨æ ¸å¿ƒä¸Šï¼ŒMilvus å°†æ•°æ®ç»„ç»‡æˆâ€œSegmentâ€â€”â€”æ•°æ®ç®¡ç†çš„æœ€å°å•ä½ï¼š
        - Growing Segmentä½äºStreamNodesä¸Šï¼Œä¼˜åŒ–å®æ—¶æŸ¥è¯¢çš„æ•°æ®æ–°é²œåº¦
        - Sealed Segment ç”±QueryNodesç®¡ç†ï¼Œåˆ©ç”¨å¼ºå¤§çš„ç´¢å¼•åŠ é€Ÿæœç´¢
        - è¿™äº›Segmentåœ¨èŠ‚ç‚¹ä¹‹é—´å‡åŒ€åˆ†å¸ƒï¼Œä»¥ä¼˜åŒ–å¹¶è¡Œå¤„ç†
      - å…¶äºŒï¼ŒåŒå±‚è·¯ç”±ï¼šä¸ä¼ ç»Ÿæ•°æ®åº“ä¸­æ¯ä¸ªåˆ†ç‰‡ä½äºå•ä¸ªæœºå™¨ä¸Šä¸åŒï¼ŒMilvus å°†ä¸€ä¸ªShardä¸­çš„æ•°æ®åŠ¨æ€åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼š
        - æ¯ä¸ªShardå¯ä»¥å­˜å‚¨è¶…è¿‡ 10 äº¿ä¸ªæ•°æ®ç‚¹
        - æ¯ä¸ªShardä¸­çš„Segmentå¯ä»¥è·¨æœºå™¨è‡ªåŠ¨å¹³è¡¡
        - æ‰©å±•é›†åˆå°±åƒæ‰©å±•Shardæ•°é‡ä¸€æ ·ç®€å•
        - å³å°†æ¨å‡ºçš„ Milvus 3.0 å°†å¼•å…¥åŠ¨æ€Shardæ‹†åˆ†ï¼Œç”šè‡³å°†è¿™ä¸€æœ€å°çš„æ‰‹åŠ¨æ­¥éª¤ä¹Ÿå–æ¶ˆ
      - è€Œåº”å¯¹å¤§è§„æ¨¡æŸ¥è¯¢æ—¶ï¼ŒMilvus æ•´ä½“éµå¾ªä»¥ä¸‹çš„è¿‡ç¨‹ï¼š
        - Proxyè¯†åˆ«è¯·æ±‚collectionçš„ç›¸å…³Shard
        - Proxyä»StreamNodeså’ŒQueryNodesæ”¶é›†æ•°æ®
        - StreamNodes å¤„ç†å®æ—¶æ•°æ®ï¼Œè€ŒQueryNodes åŒæ—¶å¤„ç†å†å²æ•°æ®ã€‚ ç»“æœè¢«èšåˆå¹¶è¿”å›ç»™ç”¨æˆ·
    - [Zilliz Cloud å»ºè¡¨åŠŸèƒ½å‡çº§](https://mp.weixin.qq.com/s/FuVzdn1cQCIsuML41lop0A)
      - å…¨é¢æ”¯æŒå…¨æ–‡æ£€ç´¢ä¸æ–‡æœ¬åŒ¹é…
        â€¢ åœ¨ç•Œé¢ä¸­å¯ç›´æ¥å¯ç”¨å…¨æ–‡æ£€ç´¢ï¼ˆTerm Searchï¼‰å’Œæ–‡æœ¬åŒ¹é…ï¼ˆTerm Matchï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨ç»„åˆå­—æ®µä¸å‡½æ•°ã€‚
        â€¢ ç”¨æˆ·åªéœ€é€‰å®š VARCHAR åˆ—å¹¶é…ç½®è§£æå™¨ï¼ˆStandard æˆ– Customï¼‰ï¼Œä¾¿èƒ½äº«å—è‡ªåŠ¨ç”Ÿæˆç¨€ç–å‘é‡çš„å…¨æ–‡æ£€ç´¢èƒ½åŠ›ã€‚
        â€¢ æä¾›å¯è§†åŒ–ç¤ºä¾‹ä»£ç ï¼Œä¾¿äºå¿«é€Ÿä¸Šæ‰‹å¹¶å¹³æ»‘åˆ‡æ¢åˆ° SDK æ–¹å¼ã€‚
      - Partition ä¸ Partition Key æ¦‚å¿µæ¾„æ¸…
        - â€¢ Partition ä¸ºåŒä¸€ Collection çš„ç‰©ç†å­é›†ï¼ŒPartition Key åˆ™åœ¨è¶…å¤šç§Ÿæˆ·åœºæ™¯ä¸‹é€šè¿‡æ ‡é‡åˆ—è¿›è¡Œæ•°æ®éš”ç¦»ã€‚
        - â€¢ å…¨æ–°ç‹¬ç«‹åˆ†åŒºç®¡ç†é¡µé¢ï¼Œå¯åˆ›å»ºå’Œé¢„è§ˆæ‰€æœ‰åˆ†åŒºï¼Œå¹¶æ”¯æŒå°†æ•°æ®ç›´æ¥å¯¼å…¥æŒ‡å®šåˆ†åŒºã€‚
        - â€¢ å½“å¯ç”¨ Partition Key æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç®¡ç†åˆ†åŒºï¼Œé¿å…é‡å¤æˆ–é”™è¯¯æ“ä½œã€‚
      - Mmap ç²¾ç»†åŒ–é…ç½®ï¼Œé‡Šæ”¾å†…å­˜æ½œåŠ›
        - â€¢ å…è®¸åœ¨é›†åˆçº§å’Œåˆ—çº§åˆ†åˆ«é’ˆå¯¹åŸå§‹æ•°æ®å’Œç´¢å¼•æ•°æ®æ‰‹åŠ¨å¼€å¯/å…³é—­ Mmapã€‚
        - â€¢ æä¾›å®æ—¶é¢„è§ˆåŠŸèƒ½ï¼Œä¿®æ”¹åªéœ€åœ¨é¡µé¢ä¸­è¿›è¡Œ Release Collection åå³å¯ç”Ÿæ•ˆã€‚
        - â€¢ æ˜ç¡®äº†å­—æ®µã€é›†åˆã€é›†ç¾¤çº§åˆ«çš„ Mmap ä¼˜å…ˆçº§ï¼Œå‡å°‘é…ç½®æ··æ·†å¸¦æ¥çš„æ€§èƒ½å½±å“ã€‚
      - æ”¯æŒ Nullable å’Œ Default Valueï¼Œç•Œé¢æ›´ç®€æ´
        - â€¢ é»˜è®¤éšè—ä¸å¸¸ç”¨çš„ Nullable ä¸ Default Value è®¾ç½®ï¼Œä»…åœ¨éœ€è¦æ—¶å±•å¼€ï¼Œé¿å…å¹²æ‰°é«˜é¢‘æ“ä½œã€‚
        - â€¢ æå‡å†™å…¥æ•°æ®çš„å®¹é”™èƒ½åŠ›ï¼Œç®€åŒ–å¯¹ä¸å®Œæ•´æˆ–åŠ¨æ€æ•°æ®çš„å¤„ç†ã€‚
      - å®Œæ•´ç´¢å¼•ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œæ–°å¢æ ‡é‡ç´¢å¼•
        - â€¢ æ–°ç‰ˆå»ºè¡¨æµç¨‹æ”¯æŒå‘é‡ç´¢å¼•å’Œæ ‡é‡ç´¢å¼•ç»Ÿä¸€ç®¡ç†ï¼Œå¹¶è®¾ç½®ä¸“é—¨çš„ç´¢å¼•ç®¡ç†é¡µé¢ã€‚
        - â€¢ å¯æ ¹æ®éœ€è¦æ–°å»ºã€åˆ é™¤ã€é¢„è§ˆä»»æ„ç´¢å¼•ï¼Œæ”¯æŒ JSON Path ç´¢å¼•ä»¥åŠ é€Ÿ JSON ä¸åŠ¨æ€å­—æ®µæŸ¥è¯¢ã€‚
      - Shard ä¸ Consistency Level é…ç½®å¯è§†åŒ–
        - â€¢ Shard æ± å¯æ°´å¹³æ‹†åˆ† Collection ä»¥æå‡å†™å…¥ååé‡ã€‚
        - â€¢ Consistency Level æ§åˆ¶è·¨å‰¯æœ¬æœ€æ–°æ•°æ®çš„å¯è§æ€§ï¼Œç•Œé¢æä¾›é»˜è®¤é…ç½®è§£é‡Šä¸ä¿®æ”¹å…¥å£ã€‚
        - â€¢ è®©ç”¨æˆ·åœ¨å»ºè¡¨æ—¶ä¾¿å¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè°ƒä¼˜ï¼Œå‡å°‘åæœŸæ”¹åŠ¨æˆæœ¬ã€‚
      - Dynamic Field å±•ç¤ºä¼˜åŒ–
        â€¢ å¯¹åŠ¨æ€å­—æ®µä¸å‘é‡/æ ‡é‡åˆ—è¿›è¡Œå¹¶åˆ—å±•ç¤ºï¼Œè¯´æ˜å®ƒæ˜¯â€œç‰¹æ®Šåˆ—â€å¹¶ä»‹ç»é€‚ç”¨åœºæ™¯ã€‚
        â€¢ é€‚ç”¨äºæ•°æ®ç»“æ„ä¸å›ºå®šä¸”éœ€è¦é¢‘ç¹æ–°å¢åˆ—çš„åœºæ™¯ï¼Œå¯éšæ—¶æ’å…¥æ–°å­—æ®µè€Œæ— éœ€æ”¹å˜ Schemaã€‚
  - [ä¼˜åŒ–](https://zilliz.com.cn/blog/milvus-%20community-keyword)
    - é™ä½å†…å­˜
      - ç‰ºç‰²æ€§èƒ½ - Mmap, DiskANN
      - ç‰ºç‰²ç²¾åº¦ - IVF_PQ, IVF_SQ8(åŸºäºFaiss)
    - åˆ†æ‰¹æ’å…¥æ•°æ®ï¼Œæ˜¯æ¯ä¸€æ‰¹ collection.flush()ï¼Œè¿˜æ˜¯æœ€åå† collection.flush()ï¼Ÿ
      - æ’å…¥æ•°æ®æ—¶ï¼Œä¸è¦æ¯ä¸€æ‰¹éƒ½è°ƒç”¨ flush()æ¥å£ï¼ŒMilvus å†…éƒ¨ä¼šå®šæœŸè°ƒ flush() æ¥å£ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ’å…¥å®Œæˆä¹‹åï¼Œå†è°ƒç”¨ä¸€æ¬¡ flush å³å¯
      - æ’å…¥æ•°æ®åï¼Œé¢‘ç¹è°ƒç”¨ flushï¼Œä¼šäº§ç”Ÿå¤§é‡ç¢çš„ segment æ–‡ä»¶ï¼Œä¸ºç³»ç»Ÿå¸¦æ¥è¾ƒå¤§çš„ compaction å‹åŠ›
    - è¿™ä¸ªè®¾ç½®æˆä¸»é”®ä¹‹åï¼Œä¸ºä»€ä¹ˆè¿˜å¯ä»¥ç»§ç»­é‡å¤æ’å…¥ç›¸åŒçš„å€¼ï¼Ÿ
      - Milvus ç”¨ insert æ¥å£åšæ•°æ®æ’å…¥æ—¶ï¼Œä¸ä¼šåšä¸»é”®å»é‡ï¼Œå¦‚æœå¸Œæœ›ä¸»é”®å»é‡ï¼Œå¯ä»¥ä½¿ç”¨ upsert æ¥å£
      - ä½†æ˜¯ï¼Œç”±äº upsert å†…éƒ¨å¤šåšäº†ä¸€æ¬¡ query æ“ä½œï¼Œæ’å…¥æ€§èƒ½ä¼šæ¯” insert æ›´å·®
      - å°† Upsert æ›¿ä»£ Insert ä½¿ç”¨ï¼Œè¿™ç±»æ“ä½œå¾€å¾€ä¼šå¯¼è‡´ç³»ç»Ÿæ”¶åˆ°å¤§é‡ä¸å­˜åœ¨ä¸»é”®çš„ Delete è¯·æ±‚ã€‚
      - åœ¨ Milvus ä¸­ï¼Œå¤„ç† Delete æ“ä½œæ—¶é€šå¸¸ä¼šå…ˆå€ŸåŠ© BloomFilter åˆ¤æ–­ä¸»é”®æ˜¯å¦å­˜åœ¨ï¼Œä»è€Œé¿å…æµªè´¹èµ„æºåœ¨ä¸ºä¸å­˜åœ¨çš„æ•°æ®è¿›è¡Œ Delete æ“ä½œ
      - åœ¨ç™¾ä¸‡çº§ segment åœºæ™¯ä¸‹ï¼ŒBloomFilter å¸¦æ¥çš„å†…å­˜æ¶ˆè€—æ˜¯å·¨å¤§çš„
      -  Milvus 2.5.8 ä¸­æˆ‘ä»¬åšå‡ºè°ƒæ•´ï¼šDataNode ä¸å†å°† BloomFilter åŠ è½½è‡³å†…å­˜ï¼Œæ‰€æœ‰ Delete è®°å½•ç›´æ¥æŒä¹…åŒ–åˆ°åº•å±‚å¯¹è±¡å­˜å‚¨ã€‚
      - å³ä¾¿ Delete çš„ä¸»é”®åœ¨å½“å‰æ•°æ®ä¸­ä¸å­˜åœ¨ï¼Œä¹Ÿä¸å†è¿›è¡Œè¿‡æ»¤ï¼Œè€Œæ˜¯äº¤ç”±åç»­é˜¶æ®µç»Ÿä¸€å¤„ç† æœ€ç»ˆä¸€è‡´æ€§ç”± Compaction æœºåˆ¶ä¿è¯
    - Support partial upsert feature https://github.com/milvus-io/milvus/issues/29735
    - åŠæ•°ä½¿ç”¨é—®é¢˜æ˜¯é…ç½®é—®é¢˜
      - æ€ä¹ˆè°ƒï¼Ÿ https://mp.weixin.qq.com/s?__biz=MzUzMDI5OTA5NQ==&mid=2247496778&idx=1&sn=018256ae415356e3ed357ee473dc1627&chksm=fa5155f2cd26dce4095b57fa4eb5c7e67e9eb49ed2762ce618e1134bb33022049e75c25e49ab&scene=21#wechat_redirect
      - Milvus ä» 2.3.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå°±å¼€å§‹æ”¯æŒåŠ¨æ€è°ƒæ•´å‚æ•°ï¼Œå…·ä½“æ“ä½œæ–¹æ³•å‚è€ƒï¼šhttps://milvus.io/docs/dynamic_config.md
    - [Performance Evaluation and Monitoring Metrics](https://zilliz.com/learn/how-to-spot-search-performance-bottleneck-in-vector-databases)
      - important evaluation metrics are Recall, Latency, and Queries Per Second (QPS).
      - Note
        - Grafana's Minimum Intervals Can Impact Performance Monitoring Results - Change Min interval to 15s
        - A NUMA-Design Machine Can Affect Milvusâ€™s Performance
      - The proxy can become the bottleneck if QPS is high and performs network-intensive tasks
        - you can simply scale the Proxy vertically (use more CPU/Memory on the host) or horizontally (add more Proxy pods with a Load Balancer at the front).
      - Performance is bounded by the CPU usage of QueryNode
        - An excessive number of QueryNodes can detract from performance due to the increased number of messages the delegator must handle.
      - IndexNote reaches 100% CPU usage
        - If possible, use bulk insert rather than insert vectors one by one. This reduces network transmissions and skips the process of "growing" the segments.
        - Ignore growing segments; pass ignore_growing in the search parameters like in https://milvus.io/docs/search.md.
        - Change consistency levels to Eventually in the search API call.
    - [å®šä½Milvusæ€§èƒ½ç“¶é¢ˆ](https://mp.weixin.qq.com/s/0q9PJi_pdOZKvjg_VrTivw)
      - å®¢æˆ·ç«¯æ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œè¯·è€ƒè™‘å¢åŠ è¯·æ±‚çš„æ•°é‡
        - æ£€æŸ¥å¹¶è°ƒæ•´å¯èƒ½é™åˆ¶æ•°æ®æµçš„ç½‘ç»œé™åˆ¶å™¨ã€‚
        - å¦‚æœæ‚¨ä½¿ç”¨ PyMilvusï¼š
          - a.åœ¨å¤šè¿›ç¨‹æ“ä½œä¸­ï¼Œé€‰æ‹©ä½¿ç”¨ spawn æ–¹æ³•è€Œé fork
          - b.åœ¨æ¯ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šå¯¼å…¥ from pymilvus import connectionsï¼Œç„¶åè¿è¡Œ connections.connect(args)ã€‚
        -  è¿›è¡Œæ°´å¹³æ‰©å±•â€”â€”å¢åŠ å®¢æˆ·ç«¯æ•°é‡ï¼Œç›´è‡³ QPS å€¼ç¨³å®š
      - å¸¦å®½
        - å¯ç”¨å‹ç¼© Milvus å„ç»„ä»¶é—´ä»¥åŠ Milvus ä¸ SDK å®¢æˆ·ç«¯é—´å®æ–½ gRPC å‹ç¼©
      - ç£ç›˜æ€§èƒ½
        - æ¨èä½¿ç”¨ NVMe SSDã€‚åœ¨ SATA SSD æˆ– HDD ä¸Šåˆ›å»ºå’Œæœç´¢ç£ç›˜ç´¢å¼•å¯èƒ½ä¼šå› ä¸º I/O æ“ä½œå—é™è€Œå¯¼è‡´è¾ƒå¤§çš„ Latency å’Œè¾ƒä½çš„ QPS
        - è™½ç„¶ EBS é‡‡ç”¨ NVMe é©±åŠ¨ï¼Œä½†å…¶æä¾›çš„ä½å»¶è¿Ÿä¼˜åŠ¿å¹¶ä¸åŠæœ¬åœ° NVMe SSDã€‚
    - [å¦‚ä½•ä¼˜åŒ– Milvus æ€§èƒ½](https://mp.weixin.qq.com/s/4gDsAF4QnmXWzomrSFRLLg)
      - Milvus ä¼šåˆ›å»º 256 ä¸ªæ¶ˆæ¯é˜Ÿåˆ— topicã€‚å¦‚æœè¡¨æ•°ç›®æ¯”è¾ƒå°‘ï¼Œå¯ä»¥è°ƒæ•´ rootCoord.dmlChannelNum å‡å°‘ topic æ•°ç›®é™ä½æ¶ˆæ¯é˜Ÿåˆ—è´Ÿè½½
      - æ¯ä¸ª collection ä¼šä½¿ç”¨ 2 ä¸ªæ¶ˆæ¯é˜Ÿåˆ— topicï¼ˆshardï¼‰ï¼Œå¦‚æœå†™å…¥éå¸¸å¤§æˆ–è€…æ•°æ®é‡æå¤§ï¼Œéœ€è¦è°ƒæ•´ collection çš„ shard æ•°ç›®
        - å»ºè®®æ¯ä¸ª shard å†™å…¥/åˆ é™¤ä¸è¶…è¿‡ 10M/sï¼Œå•ä¸ª shard çš„æ•°æ®é‡ä¸å¤§äº 1B å‘é‡ï¼Œshard æ•°ç›®è¿‡å¤§ä¹Ÿä¼šå½±å“å†™å…¥æ€§èƒ½ï¼Œå› æ­¤ä¸å»ºè®®å•è¡¨è¶…è¿‡ 8 ä¸ª shardã€‚
      - ä½¿ç”¨å¤šå‰¯æœ¬å¯ä»¥æ‰©å±•æŸ¥è¯¢æ€§èƒ½ï¼Œä½†å»ºè®®å‰¯æœ¬æ•°ç›®ä¸è¦è¶…è¿‡ 10 ä¸ª
      - ç´¢å¼•çš„é€‰æ‹©
        - æ˜¯å¦éœ€è¦ç²¾ç¡®ç»“æœ
          - åªæœ‰ Faiss çš„ Flat ç´¢å¼•æ”¯æŒç²¾ç¡®ç»“æœ, æŸ¥è¯¢æ€§èƒ½é€šå¸¸æ¯”å…¶ä»– Milvus æ”¯æŒçš„ç´¢å¼•ç±»å‹ä½ä¸¤ä¸ªæ•°é‡çº§ä»¥ä¸Šï¼Œå› æ­¤åªé€‚åˆåƒä¸‡çº§æ•°æ®é‡çš„å°æŸ¥è¯¢
        - æ•°æ®é‡æ˜¯å¦èƒ½åŠ è½½è¿›å†…å­˜ï¼Ÿ
          - [DiskANN](https://milvus.io/blog/diskann-explained.md)
            - DiskANN ä¾èµ–é«˜æ€§èƒ½çš„ç£ç›˜ç´¢å¼•ï¼Œå€ŸåŠ© NVMe ç£ç›˜ç¼“å­˜å…¨é‡æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­åªå­˜å‚¨äº†é‡åŒ–åçš„æ•°æ®ã€‚
            - DiskANN é€‚ç”¨äºå¯¹äºæŸ¥è¯¢ Recall è¦æ±‚è¾ƒé«˜ï¼ŒQPS ä¸é«˜çš„åœºæ™¯ã€‚
            - å…³é”®å‚æ•° search_list: search_list è¶Šå¤§ï¼Œrecall è¶Šé«˜è€Œæ€§èƒ½è¶Šå·®
            - DiskANN ç®—æ³•é¦–å…ˆæå‡ºäº†æ–°çš„å›¾ç»“æ„ Vamanaï¼ŒVamana å›¾ä¸ HNSWã€NSG å›¾ç±»ä¼¼
            - ä¸ºäº†è§„é¿å¤šæ¬¡éšæœºè¯»å†™ç£ç›˜æ•°æ®ï¼ŒDiskANN ç®—æ³•ç»“åˆä¸¤ç±»ç®—æ³•ï¼šèšç±»å‹ç¼©ç®—æ³•å’Œå›¾ç»“æ„ç®—æ³•
              - ä¸€æ˜¯é€šè¿‡å‹ç¼©åŸå§‹æ•°æ®ï¼Œä»…å°†å‹ç¼©åçš„ç è¡¨ä¿¡æ¯å’Œä¸­å¿ƒç‚¹æ˜ å°„ä¿¡æ¯æ”¾åˆ°å†…å­˜ä¸­ï¼Œè€ŒåŸå§‹æ•°æ®å’Œæ„å»ºå¥½çš„å›¾ç»“æ„æ•°æ®å­˜æ”¾åˆ°ç£ç›˜ä¸­ï¼Œåªéœ€åœ¨æŸ¥è¯¢åŒ¹é…åˆ°ç‰¹å®šèŠ‚ç‚¹æ—¶åˆ°ç£ç›˜ä¸­è¯»å–
              - äºŒæ˜¯ä¿®æ”¹å‘é‡æ•°æ®å’Œå›¾ç»“æ„çš„æ’åˆ—æ–¹å¼ï¼Œå°†æ•°æ®ç‚¹ä¸å…¶é‚»å±…èŠ‚ç‚¹å¹¶æ’å­˜æ”¾ï¼Œè¿™ç§æ–¹å¼ä½¿å¾—ä¸€æ¬¡ç£ç›˜æ“ä½œå³å¯å®ŒæˆèŠ‚ç‚¹çš„å‘é‡æ•°æ®ã€é‚»æ¥èŠ‚ç‚¹ç­‰ä¿¡æ¯çš„è¯»å–
            -  Vamana, the core data structure behind DiskANN
              - Vamana's key concept is the relative neighborhood graph (RNG)
              - the key concept is that RNGs are constructed so that only a subset of the most relevant nearest edges are added for any single point in the graph
              - There are two main problems with RNGs that make them still too inefficient for vector search. 
                - The first is that constructing an RNG is prohibitively expensive  n^2
                - The second is that setting the diameter of an RNG is difficult
          - IVF_PQ
            - å¯¹äºç²¾ç¡®åº¦è¦æ±‚ä¸é«˜çš„åœºæ™¯æˆ–è€…æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ã€‚
            - [IVF å‚æ•°](https://mp.weixin.qq.com/s/BSPGfBNA2gw2_Wud8JobQA)
              - nlistï¼šä¸€èˆ¬å»ºè®® nlist = 4*sqrt(N)ï¼Œå¯¹äº Milvus è€Œè¨€ï¼Œä¸€ä¸ª Segment é»˜è®¤æ˜¯ 512M æ•°æ®ï¼Œå¯¹äº 128dim å‘é‡è€Œè¨€ï¼Œä¸€ä¸ª segment åŒ…å« 100w æ•°æ®ï¼Œå› æ­¤æœ€ä½³ nlist åœ¨ 1000 å·¦å³ã€‚
              - nprobeï¼šnprobe å¯ä»¥ Search æ—¶è°ƒæ•´æœç´¢çš„æ•°æ®é‡ï¼Œnprobe è¶Šå¤§ï¼Œrecall è¶Šé«˜ï¼Œä½†æ€§èƒ½è¶Šå·®
            - PQ å‚æ•°
              - mï¼šå‘é‡åš PQ çš„åˆ†æ®µæ•°ç›®ï¼Œä¸€èˆ¬å»ºè®®è®¾ç½®ä¸ºå‘é‡ç»´æ•°çš„ 1/4ï¼ŒM å–å€¼è¶Šå°å†…å­˜å ç”¨è¶Šå°ï¼ŒæŸ¥è¯¢é€Ÿåº¦è¶Šå¿«ï¼Œç²¾åº¦ä¹Ÿå˜å¾—æ›´åŠ ä½
              - nbitsï¼š æ¯æ®µé‡åŒ–å™¨å ç”¨çš„ bit æ•°ç›®ï¼Œé»˜è®¤ä¸º 8ï¼Œä¸å»ºè®®è°ƒæ•´
        -  æ„å»ºç´¢å¼•å’Œå†…å­˜èµ„æºæ˜¯å¦å……è¶³
          - æ€§èƒ½ä¼˜å…ˆï¼Œé€‰æ‹© HNSW ç´¢å¼•
            - HNSW å‚æ•°
              - Mï¼šè¡¨ç¤ºåœ¨å»ºè¡¨æœŸé—´æ¯ä¸ªå‘é‡çš„è¾¹æ•°ç›®ï¼ŒM è¶Šå¤§ï¼Œå†…å­˜æ¶ˆè€—è¶Šé«˜ï¼Œåœ¨é«˜ç»´åº¦çš„æ•°æ®é›†ä¸‹æŸ¥è¯¢æ€§èƒ½ä¼šè¶Šå¥½ã€‚é€šå¸¸å»ºè®®è®¾ç½®åœ¨ 8-32 ä¹‹é—´ã€‚
              - ef_constructionï¼šæ§åˆ¶ç´¢å¼•æ—¶é—´å’Œç´¢å¼•å‡†ç¡®åº¦ï¼Œef_construction è¶Šå¤§æ„å»ºç´¢å¼•è¶Šé•¿ï¼Œä½†æŸ¥è¯¢ç²¾åº¦è¶Šé«˜ã€‚è¦æ³¨æ„ ef_construction æé«˜å¹¶ä¸èƒ½æ— é™å¢åŠ ç´¢å¼•çš„è´¨é‡ï¼Œå¸¸è§çš„ ef_constructio n å‚æ•°ä¸º 128ã€‚
              - ef: æ§åˆ¶æœç´¢ç²¾ç¡®åº¦å’Œæœç´¢æ€§èƒ½ï¼Œæ³¨æ„ ef å¿…é¡»å¤§äº Kã€‚
          - èµ„æºä¼˜å…ˆï¼Œé€‰æ‹© IVF_FLAT æˆ–è€… IVF_SQ8 ç´¢å¼•
            - IVF ç´¢å¼•åœ¨ Milvus åˆ†ç‰‡ä¹‹åä¹Ÿèƒ½æ‹¿åˆ°æ¯”è¾ƒä¸é”™çš„å¬å›ç‡ï¼Œå…¶å†…å­˜å ç”¨å’Œå»ºç´¢å¼•é€Ÿåº¦ç›¸æ¯” HNSW éƒ½è¦ä½å¾ˆå¤š
            - IVF_SQ8 ç›¸æ¯” IVFï¼Œå°†å‘é‡æ•°æ®ä» float32 è½¬æ¢ä¸ºäº† int8ï¼Œå¯ä»¥å‡å°‘ 4 å€çš„å†…å­˜ç”¨é‡ï¼Œä½†å¯¹å¬å›ç‡æœ‰è¾ƒå¤§å½±å“ï¼Œå¦‚æœè¦æ±‚ 95% ä»¥ä¸Šçš„å¬å›ç²¾åº¦ä¸å»ºè®®ä½¿ç”¨ã€‚
      - åˆç†é€‰æ‹©æµå¼æ’å…¥å’Œæ‰¹é‡å¯¼å…¥
        - å°½å¯èƒ½æ‰¹é‡å†™å…¥ï¼Œæ•´ä½“ååä¼šæ›´é«˜ï¼Œå»ºè®®æ¯æ¬¡å†™å…¥çš„å¤§å°æ§åˆ¶åœ¨ 10M
        - å•ä¸ª Shard çš„æµå¼å†™å…¥é‡ä¸å»ºè®®è¶…è¿‡ 10M/s
        - Datanode å¤šäº Shard çš„æƒ…å†µä¸‹ï¼Œéƒ¨åˆ† DataNode å¯èƒ½æ— æ³•è·å¾—è´Ÿè½½
        - å¯¼å…¥ç›®å‰æ”¯æŒçš„æ–‡ä»¶å¤§å°ä¸Šé™æ˜¯ 1GBï¼Œæ¥ä¸‹æ¥ä¼šæ”¯æŒæ›´å¤§çš„å¯¼å…¥æ–‡ä»¶å¤§å°ä¸Šé™
        - ä¸å»ºè®®é¢‘ç¹å¯¼å…¥å°æ–‡ä»¶ï¼Œä¼šç»™ compaction å¸¦æ¥æ¯”è¾ƒå¤§çš„å‹åŠ›
      - è°¨æ…ä½¿ç”¨æ ‡é‡è¿‡æ»¤ï¼Œåˆ é™¤ç‰¹æ€§ç­‰ç‰¹æ€§
        - Milvus ä½¿ç”¨çš„æ˜¯å‰è¿‡æ»¤ï¼Œå³å…ˆåšæ ‡é‡è¿‡æ»¤ç”Ÿæˆ Bitsetï¼Œåœ¨å‘é‡æ£€ç´¢çš„è¿‡ç¨‹ä¸­åŸºäº Bitset å»é™¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„ entityã€‚
        - å¯¹äº HNSW è¿™ä¸€ç±»çš„å›¾ç´¢å¼•è€Œè¨€ï¼Œæ ‡é‡è¿‡æ»¤å¹¶ä¸ä¼šåŠ é€ŸæŸ¥è¯¢ï¼Œåè€Œå¯èƒ½å¯¼è‡´æ€§èƒ½å˜å·®ã€‚
      - å¸¸è§çš„å‚æ•°è°ƒæ•´
        - Segment å¤§å°ï¼šSegment å¤§å°è¶Šå¤§ï¼ŒæŸ¥è¯¢æ€§èƒ½è¶Šå¥½ï¼Œæ„å»ºç´¢å¼•è¶Šæ…¢ï¼Œè´Ÿè½½è¶Šä¸å®¹æ˜“å‡è¡¡ã€‚Milvus é»˜è®¤é€‰æ‹© 512M Segment å¤§å°ä¸»è¦æ˜¯è€ƒè™‘åˆ°äº†å†…å­˜æ¯”è¾ƒå°‘çš„æœºå‹ã€‚å¯¹äºå†…å­˜åœ¨ 8G-16G çš„ç”¨æˆ·ï¼Œå»ºè®® Segment å¤§å°è°ƒæ•´åˆ° 1024Mï¼Œ16G ä»¥ä¸Šçš„æœºå‹å¯ä»¥è°ƒæ•´åˆ° 2Gã€‚
        - Segment seal portion: å½“ Growing Segment è¾¾åˆ° Segment å¤§å° * seal portion åï¼Œæµå¼æ•°æ®å°±ä¼šè¢«è½¬æ¢ä¸ºæ‰¹æ•°æ®ã€‚é€šå¸¸æƒ…å†µä¸‹å»ºè®® Growing segment çš„å¤§å°æ§åˆ¶åœ¨ 100-200M å·¦å³ï¼Œè°ƒå°è¿™ä¸ªå€¼æœ‰åŠ©äºé™ä½æµå¼å†™å…¥åœºæ™¯ä¸‹çš„æŸ¥è¯¢å»¶è¿Ÿã€‚
        - DataNode Segment SyncPeriod: Milvus ä¼šå®šæ—¶å°†æ•°æ® Sync åˆ°å¯¹è±¡å­˜å‚¨ï¼ŒSync è¶Šé¢‘ç¹æ•…éšœæ¢å¤é€Ÿåº¦è¶Šå¿«ï¼Œä½†è¿‡äºé¢‘ç¹çš„ sync ä¼šå¯¼è‡´ Milvus ç”Ÿäº§å¤§é‡å°æ–‡ä»¶ï¼Œç»™å¯¹è±¡å­˜å‚¨é€ æˆè¾ƒå¤§å‹åŠ›ã€‚
    - [å¦‚ä½•æ‰¾åˆ°ç²¾åº¦ä¸æ€§èƒ½çš„é»„é‡‘ç‚¹](https://mp.weixin.qq.com/s/qUxqfr0KA9lwhwtNCZ9maw)
      - Zilliz Cloud å‘å¸ƒæœ€æ–°åŠŸèƒ½ï¼šlevel å‚æ•°è°ƒèŠ‚æœç´¢ç²¾åº¦å’Œ enable_recall_calculation è¿”å›ç²¾åº¦é¢„ä¼°
      - Recall å’Œ Latency/QPS çš„éœ€æ±‚å¤§ä¸åŒ
        - æ¨èç³»ç»Ÿï¼šå¬å›ç²¾åº¦è¦æ±‚ä½ï¼Œé«˜ QPS ä½å»¶è¿Ÿ
        - äººè„¸è¯†åˆ«ï¼šå¬å›ç²¾åº¦è¦æ±‚é«˜ï¼Œä½ QPS å»¶è¿Ÿå®½æ¾
      - Level å‚æ•°è°ƒèŠ‚å¬å›ç²¾åº¦
        - è¾ƒä½çš„ level å‚æ•° (level=1)ï¼šé€‚ç”¨äºä¸€èˆ¬åœºæ™¯ï¼ˆå¬å›ç‡é€šå¸¸åœ¨ 90% ä»¥ä¸Šï¼‰ï¼Œæ­¤æ—¶æŸ¥è¯¢æ€§èƒ½ä¼˜å¼‚ï¼Œèµ„æºæ¶ˆè€—è¾ƒä½ï¼Œéå¸¸é€‚åˆéœ€è¦å¿«é€Ÿå“åº”çš„ä¸šåŠ¡éœ€æ±‚ã€‚
        - è¾ƒé«˜çš„ level å‚æ•° (level=10)ï¼šé’ˆå¯¹å¯¹å¬å›ç‡è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œæå‡æœç´¢ç²¾åº¦ï¼Œä½†ä¼šæ¶ˆè€—æ›´å¤šçš„è®¡ç®—èµ„æºå’Œæ—¶é—´ï¼Œé€‚ç”¨äºå¯¹ç²¾å‡†åº¦è¦æ±‚ä¸¥è‹›çš„ä»»åŠ¡ã€‚
    - [How to Filter Efficiently Without Killing Recall](https://milvus.io/blog/how-to-filter-efficiently-without-killing-recall.md)
      - Graph Index Optimization: 
        - Preserves paths between similar items even when filters remove connecting nodes, preventing the â€œislandsâ€ problem that reduces result quality.
        - We implemented the Alpha strategy alongside other optimization techniques. 
          - implementing a dynamic combination of â€œinclude-allâ€ and â€œexclude-allâ€ traversal methods that intelligently adapts based on data statistics to optimize query performance
        - strike a balance between recall and performance
      - Metadata-Aware Indexing: 
        - Creates specialized paths for common filter conditions, making filtered searches significantly faster without sacrificing accuracy.
        - the main graph index is called the base graph, while the specialized graphs built for specific metadata fields are called column graphs.
      - Iterative Filtering: 
        - Processes results in batches, applying complex filters only to the most promising candidates instead of the entire dataset.
      - AutoIndex: 
        - Uses machine learning to automatically tune search parameters based on your data and queries, balancing speed and accuracy without manual configuration.
  - Milvus 2.3
    - Cosine ç›¸ä¼¼åº¦ç±»å‹ï¼š æ— éœ€å‘é‡å½’ä¸€åŒ–ï¼Œç®€åŒ–æ•°æ®æœç´¢æµç¨‹ã€‚
    - Upsert æ•°æ®ï¼šæå‡æ›´æ–°å’Œåˆ é™¤æ•°æ®çš„ç®¡ç†æµç¨‹æ•ˆç‡ï¼Œé€‚ç”¨äºé¢‘ç¹æ›´æ–°æ•°æ®ä¸”è¿½æ±‚æ•°æ®ä¸€è‡´æ€§å’ŒåŸå­æ€§çš„åœºæ™¯ã€‚
    - èŒƒå›´æœç´¢ï¼ˆRange Searchï¼‰: é€šè¿‡é™åˆ¶æŸ¥è¯¢å‘é‡ä¸å…¶ä»–å‘é‡ä¹‹é—´çš„è·ç¦»ï¼ŒèŒƒå›´æœç´¢èƒ½å¤Ÿå®ç°å¯¹æœç´¢ç»“æœçš„æœ‰æ•ˆç»†åŒ–ï¼Œé€‚ç”¨äºæ­å»ºæ¨èå¼•æ“çš„åœºæ™¯ã€‚ 
    - æ”¯æŒ Parquet æ–‡ä»¶ï¼šæå‡æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒ Parquet æ–‡ä»¶ï¼Œé€šè¿‡å…¶é«˜æ•ˆçš„åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œæä¾›æ›´å¥½çš„æŸ¥è¯¢æ€§èƒ½ï¼Œé€‚ç”¨äºå…·æœ‰å¤æ‚æ•°æ®é›†çš„åœºæ™¯ã€‚ 
    - æ”¯æŒ Array æ•°æ®ç±»å‹ï¼šæ”¯æŒåœ¨æœç´¢è¿‡ç¨‹ä¸­åŸºäºå¤šä¸ªå±æ€§è¿›è¡Œç²¾ç¡®çš„å…ƒæ•°æ®è¿‡æ»¤ã€‚åœ¨ç”µå•†é¢†åŸŸä¸­ï¼Œè¯¥åŠŸèƒ½æ”¯æŒæ ¹æ®ä¸åŒäº§å“æ ‡ç­¾è¿›è¡Œæœç´¢ï¼Œä¸ºç”¨æˆ·è¿”å›ç›¸å…³çš„æœç´¢ç»“æœ
  - Milvus 2.4
    - æ”¯æŒ CAGRA ç´¢å¼•: CAGRA æ˜¯ NVIDIA RAFT åº“ä¸­æœ€å…ˆè¿›çš„åŸºäºå›¾å½¢å¤„ç†å™¨çš„å›¾å½¢ç´¢å¼•; CAGRA å³ä½¿åœ¨å°æ‰¹é‡æŸ¥è¯¢ä¸­ä¹Ÿè¡¨ç°å‡ºå‹å€’æ€§çš„ä¼˜åŠ¿
    - è¿˜æ”¯æŒäº† GPU æš´æœï¼Œæ€§èƒ½æœ‰æ•°åå€æå‡ï¼Œè¿›ä¸€æ­¥æ»¡è¶³éœ€è¦é«˜å¬å›ç‡çš„åœºæ™¯ã€‚
    - æ”¯æŒå¤šå‘é‡æœç´¢: åœ¨ Collection ä¸­å­˜å‚¨å’Œæœç´¢å¤šä¸ªå‘é‡åˆ—
    - Grouping æœç´¢: ç”¨æˆ·å¯ä»¥åœ¨æœç´¢ vector çš„åŸºç¡€ä¸Šåšåˆ†ç»„èšåˆï¼Œè¿”å›çš„ TopK æ˜¯åŸºäºåˆ†ç»„åçš„èšåˆç»“æœè€Œéç®€å•çš„ä»¥å‘é‡ä¸ºä¸­å¿ƒçš„ç‰‡æ®µä¿¡æ¯
    - æ”¯æŒç¨€ç–å‘é‡ï¼ˆbetaï¼‰: ä¸“ä¸ºç”± SPLADEv2 ç­‰ç¥ç»æ¨¡å‹å’Œ BM25 ç­‰ç»Ÿè®¡æ¨¡å‹ç”Ÿæˆçš„å‘é‡è®¾è®¡
    - å€’æ’ç´¢å¼•å’Œæ¨¡ç³ŠåŒ¹é…æ”¯æŒ: 
      - åŸºäºå†…å­˜çš„äºŒè¿›åˆ¶æœç´¢ç´¢å¼•å’Œ Marisa Trie ç´¢å¼•ç”¨äºæ ‡é‡å­—æ®µç´¢å¼•ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•æ˜¯å†…å­˜å¯†é›†å‹çš„
      - 2.4 é‡‡ç”¨äº†åŸºäº Tantivy çš„å€’æ’ç´¢å¼•ï¼Œå®ƒå¯ä»¥åº”ç”¨äºæ‰€æœ‰æ•°å­—å’Œå­—ç¬¦ä¸²æ•°æ®ç±»å‹ã€‚æ­¤ç‰ˆæœ¬è¿˜æ”¯æŒæ¨¡ç³ŠåŒ¹é…æ ‡é‡è¿‡æ»¤ä½¿ç”¨å‰ç¼€ï¼Œä¸­ç¼€å’Œåç¼€
    - å†…å­˜æ˜ å°„å­˜å‚¨: ä¸æ˜¯å°†æ–‡ä»¶å†…å®¹ç›´æ¥åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè€Œæ˜¯å°†æ–‡ä»¶å†…å®¹æ˜ å°„åˆ°å†…å­˜ä¸­
    - å…ƒæ•°æ®è¿‡æ»¤ä¸­æ”¯æŒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å­å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ã€å…¨æ–°çš„æ ‡é‡å€’æ’ç´¢å¼•ï¼ˆç”± Tantivy è´¡çŒ®ï¼‰ä»¥åŠç”¨äºæ£€æµ‹å¹¶åŒæ­¥ Milvus Collection ä¸­æ•°æ®å˜åŒ–çš„ Change Data Capture å·¥å…·
    - HNSW è¿˜æ²¡æœ‰å…¨é“¾è·¯æ”¯æŒ float16ï¼Œåº•å±‚ knn searchçš„æ—¶å€™ï¼Œæ˜¯æŠŠ float16è½¬æ¢æˆ float32 å†è¿ç®—çš„ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°å†…å­˜ä½¿ç”¨é‡ä¸‹é™ä¸å¤š.ä¸‹ä¸ªç‰ˆæœ¬ï¼ŒHNSW å…¨é“¾è·¯éƒ½æ”¯æŒ float16 ä¹‹åï¼Œé¢„æœŸå†…å­˜ä½¿ç”¨é‡ä¼šä¸‹é™ä¸€åŠ
    - å…¨é“¾è·¯æ”¯æŒfloat16å’Œbfloat16çš„åªæœ‰diskannã€‚ä¸‹ä¸€æ­¥æ”¯æŒçš„æ˜¯hnswï¼Œivfå’Œscannè¿˜æ’åœ¨åé¢
  - Milvus 2.4.3
    - Metadata Filtering in Milvus v2.4.3
      - you can match strings using prefix, infix, postfix, or even character wildcard searches.
      - all the variations are possible as well as using array values, either by exact matches or by checking if any elements in the array match (contains_any())
      - https://github.com/milvus-io/bootcamp/blob/master/bootcamp/Retrieval/imdb_metadata_filtering.ipynb
  - Milvus 2.5
    - [Sparse BM25](https://milvus.io/blog/full-text-search-in-milvus-what-is-under-the-hood.md)
      - å‘é‡é‡Œçš„å€¼ï¼Œéƒ½æ˜¯æ ¹æ®æ–‡æ¡£é•¿åº¦ |D|ï¼Œ TF(q) : å•è¯ q åœ¨æ–‡æ¡£ä¸­çš„è¯é¢‘ æ¥ç”Ÿæˆçš„ï¼Œè¿™äº›éƒ½æ˜¯å±€éƒ¨ä¿¡æ¯
      - avgdl : å¹³å‡æ–‡æ¡£é•¿åº¦ï¼Œ N : æ–‡æ¡£æ€»æ•°ï¼Œè¿™äº›å…¨å±€ä¿¡æ¯éƒ½æ˜¯å­˜åœ¨metaé‡Œçš„ï¼Œä¸æ˜¯åœ¨å…·ä½“çš„å‘é‡å€¼é‡Œï¼Œä¹Ÿä¸æ˜¯åœ¨æ¯ä¸ªsegmenté‡Œã€‚
      - åšå‘é‡æŸ¥è¯¢çš„æ—¶å€™ï¼Œè®¡ç®—åˆ†æ•°éœ€è¦è®¡ç®—å®Œæ•´çš„BM25å…¬å¼ï¼ŒåŒæ—¶æŸ¥è¯¢è¿‡æ¥çš„æ—¶å€™ä¹Ÿéœ€è¦å¤šèŠ±ä¸€ç‚¹æ—¶é—´åšè®¡ç®—ï¼ˆåŒ…æ‹¬ä» meta å– avgdl ç­‰å…¨å±€ä¿¡æ¯çš„æ—¶é—´ï¼‰ã€‚
      - [å…·ä½“åŠŸèƒ½ï¼š](https://mp.weixin.qq.com/s/ikOFS19LT7DZrctDwBUOkg)
        - åˆ†è¯å’Œæ•°æ®é¢„å¤„ç†ï¼šåŸºäºå¼€æºæœç´¢åº“ Tantivy å®ç°ï¼ŒåŒ…æ‹¬è¯å¹²æå–ã€è¯å½¢è¿˜åŸå’Œåœç”¨è¯è¿‡æ»¤ç­‰åŠŸèƒ½ã€‚
        - åˆ†å¸ƒå¼è¯è¡¨å’Œè¯é¢‘ç»Ÿè®¡ï¼šé«˜æ•ˆæ”¯æŒå¤§è§„æ¨¡è¯­æ–™çš„è¯é¢‘ç®¡ç†ä¸è®¡ç®—ã€‚
        - ç¨€ç–å‘é‡ç”Ÿæˆä¸ç›¸ä¼¼åº¦è®¡ç®—ï¼šé€šè¿‡è¯­æ–™åº“çš„è¯é¢‘(Corpus TF)æ„å»ºç¨€ç–å‘é‡ï¼Œå¹¶åŸºäºæŸ¥è¯¢è¯é¢‘(Query TF)å’Œå…¨å±€é€†æ–‡æ¡£é¢‘ç‡ (IDF) æ„å»ºæŸ¥è¯¢ç¨€ç–å‘é‡ï¼Œå†é€šè¿‡ç‰¹å®šçš„ BM25 è·ç¦»å‡½æ•°è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ã€‚
        - å€’æ’ç´¢å¼•æ”¯æŒï¼šå®ç°åŸºäº WAND ç®—æ³•çš„å€’æ’ç´¢å¼•ï¼ŒåŒæ—¶ Block-Max WAND ç®—æ³•å’Œå›¾ç´¢å¼•çš„æ”¯æŒä¹Ÿåœ¨å¼€å‘ä¸­ã€‚
          - WANDçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨æ‰“åˆ†ä¸Šç•Œï¼ˆUpper Bound Scoreï¼‰æ¥æå‰è·³è¿‡ä¸ä¼šè¿›å…¥Top-Kçš„æ–‡æ¡£ï¼Œåšåˆ°é«˜æ•ˆå‰ªæ
  - Milvus 2.6
    - [IVF_RABITQ ç´¢å¼•](https://mp.weixin.qq.com/s/jx2Isz0zfcERri3EdXc6jg)
      - èåˆäº† RaBitQã€IVF å€’æ’ç´¢å¼•ã€éšæœºæ—‹è½¬å˜æ¢ï¼ˆRandom Rotationï¼‰ä»¥åŠåå¤„ç†ä¼˜åŒ–æœºåˆ¶ï¼ˆrefinementï¼‰ï¼Œåœ¨é«˜æ•ˆå‹ç¼©å’Œé«˜ç²¾åº¦æ£€ç´¢ä¹‹é—´å–å¾—æ›´ä¼˜å¹³è¡¡ã€‚
      - å…³äº IVFã€RaBitQ ä»¥åŠç²¾è°ƒè¿‡ç¨‹ï¼ˆrefinementï¼‰è¿‡ç¨‹çš„ä¸€äº›åº•å±‚é…ç½®å‚æ•°è¯´æ˜ï¼š
        - nlist å’Œ nprobe æ˜¯æ‰€æœ‰åŸºäº IVF æ–¹æ³•çš„æ ‡å‡†å‚æ•°ï¼š
          - nlistï¼šä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºæ•´ä¸ªæ•°æ®é›†è¢«åˆ’åˆ†æˆçš„ IVF åˆ†æ¡¶ï¼ˆbucketï¼‰æ•°é‡ã€‚
          - nprobeï¼šä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºåœ¨æœç´¢è¿‡ç¨‹ä¸­ä¸ºæ¯ä¸ªæŸ¥è¯¢å‘é‡è®¿é—®çš„ IVF åˆ†æ¡¶æ•°é‡ã€‚ å±äºä¸æœç´¢ç›¸å…³çš„å‚æ•°ã€‚
        - rbq_bits_query æŒ‡å®šæŸ¥è¯¢å‘é‡çš„é‡åŒ–çº§åˆ«ï¼š
          - å¯é€‰å€¼ä¸º 1 åˆ° 8ï¼Œå¯¹åº” SQ1 åˆ° SQ8 çš„é‡åŒ–ç­‰çº§ã€‚
          - è®¾ç½®ä¸º 0 æ—¶è¡¨ç¤ºä¸å¯¹æŸ¥è¯¢å‘é‡è¿›è¡Œé‡åŒ–ã€‚ å±äºæœç´¢ç›¸å…³å‚æ•°ã€‚
        - refineã€refine_type å’Œ refine_k æ˜¯ç”¨äºç²¾æ’è¿‡ç¨‹çš„æ ‡å‡†å‚æ•°ï¼š
          - refineï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å¯ç”¨ç²¾æ’ç­–ç•¥ã€‚
          - refine_kï¼šä¸€ä¸ªéè´Ÿæµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºç²¾æ’æ—¶æ‰€é€‰å€™é€‰æ± çš„æ”¾å¤§å€æ•°ã€‚ç³»ç»Ÿå°†ä»ä¸€ä¸ªå¤§å°ä¸º refine_k å€çš„å€™é€‰é›†åˆä¸­ï¼Œä½¿ç”¨æ›´é«˜ç²¾åº¦çš„é‡åŒ–æ–¹å¼é€‰å‡ºæœ€ç»ˆçš„è¿‘é‚»ç»“æœã€‚å±äºæœç´¢ç›¸å…³å‚æ•°ã€‚
          - refine_typeï¼šå­—ç¬¦ä¸²ï¼ŒæŒ‡å®šç”¨äºç²¾æ’é˜¶æ®µçš„é‡åŒ–ç±»å‹ã€‚å¯é€‰å€¼åŒ…æ‹¬ SQ6ã€SQ8ã€FP16ã€BF16 å’Œ FP32 / FLATï¼ˆæ— å‹ç¼©çš„åŸå§‹ç²¾åº¦ï¼‰ã€‚
    - [é‡å†™ Milvus çš„æµå¤„ç†æ¶æ„ woodpecker](https://mp.weixin.qq.com/s/3a1TbQSSOxAsuJyjYmaSSw)
      - WoodPecker é¢å‘å¯¹è±¡å­˜å‚¨ä¼˜åŒ–çš„ WAL å¼•æ“
      - é‡‡ç”¨ â€œZeroDiskâ€ æ¶æ„ï¼Œæ‰€æœ‰æ—¥å¿—æ•°æ®å­˜å‚¨äºäº‘å¯¹è±¡å­˜å‚¨ï¼ˆå¦‚ Amazon S3ã€GCSã€é˜¿é‡Œ OSSï¼‰ï¼Œå…ƒæ•°æ®åˆ™ç”± etcd ç­‰åˆ†å¸ƒå¼ KV ç³»ç»Ÿç®¡ç†ã€‚
      - æ¶æ„
        - Clientï¼šç”¨äºæäº¤è¯»å†™è¯·æ±‚çš„æ¥å£å±‚
        - LogStoreï¼šå¤„ç†å†™ç¼“å†²ã€å¼‚æ­¥å†™å…¥ä¸æ—¥å¿—å‹ç¼©
        - Storage Backendï¼šåç«¯å­˜å‚¨ï¼ˆæ”¯æŒ S3ã€GCSã€EFS ç­‰ï¼‰
        - ETCDï¼šç®¡ç†å…ƒæ•°æ®å¹¶ååŒåˆ†å¸ƒå¼èŠ‚ç‚¹
      - ä¸¤ç§éƒ¨ç½²æ¨¡å¼ï¼š
        - MemoryBuffer æ¨¡å¼ï¼ˆè½»é‡ä¸”å…ç»´æŠ¤ï¼‰
        - QuorumBuffer æ¨¡å¼ï¼ˆä½å»¶è¿Ÿ & é«˜å®¹é”™ï¼‰
    - é™¤äº† Woodpeckerï¼ŒMilvus 2.6 è¿˜å¼•å…¥äº† Streaming Service â€”â€” ä¸€ä¸ªä¸“ç”¨äºæ—¥å¿—æ¥å…¥ã€å¢é‡å†™å…¥ä¸å®æ—¶è®¢é˜…çš„æ ¸å¿ƒç»„ä»¶ã€‚
      - å®ƒå–ä»£äº† Kafka/Pulsar åœ¨æ•°æ®é“¾è·¯ä¸­çš„è§’è‰²ï¼Œæˆä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„å®æ—¶æ•°æ®æµé€šå¼•æ“ã€‚
    - Woodpecker is the storage layer that handles the actual persistence of write-ahead logs, providing durability and reliability
    - StreamingService is the service layer that manages log operations and provides real-time data streaming capabilities
    - [MinHash LSH ï¼Œä½æˆæœ¬å»é‡ç™¾äº¿æ–‡æ¡£](https://mp.weixin.qq.com/s/LKa5eznjqlUDzCwp4GnGqg)
      - MinHash å°±æ˜¯é€šè¿‡å‹ç¼©åŸå§‹é›†åˆä¸ºå›ºå®šé•¿åº¦çš„ç­¾åå‘é‡ï¼Œè¿‘ä¼¼ä¼°ç®—ç›¸ä¼¼åº¦ï¼Œä»è€Œå¤§å¹…é™ä½è®¡ç®—å¼€é”€
        - å…ˆå°†æ¯ä¸ªæ–‡æ¡£æ‹†åˆ†æˆç”±å•è¯æˆ–å­—ç¬¦æ„æˆçš„çŸ­è¯­åˆ‡ç‰‡é›†åˆï¼Œç„¶åå°†æ¯ä¸ªæ–‡æ¡£çš„åˆ‡ç‰‡é›†åˆåº”ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œå¹¶è®°å½•æ¯ä¸ªå‡½æ•°ä½œç”¨åå¾—åˆ°çš„æœ€å°å“ˆå¸Œå€¼ï¼Œä¸ºæ¯ä¸ªæ–‡æ¡£ç”Ÿæˆä¸€ä¸ªç­¾åå‘é‡ã€‚
        - åœ¨è®¡ç®—ç›¸ä¼¼åº¦æ—¶ï¼Œä¸¤ä¸ªæ–‡æ¡£çš„ MinHash ç­¾åä¸­ç›¸åŒä½ç½®çš„å“ˆå¸Œå€¼ä¸€è‡´çš„æ¦‚ç‡ï¼Œå¯ä»¥å¾ˆå¥½åœ°æ‹ŸåˆåŸå§‹åˆ‡ç‰‡é›†åˆä¹‹é—´çš„ Jaccard ç›¸ä¼¼åº¦
      - å³ä½¿ä½¿ç”¨äº†ç´§å‡‘çš„ MinHash ç­¾åï¼Œåœ¨æ•°ç™¾ä¸‡ç”šè‡³æ•°åäº¿ä¸ªæ–‡æ¡£ä¸­è¿›è¡Œä¸¤ä¸¤æ¯”å¯¹ï¼Œè®¡ç®—æˆæœ¬ä¾ç„¶éå¸¸é«˜ã€‚æ­¤æ—¶å°±éœ€è¦å¼•å…¥ å±€éƒ¨æ•æ„Ÿå“ˆå¸ŒLSHæ–¹æ³•ï¼ˆLocality Sensitive Hashing,ï¼‰
        - MinHash LSHçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
          - æŠŠæ¯ä¸ª MinHash ç­¾ååˆ’åˆ†ä¸º å¤šä¸ªå¸¦ï¼ˆbandï¼‰ï¼Œç„¶åå°†ç›¸ä¼¼æ¡å¸¦ä½¿ç”¨æ ‡å‡†å“ˆå¸Œå‡½æ•°å°†å…¶å“ˆå¸Œåˆ°æŸä¸ªæ¡¶ä¸­ï¼Œå¦‚æœä¸¤ä¸ªæ–‡æ¡£çš„ä»»æ„ä¸€ä¸ªæ¡å¸¦è½å…¥åŒä¸€ä¸ªæ¡¶ï¼Œå³è¢«æ ‡è®°ä¸ºå¯èƒ½ç›¸ä¼¼
          - é«˜åº¦ç›¸ä¼¼çš„æ–‡æ¡£å¾€å¾€æœ‰å¾ˆå¤šç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œå› æ­¤è‡³å°‘åœ¨æŸä¸€å¸¦ä¸­è½å…¥åŒä¸€ä¸ªæ¡¶çš„æ¦‚ç‡æ›´é«˜
      - æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´å¸¦æ•°å’Œæ¯å¸¦çš„ç»´åº¦æ•° ï¼Œåœ¨å¬å›ç‡ï¼ˆæ‰¾åˆ°æ‰€æœ‰ç›¸ä¼¼å¯¹ï¼‰ã€ç²¾ç¡®ç‡ï¼ˆå‡å°‘è¯¯æŠ¥ï¼‰å’Œé€Ÿåº¦ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚
      - MinHash + LSHï¼ˆå±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼‰ æä¾›äº†ä¸€ç§å…¼é¡¾æ•ˆç‡ä¸æ•ˆæœçš„è¿‘ä¼¼å»é‡ç­–ç•¥ï¼Œé€‚ç”¨äºç™¾äº¿çº§è¯­æ–™ä¸‹çš„é¢„å¤„ç†ä¼˜åŒ–ï¼›
      - MinHash é€šè¿‡å°†æ–‡æ¡£å‹ç¼©ä¸ºç­¾åï¼ŒLSH é«˜æ•ˆç¼©å°æœç´¢ç©ºé—´ï¼Œå¯ä»¥å¿«é€Ÿå®šä½æ½œåœ¨é‡å¤å¯¹
      - https://milvus.io/blog/minhash-lsh-in-milvus-the-secret-weapon-for-fighting-duplicates-in-llm-training-data.md
      - ğ— ğ—¶ğ—»ğ—›ğ—®ğ˜€ğ—µ ğ—Ÿğ—¦ğ—› ğ˜‚ğ˜€ğ—²ğ˜€ ğ—® ğ˜ğ˜„ğ—¼-ğ˜€ğ˜ğ—²ğ—½ ğ—½ğ—¿ğ—¼ğ—°ğ—²ğ˜€ğ˜€:
        - ğ— ğ—¶ğ—»ğ—›ğ—®ğ˜€ğ—µ ğ—™ğ—¶ğ—»ğ—´ğ—²ğ—¿ğ—½ğ—¿ğ—¶ğ—»ğ˜ğ—¶ğ—»ğ—´: Converts documents into compact signatures using word sequences and hash functions.
        - ğ—Ÿğ—¼ğ—°ğ—®ğ—¹ğ—¶ğ˜ğ˜†-ğ—¦ğ—²ğ—»ğ˜€ğ—¶ğ˜ğ—¶ğ˜ƒğ—² ğ—›ğ—®ğ˜€ğ—µğ—¶ğ—»ğ—´(ğ—Ÿğ—¦ğ—›): Groups similar documents into buckets, transforming exponential comparisons into linear operations.
    - [2.6åŠŸèƒ½é¢„è§ˆ](https://mp.weixin.qq.com/s/UnvVbKSjTsyz8HzRTbs2gw)
      - https://www.youtube.com/watch?v=Wb3jPzfx97Y&list=PLPg7_faNDlT4UvZtZ5GIZb8YGG_1tfKp-
      - é™æœ¬æé€Ÿï¼š
        - å¼•å…¥RabitQé‡åŒ–å…¼é¡¾å†…å­˜å’Œå¬å›ç‡ï¼›ä¸€ä¸ªäºŒè¿›åˆ¶é‡åŒ–æ–¹æ³•
          - ä¸€ç§æ–°çš„é‡åŒ–ç®—æ³•ï¼Œç”¨äºå‘é‡å‹ç¼©ï¼Œæä¾›é«˜æœç´¢ç²¾åº¦ï¼ˆæ¯”ä¼ ç»Ÿä¹˜ç§¯é‡åŒ–é«˜ 3-4% çš„å¬å›ç‡ï¼Œæ¯”æ ‡é‡é‡åŒ–é«˜ 10%ï¼‰
          - é’ˆå¯¹ç¡¬ä»¶è¿›è¡Œäº†ä¼˜åŒ–ï¼ˆSIMD æŒ‡ä»¤ï¼‰ï¼Œåœ¨ç›¸ä¼¼å¬å›ç‡ä¸‹ï¼ŒQPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰æ¯”åŸå§‹ IVF ç´¢å¼•ç¿»å€ï¼Œå¹¶èŠ‚çœå†…å­˜.
        - Sparse-BM25æ€§èƒ½æå‡ï¼ŒQPSæœ€é«˜æ7å€ï¼›
          - è®¾è®¡äº†çµæ´»çš„è¿‘ä¼¼æ£€ç´¢ç­–ç•¥ï¼ˆå¦‚ drop_ratio_search ä¸ dim_max_score_ratioï¼‰ï¼Œè®©ç”¨æˆ·åœ¨ç²¾åº¦ä¸é€Ÿåº¦ä¹‹é—´çµæ´»è°ƒæ§
          - åœ¨å·¥ç¨‹å®ç°ä¸­å¼•å…¥äº† SIMD åŠ é€Ÿã€æ•°æ®é¢„å–æœºåˆ¶ç­‰ï¼Œå¼•å…¥å¹¶ä¼˜åŒ–äº† Block-Max WAND ä¸ Block-Max MaxScore ç­‰é«˜æ€§èƒ½å‰ªæç®—æ³•
        - JSON Path IndexåŠ é€ŸåŠ¨æ€å­—æ®µè¿‡æ»¤ï¼Œå«Json fieldçš„è¿‡æ»¤æœç´¢å»¶è¿Ÿå¤§å¹…ä¸‹é™ã€‚
          - ç”¨äºåŠ é€Ÿå¯¹åŠ¨æ€å­—æ®µå†…éƒ¨ç‰¹å®šè·¯å¾„ä¸‹æ•°æ®çš„è¿‡æ»¤æ“ä½œ
        - Milvus Storage V2 (å­˜å‚¨ V2)ï¼šé‡æ–°è®¾è®¡çš„å­˜å‚¨å±‚ï¼Œå……åˆ†åˆ©ç”¨ Parquet å’Œ Arrow æ ¼å¼ï¼Œä½¿å…¶ä¸ç°æœ‰æ•°æ®æ ˆå…¼å®¹
          - å®ƒé€šè¿‡å°†å¤§å­—æ®µå’Œå°å­—æ®µæ‹†åˆ†åˆ°ä¸åŒçš„è¡Œç»„/æ–‡ä»¶ï¼Œå¼•å…¥äº†å¯¹æ›´å¤šæ•°æ®ç±»å‹ï¼ˆå¦‚é•¿æ–‡æœ¬å’Œ Blob å­˜å‚¨ï¼Œä¾‹å¦‚å›¾åƒã€éŸ³é¢‘ï¼‰çš„æ”¯æŒ
          - å‘é‡å­˜å‚¨åœ¨ Parquet ä¹‹å¤–ï¼Œä»¥é¿å…æ˜‚è´µçš„åºåˆ—åŒ–; è¿™ä½¿å¾—ç‚¹æŸ¥è¯¢çš„æ€§èƒ½æé«˜äº† 50 å€
      - ç»“æ„ä½“åˆ—è¡¨/åµŒå…¥åˆ—è¡¨æ•°æ®æ¨¡å‹ (Struct List / Embedding List Data Model)ï¼š
        - ä¸€ç§æ–°çš„æ•°æ®æ¨¡å‹ï¼Œå…¶ä¸­ä¸»é”®å¯ä»¥ä»£è¡¨æ–‡æ¡£ IDï¼Œæ¯è¡Œå¯ä»¥åŒ…å«åµŒå…¥åˆ—è¡¨ï¼ˆä¾‹å¦‚ï¼Œæ–‡æ¡£çš„å¤šä¸ªå—ï¼‰æˆ–ç»“æ„åŒ–åˆ—è¡¨ï¼ˆä¾‹å¦‚ï¼ŒåµŒå¥—å…ƒæ•°æ®ï¼‰
      - æœç´¢ä¸åŠŸèƒ½å¢å¼ºï¼š
        - å¢å¼ºAnalyzer/TokenizeråŠŸèƒ½ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼›
          - æ–°å¢ Run Analyzer è¯­æ³•æ”¯æŒï¼Œæä¾›åˆ†è¯é…ç½®çš„å¯è§‚æµ‹æ€§
          - æ–°å¢ Lindera åˆ†è¯å™¨ï¼Œæ”¯æŒæ—¥è¯­ã€éŸ©è¯­ç­‰äºšæ´²è¯­ç§
          - æ–°å¢ ICU åˆ†è¯å™¨ï¼Œé€‚åˆå¤šè¯­è¨€åœºæ™¯
        - å¼•å…¥Phrase MatchåŠŸèƒ½ç²¾å‡†åŒ¹é…çŸ­è¯­è¯åºï¼›æ”¯æŒåŸºäºçŸ­è¯­ç»“æ„å’Œè¯åºçš„ç²¾ç¡®åŒ¹é…ã€‚
          - ç”±äºä¸åŒ tokenizer å¯¹ position çš„å®šä¹‰æ–¹å¼ä¸åŒï¼Œç›¸åŒçŸ­è¯­åœ¨ä¸åŒåˆ†è¯å™¨ä¸­å¯èƒ½äº§ç”Ÿä¸åŒçš„ slop å€¼ã€‚å»ºè®®åœ¨ä½¿ç”¨ Phrase Match å‰ï¼Œé€šè¿‡ run_analyzer å…ˆè¡ŒéªŒè¯åˆ†è¯æ•ˆæœã€‚
        - Decay Functionå®ç°æ—¶é—´è¡°å‡é‡æ’åºï¼›æ”¯æŒç¬¬ä¸‰æ–¹æ¨¡å‹é›†æˆï¼Œç®€åŒ–å·¥ä½œæµã€‚
          - è®¸å¤šä¿¡æ¯æ£€ç´¢å’Œæ¨èåœºæ™¯ä¸­ï¼Œå†…å®¹çš„æ—¶æ•ˆæ€§æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„å› ç´ ã€‚ç”¨æˆ·å¾€å¾€æ›´å…³æ³¨æœ€æ–°çš„èµ„è®¯ã€æœ€è¿‘å‘ç”Ÿçš„äº‹ä»¶æˆ–è¿‘æœŸæ´»è·ƒçš„é¡¹ç›®ã€‚
          - ä¼ ç»Ÿçš„ç›¸ä¼¼æ€§æœç´¢å¯èƒ½ä»…ä»…ä¾æ®å†…å®¹æœ¬èº«çš„åŒ¹é…åº¦è¿›è¡Œæ’åºï¼Œè€Œå¿½ç•¥äº†æ—¶é—´ç»´åº¦å¯¹ä¿¡æ¯ä»·å€¼çš„å½±å“ã€‚
          - Decay Function å…è®¸ç”¨æˆ·åœ¨è·å–åˆæ­¥çš„æœç´¢å€™é€‰é›†ä¹‹åï¼Œæ ¹æ®æ¯ä¸ªæ¡ç›®çš„æ—¶é—´æˆ³ä¿¡æ¯ï¼Œå¯¹å…¶åŸå§‹ç›¸å…³æ€§å¾—åˆ†è¿›è¡Œè°ƒæ•´ã€‚
        - æŸ¥è¯¢æŠ½æ · (Query Sampling)ï¼šå…è®¸ä»é›†åˆä¸­æŠ½å–æ•°æ®ä»¥è¯„ä¼°æœç´¢å¬å›ç‡å’Œå‡†ç¡®æ€§ï¼Œæ— éœ€é¢„å…ˆå­˜åœ¨çš„åŸºç¡€äº‹å®æ•°æ®é›†
      - æ¶æ„ä¼˜åŒ–ï¼š
        -  å¼•å…¥Tiered Storageæ•°æ®å†·çƒ­åˆ†å±‚ï¼Œå¹³è¡¡æ€§èƒ½ä¸æˆæœ¬ï¼›
           - è¿™æ˜¯ä¸€é¡¹æ ‡å¿—æ€§åŠŸèƒ½ï¼Œå…è®¸æ‚¨å°†çƒ­æ•°æ®å’Œå†·æ•°æ®åˆ†ç¦»ï¼Œå¹¶åœ¨å¯¹è±¡å­˜å‚¨ä¹‹ä¸Šæä¾›ä¸€ä¸ªç¼“å­˜å±‚
           - å¯¹äºé•¿æ—¶é—´æœªè®¿é—®çš„å†·æ•°æ®ï¼Œç³»ç»Ÿå¯åŸºäº LRU ç®—æ³•ä¸»åŠ¨å¸è½½ï¼Œä»¥è…¾å‡ºå†…å­˜èµ„æºã€‚
           - åŒæ—¶ä¿æŒçƒ­æ•°æ®æ€§èƒ½ä¸ HNSW æˆ– DISKANN ç±»si
           - ä¸»è¦ç‰¹æ€§åŒ…æ‹¬å»¶è¿ŸåŠ è½½ï¼ˆLazy Loadï¼‰ã€éƒ¨åˆ†åŠ è½½ï¼ˆPartial Loadï¼‰å’ŒåŸºäº LRU çš„ç¼“å­˜é€å‡ºï¼ˆLRU-based Cache Evictionï¼‰ï¼Œå®ç°â€œå…ˆå…ƒåæ•°ã€æŒ‰éœ€æ‹‰å–ã€è‡ªåŠ¨å›æ”¶â€çš„é«˜æ•ˆæµç¨‹ã€‚
        - Streaming Serviceå¢å¼ºå®æ—¶å‘é‡å¤„ç†èƒ½åŠ›ï¼›
        - æ”¯æŒ100k Collectionï¼›
        - é‡‡ç”¨Woodpeckeräº‘åŸç”Ÿæ—¥å¿—ç³»ç»Ÿï¼›
        - ä¼˜åŒ–File format v2å’ŒCoord Merge ã€‚
        - N-gram ç´¢å¼• (N-gram Index)ï¼šé€šè¿‡å°†æ•°æ®æ‹†åˆ†ä¸ºæ›´å°çš„ tokenï¼ˆä¾‹å¦‚ 2-gramã€3-gramï¼‰å¹¶å¯¹å…¶æ„å»ºç´¢å¼•æ¥åŠ é€Ÿæ–‡æœ¬åŒ¹é…å’Œæ­£åˆ™è¡¨è¾¾å¼
        - Minhashï¼šä¸€ç§å±€éƒ¨æ•æ„Ÿå“ˆå¸Œç´¢å¼•ï¼Œä¸“é—¨ç”¨äºå¤§è§„æ¨¡æ•°æ®å»é‡ï¼ˆä¾‹å¦‚ 100 äº¿ä¸ªå‘é‡ï¼‰ï¼Œå®ç°ç›¸ä¼¼æ€§å»é‡è€Œéç²¾ç¡®å“ˆå¸Œæ¯”è¾ƒã€‚è¿™æœ‰åŠ©äºè¯†åˆ«å’Œåˆ é™¤è¿‘ä¼¼é‡å¤çš„å†…å®¹
  - Milvus 3.0
    - [Support Streaming Service in Milvus](https://github.com/milvus-io/milvus/issues/33285)
      - é›¶ç£ç›˜æ¶æ„ï¼ˆZero-Disk Architectureï¼‰ https://zhuanlan.zhihu.com/p/15809814733
  - Error Check list
    - "deny to write: memory limit exceeded" æ„æ€æ˜¯æŸä¸ªquerynodeæˆ–è€…datanodeçš„å†…å­˜å¿«ç”¨å…‰äº†
    - "unrecognized dtype for key: labels"  è¿™æ˜¯å› ä¸ºlangchain.MilvusVectorStoreæ²¡æ³•æ ¹æ®ä½ åœ¨Documentçš„metadataä¸­çš„"labels"è¿™ä¸ªkeyæ‰€å¯¹åº”çš„vlaueæ¨æ–­å‡ºè¿™æ˜¯ä¸ªä»€ä¹ˆç±»å‹çš„å­—æ®µ
    - "MilvusException: (code=65535, message=efConstruction out of range" HNSWç´¢å¼•çš„å‚æ•°è®¾çš„æœ‰é—®é¢˜ï¼Œè¦è®¾åœ¨åŒºé—´é‡Œã€‚milvusä»¥segmentä¸ºå•ä½ç®¡ç†æ•°æ®ã€‚åŒä¸€ä¸ªcollectionçš„segmentsæœ‰å¯èƒ½è¢«æ”¾åœ¨ä¸åŒçš„querynodeé‡Œ
    -  è¡¨åŠ è½½ä¸èµ·æ¥ï¼Œè¦ç”¨ä¸€ä¸ªdebugå·¥å…·æ¥releaseã€‚å…·ä½“æ­¥éª¤ï¼š
      - 1. ä¸‹è½½è¿™ä¸ªrepoåˆ°æœ¬åœ° github.com/milvus-io/birdwatcher
      - 2. è¿›å…¥repoç›®å½•ï¼Œå‘½ä»¤è¡Œæ‰§è¡Œ  go build -o birdwatcher main.go ï¼Œå‰ææ˜¯å®‰è£…äº†goï¼Œæ‰§è¡ŒæˆåŠŸååœ¨è©²ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ªbirdwatcherçš„å¯æ‰§è¡Œç¨‹åº
      - 3. å‘½ä»¤è¡Œè¿è¡Œ bridwatcherï¼Œè¿›å…¥commandlineæ¨¡å¼
      - 4. æ‰§è¡Œ connectï¼Œå‰ææ˜¯ä½ çš„milvusæ‰€ä½¿ç”¨çš„é‚£ä¸ªetcdåœ¨è¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸”å®¹å™¨ç«¯å£2379æš´éœ²å‡ºæ¥
      - 5. å¦‚æœconnectæˆåŠŸï¼Œå†æ‰§è¡Œforce-release
      - 6. é‡å¯milvuså®¹å™¨
    - "channel not available" æŠ¥é”™å¯èƒ½æ˜¯å·²çŸ¥é—®é¢˜, å…ˆrelease/loadçœ‹ä¸€ä¸‹è¡Œä¸è¡Œï¼Œä¸è¡Œçš„è¯é‡å¯ä¸€ä¸‹querycoord/querynode
    - minioé‡Œé¢noSuchKeyï¼Ÿ
      - no suck keyä¸€èˆ¬æ˜¯åœ¨2.3æ—©æœŸçš„ç‰ˆæœ¬å¶ç°ã€‚åŸå› æ˜¯æŸäº›bugå¯¼è‡´gcæŠŠä¸œè¥¿è¯¯åˆ ï¼Œå¯¼è‡´loadå¤±è´¥ã€‚ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯segmentçš„bloomfilterè¢«è¯¯åˆ ï¼Œå¦ä¸€ç§æ˜¯segmentçš„æ•°æ®æ–‡ä»¶è¢«è¯¯åˆ ã€‚
      - å‰ä¸€ç§æƒ…å†µå¯ä»¥é€šè¿‡æ‰‹åŠ¨è°ƒç”¨compactå°±èƒ½é‡å»ºbloomfilterã€‚åä¸€ç§æƒ…å†µç›¸å½“äºæ•°æ®ä¸¢äº†å›ä¸æ¥äº†ï¼Œåªèƒ½ç”¨birdwatcherçš„segment dropå‘½ä»¤æŠŠè¢«è¯¯åˆ çš„segmentä¿¡æ¯ä»etcdé‡Œæ¸…é™¤ã€‚
    - request limit exceeded[limit=1024] - è°ƒæ•´proxy.maxTaskNumè¿™ä¸ªå‚æ•°
    -  some node(s) haven't received input
      - è¿™ç§æŠ¥é”™æœ‰å¯èƒ½æ˜¯collectionæˆ–è€…partitionçš„æ•°é‡å¤ªå¤šäº†ï¼Œdatanodeåœ¨å¤„ç†timetickæ¶ˆæ¯çš„è¿‡ç¨‹ä¸­è¶…æ—¶ã€‚è¦ä¹ˆå‡å°‘è¡¨å’Œåˆ†åŒºçš„æ•°é‡ï¼Œè¦ä¹ˆæŠŠmilvus.yamlé‡Œçš„watchTimeoutIntervalæ”¹é«˜ç‚¹ã€‚
    - failed to search: out of range in json: ef(56) should be larger than k(200)
      - è¿™ä¸ªæŠ¥é”™æ„æ€æ˜¯ä½ ç»™searchè®¾ç½®çš„topkå€¼æ˜¯200ï¼Œhnswçš„efå‚æ•°è¦å¤§äºtopkï¼Œä½†ä½ ç»™efè®¾å€¼æ˜¯56ã€‚efçš„å€¼è¦å¤§äºtopkçš„å€¼ï¼Œè®¾è®¡ä¸Šå¦‚æ­¤
    -  'Timeout was reached' when loading collection https://github.com/milvus-io/milvus/discussions/41043
      - Try increasing the timeout value minio.requestTimeoutMs: Or decrease the common.threadCoreCoefficient.middlePriority to lower the concurrence of loading chunk files
  - QA
    - [ğ—›ğ—¼ğ˜„ ğ— ğ—¶ğ—¹ğ˜ƒğ˜‚ğ˜€ ğ—¦ğ—¼ğ—¹ğ˜ƒğ—²ğ˜€ ğ˜ğ—µğ—² ğ—¦ğ—°ğ—®ğ—¹ğ—®ğ—¯ğ—¶ğ—¹ğ—¶ğ˜ğ˜† ğ—£ğ—¿ğ—¼ğ—¯ğ—¹ğ—²ğ—º](https://milvus.io/blog/why-manual-sharding-is-a-bad-idea-for-vector-databases-and-how-to-fix-it.md) 
      - Milvus takes a fundamentally different approach, enabling seamless scaling from millions to billions of vectors without the complexity:
      - ğ—”ğ˜‚ğ˜ğ—¼ğ—ºğ—®ğ˜ğ—²ğ—± ğ—¦ğ—°ğ—®ğ—¹ğ—¶ğ—»ğ—´ ğ—ªğ—¶ğ˜ğ—µğ—¼ğ˜‚ğ˜ ğ—§ğ—²ğ—°ğ—µ ğ——ğ—²ğ—¯ğ˜: Kubernetes + disaggregated storage-compute architecture
      - ğ—¦ğ—²ğ—´ğ—ºğ—²ğ—»ğ˜-ğ—•ğ—®ğ˜€ğ—²ğ—± ğ—”ğ—¿ğ—°ğ—µğ—¶ğ˜ğ—²ğ—°ğ˜ğ˜‚ğ—¿ğ—²: Growing segments on StreamNodes for real-time data, sealed segments on QueryNodes with powerful indexes
      - ğ—§ğ˜„ğ—¼-ğ—Ÿğ—®ğ˜†ğ—²ğ—¿ ğ—¥ğ—¼ğ˜‚ğ˜ğ—¶ğ—»ğ—´: Each shard stores 1+ billion data points, with segments automatically balanced across machines
      - ğ—˜ğ—³ğ—³ğ—¼ğ—¿ğ˜ğ—¹ğ—²ğ˜€ğ˜€ ğ—˜ğ˜…ğ—½ğ—®ğ—»ğ˜€ğ—¶ğ—¼ğ—»: Adding capacity is as simple as increasing shard count â€” no manual intervention required
    - [De duplication of the same vector](https://github.com/milvus-io/milvus/issues/5607)
    - milvusåˆ›å»ºä¸€ä¸ªcollectionåï¼Œè¿˜èƒ½å†æ·»åŠ åŠ¨æ€å­—æ®µå—ï¼Ÿdynamic schema æ‰“å¼€ä¹‹åï¼Œå°±å¯ä»¥å†åŠ åˆ—
    - ä¸ºä½•ä¸ç”¨float64æ¥ä¿è¯å°æ•°ç‚¹ååå‡ ä½ï¼Ÿ
      - ä¸€æ¥å› ä¸ºfloat32è®¡ç®—èµ·æ¥æ¯”float64å¿«å¾—å¤šï¼Œä¹Ÿçœå†…å­˜ã€‚
      - äºŒæ¥å‘é‡æœç´¢ç®€ç§°ANNSï¼Œæœ¬èº«å°±æ˜¯è¿‘ä¼¼æœç´¢ï¼Œå°æ•°ç‚¹ååå‡ ä½çš„å€¼æ²¡æœ‰æ„ä¹‰ï¼Œå°±å¥½æ¯”æˆ‘ä»¬æ¯”è¾ƒä¸¤ä¸ªäººæ˜¯å¦é•¿å¾—ç›¸ä¼¼ä¸ä¼šå»ä¸€æ ¹æ ¹è®¡ç®—ä»–ä»¬çš„å¤´å‘æ•°é‡æ˜¯å¦ç›¸ç­‰ã€‚
      - milvuså¤„ç†å‘é‡æ˜¯ä»¥float32ä½æ¥ä¼ è¾“ã€å­˜å‚¨ä»¥åŠè®¡ç®—ï¼Œä½ å°±ç®—è¾“å…¥çš„æ˜¯float64çš„å€¼ï¼Œä¼ è¾“åˆ°serveré‚£è¾¹å°±å·²ç»å˜æˆfloat32
    - å¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ
      -  https://github.com/milvus-io/milvus/tree/master/deployments/export-log è¿™é‡Œæœ‰è„šæœ¬å¯ä»¥çœ‹æ—¥å¿— 
    - æ—¥å¿—é‡Œé¢å¾…æ„å»ºç´¢å¼•è¡Œæ•°å’Œå·²æ„å»ºç´¢å¼•è¡Œæ•°ä¹‹å’Œå¤§äºæ•°æ®æ€»è¡Œæ•°æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿè€Œä¸”è¿™ä¸ªpendingIndexRowsçš„æ•°é‡è¿˜ä¼šå¢åŠ æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ ç´¢å¼•çš„å·²æ„å»ºè¡Œæ•°æœ€å¤§æ˜¯ç­‰äºè¡¨çš„æ€»è¡Œæ•°
      - pendingrowå¢åŠ æ˜¯å› ä¸ºé‡Œé¢æœ‰compactionï¼Œæœ‰äº›segmentå·²ç»å»ºå¥½äº†ç´¢å¼•ï¼Œä½†å®ƒè¦å’Œå…¶ä»–segmentåˆå¹¶æˆæ›´å¤§çš„segmentï¼Œåˆå¹¶å®Œä¹‹ååˆä¼šå†æ¬¡å»ºç´¢å¼•
    -  milvus å¦‚ä½•åšåˆ°ä¸åœæ­¢æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œå…¨é‡é‡å»ºç´¢å¼•
      - milvusé‡Œæœ‰ä¸€ä¸ªaliasçš„åŠŸèƒ½ï¼Œæ¯”è¾ƒé€‚åˆè¿™ç§å…¨é‡æ›´æ–°çš„åœºæ™¯
    - æŒ‰ç…§æ ‡é‡æŸ¥è¯¢æ•°æ®ï¼ŒåŒæ ·çš„è¡¨è¾¾å¼ï¼Œä¸ºä»€ä¹ˆä¸€ä¸ªæœ‰ç»“æœä¸€ä¸ªæ²¡ç»“æœï¼Ÿ
      - è¡¨è¾¾å¼è¿‡æ»¤æœç´¢æ—¶ï¼Œå¦‚æœå¸¦æœ‰ç´¢å¼•æ¯”å¦‚ivf_flatç´¢å¼•ï¼ŒæŸ¥å‡ºçš„ç»“æœå¯èƒ½æœ‰æ—¶æœ‰æœ‰æ—¶æ²¡æœ‰ï¼Œå› ä¸ºå†…éƒ¨æ˜¯å…ˆè¿‡æ»¤å†åšann searchã€‚ä½ æ¢æˆFLATå°±æœ‰ç¨³å®šç»“æœã€‚
    - milvuså¦‚æœåšæˆä¸€é¡¹å…¬å…±å‘é‡æœåŠ¡ï¼Œæ¯ä¸ªç³»ç»Ÿéƒ½æ˜¯æŒ‰éœ€load/releaseç´¢å¼•çš„è¯ï¼Œåœ¨æ•°æ®é‡å‡ ç™¾ä¸‡/å‡ åƒä¸‡è¿™ä¸ªçº§åˆ«çš„æ—¶å€™ï¼Œæ¬è¿ä¸€æ¬¡å…¶å®æŒºæ…¢çš„ï¼Œè¦å¥½å‡ ç§’çš„æ—¶é—´ï¼Œé‚£milvusçš„æŸ¥è¯¢ä¸å°±å˜å¾—å¾ˆæ…¢äº†ä¹ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„å»ºè®®?
      - åŠ è½½èµ·æ¥ æ¯æ¬¡load releaseæœ¬èº«å°±æ¯”è¾ƒæ…¢ã€‚å¦‚æœæˆæœ¬è€ƒè™‘ ä¸åœ¨ä¹æŸ¥è¯¢æ€§èƒ½ è¯•è¯•mmap
      - è¯·é—®å¼€äº†mmapåŠŸèƒ½ï¼Œcollectionçš„loadæ–¹æ³•å°±ä¸ç”¨è°ƒç”¨äº†ï¼Œè¿˜æ˜¯è°ƒç”¨äº†loadå’Œreleaseä¹Ÿæ²¡æ•ˆæœï¼Ÿ
        - mmap å’Œ load/release é€»è¾‘æ— å…³ï¼Œç›®å‰ milvus é‡Œçš„ collection è¿˜æ˜¯éœ€è¦ load æ‰èƒ½è¿›è¡Œæ“ä½œ
      - è¯·é—®è¿™ä¸ªload collectionï¼Œæ˜¯å¼‚æ­¥çš„æŠŠç´¢å¼•ä¹Ÿä¸€å¹¶è½½å…¥åˆ°å†…å­˜ä¹ˆï¼Ÿ
        - ä¸€ä¸ªè¡¨é‡Œçš„æ•°æ®åˆ’åˆ†ä¸ºå¤šä¸ªsegmentï¼Œæ¯ä¸ªsegmentéƒ½æœ‰å•ç‹¬çš„ç´¢å¼•ã€‚å¯¹äºæœ‰ç´¢å¼•çš„segmentï¼ŒåŠ è½½å®ƒçš„ç´¢å¼•åˆ°å†…å­˜é‡Œã€‚å¯¹äºæ²¡æœ‰ç´¢å¼•çš„segmentï¼ŒåŠ è½½åŸå§‹çš„å‘é‡æ•°æ®è¿›å†…å­˜
        - load()è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœç›®å‰æœ‰æ•°æ®ä¸åœ¨å†…å­˜é‡Œï¼Œå®ƒä¼šé˜»å¡æ¨¡å¼ç­‰å¾…è¿™äº›æ•°æ®è¿›å…¥å†…å­˜ã€‚ä¸€æ—¦load()æ‰§è¡Œå®Œæˆè¿”å›ï¼Œåç»­å¦‚æœæœ‰æ–°çš„æ•°æ®æˆ–è€…æ–°çš„ç´¢å¼•ï¼Œæ–°çš„ä¸œè¥¿å°†ä¼šè¢«å¼‚æ­¥åœ°åŠ è½½è¿›å†…å­˜ã€‚
        - å¯¹äºä¹‹å‰ä»¥åŸå§‹æ•°æ®åŠ è½½è¿›å†…å­˜çš„segmentï¼Œä¸€æ—¦å®ƒçš„ç´¢å¼•æ„å»ºå®Œæˆï¼Œè¿™ä¸ªç´¢å¼•å°†ä¼šè¢«åŠ è½½è¿›å†…å­˜ï¼Œç„¶åä¹‹å‰åœ¨å†…å­˜é‡Œçš„åŸå§‹æ•°æ®ä¼šè¢«freeï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„æ›¿æ¢ã€‚
      - å¼€äº† mmap å³ä¾¿è¶…å‡ºå†…å­˜ä¸€èˆ¬ä¹Ÿä¸ä¼š oomï¼Œä½†æ˜¯ä¼šå½±å“ latencyï¼Œæˆ‘ä»¬æµ‹ä¸‹æ¥ hnsw å¯ä»¥æ”¾ 4 å€å·¦å³æ€§èƒ½è¿˜èƒ½ä¿æŒä¸é”™çš„æ°´ä½ï¼Œè¿™ä¸ªå’Œä½ çš„ workload æœ‰å…³ã€‚
        - diskannå’Œmmapå…¶å®éƒ½æŒºä¾èµ–ç£ç›˜æ€§èƒ½ã€‚mmapå¦‚æœå†…å­˜å¤ªå°‘çš„è¯æ€§èƒ½ä¹Ÿä¼šå¾ˆå·®
        - mmapå¼€å¯ä»¥åï¼Œå†…å­˜èµ„æºå¯ä»¥é™ä½åˆ°ä¹‹å‰çš„1/4å·¦å³
        - mmapå¼€äº†ç¡®å®ä¼šå‡å°‘å†…å­˜ä½¿ç”¨ã€‚ä¸å¼€çš„è¯ç†è®ºå€¼æ˜¯25â€”30gbï¼Œsizing toolä¼šä¹˜ä»¥ä¸€ä¸ªå®‰å…¨ç³»æ•°ï¼ˆä¸€èˆ¬æ˜¯2ï¼Œæœ‰çš„ç´¢å¼•å¯èƒ½ç³»æ•°å¤§ä¸€ç‚¹ï¼‰
      - å¦ä¸€ç§èŠ‚çœå†…å­˜çš„æ–¹å¼æ˜¯ä½¿ç”¨ivf_sq8æˆ–è€…ivf_pqï¼Œä½†æ˜¯å¬å›ç‡å¯èƒ½ä¸å¤ªå¥½
    - æµ‹è¯•äº†ä¸€ä¸‹milvusçš„100W hnswæŸ¥è¯¢å’Œ1000W hnswæŸ¥è¯¢  å•æ¬¡æ—¶å»¶å‡ ä¹æ— åŒºåˆ« milvusçš„1000W qpsæ€¥å‰§ä¸‹é™ï¼Œ å¹¶å‘ä¸é«˜ å°±30-60ä¸ªå¹¶å‘ æ¯ä¸ªnq=1ï¼Ÿ
      - milvusæœ‰ä¸€ä¸ªåˆå¹¶æŸ¥è¯¢çš„æœºåˆ¶ï¼Œå½“ä½ æœ‰å¤§é‡å¹¶å‘æŸ¥è¯¢ï¼Œå¹¶ä¸”æ¯ä¸ªæŸ¥è¯¢è¯·æ±‚çš„nqéƒ½ä¸å¤§ï¼Œå¹¶ä¸”æŸ¥è¯¢å‚æ•°ç›¸ä¼¼æ—¶ï¼Œåå°ä¼šæŠŠå¤šä¸ªè¯·æ±‚åˆå¹¶æˆä¸€ä¸ªå¤§çš„æŸ¥è¯¢æ¥æ‰§è¡Œã€‚è¿™æ ·åšæ˜¯ä¸ºäº†æé«˜QPSï¼Œä½†å¯¹äºæ¯ä¸ªè¯·æ±‚æ¥è¯´å°±æ‹‰é•¿äº†å»¶æ—¶ã€‚
      - åœ¨milvus.yamlçš„queryNode.grouping.enabledå¯ä»¥è®¾ä¸ºfalseå…³é—­ã€‚é»˜è®¤æ˜¯true
      - å¦‚æœè·‘åˆ† segmentè°ƒå¤§åº”è¯¥æ€§èƒ½å°±ä¼šå˜å¥½
    - Error: incomplete query result - topkå°äºä¸€å®šå€¼æ˜¯æ­£å¸¸çš„ï¼Œå¤§äºä¸€å®šå€¼ä¸æ­£å¸¸
      - è¿™é‡Œé¢ç¡®å®æ˜¯æœ‰bugï¼Œä¸è¿‡ä¸å¥½å¤ç°ã€‚ä¸Šæ¬¡å¦ä¸€ä¸ªç”¨æˆ·è¯´è®¾ç½®topkå¤§äºæŸä¸€ä¸ªå€¼æ—¶å°±ä¸æŠ¥é”™äº†ï¼Œä»–è®¾ç½®çš„topkæ˜¯äº”ç™¾å¤š
    - milvuså•æœºç‰ˆè¿ç§»åˆ°é›†ç¾¤çš„æ–¹æ¡ˆï¼ˆå«æ•°æ®è¿ç§»ï¼‰
      - milvus-backupé¡¹ç›®æ˜¯åšmilvusæ•°æ®çš„å¤‡ä»½æ¢å¤çš„ï¼Œç”¨è¿™ä¸ªå·¥å…·æŠŠå•æœºçš„æ•°æ®å¤‡ä»½å‡ºæ¥ï¼Œç„¶åæŠŠå¤‡ä»½ç›®å½•ä¸Šä¼ åˆ°é›†ç¾¤æ‰€ä½¿ç”¨çš„s3 bucketé‡Œï¼Œæœ€åå†ç”¨milvus-backupå·¥å…·æ¢å¤æ•°æ®åˆ°è¯¥é›†ç¾¤ã€‚
      - milvus-backup checkå‘½ä»¤æ£€æŸ¥ä¸‹é…ç½®
    - [milvus-backup å·¥å…·](https://mp.weixin.qq.com/s/BWbwgBlhNajFOi2df0UaKg)
      - åœ¨åŒä¸€ä¸ª Milvus å®ä¾‹å†…è¿›è¡Œå¤‡ä»½å’Œæ¢å¤ï¼šåœ¨åŒä¸€ Milvus å®ä¾‹å†…å°† Collection å¤åˆ¶ä¸ºä¸€ä¸ªæ–°çš„ Collectionã€‚
      - åœ¨å…±ç”¨åŒä¸€ä¸ª S3 Bucket çš„ä¸¤ä¸ª Milvus å®ä¾‹ä¹‹é—´è¿›è¡Œå¤‡ä»½å’Œæ¢å¤ï¼šåœ¨ä½¿ç”¨ä¸åŒæ ¹è·¯å¾„ä½†ä½¿ç”¨ç›¸åŒ S3 Bucket çš„ Milvus å®ä¾‹ä¹‹é—´è¿ç§» Collectionã€‚
      - åœ¨åŒä¸€ä¸ª S3 æœåŠ¡ä¸åŒ Bucket çš„ä¸¤ä¸ª Milvus å®ä¾‹ä¹‹é—´è¿›è¡Œå¤‡ä»½å’Œæ¢å¤ï¼šåœ¨åŒä¸€ S3 æœåŠ¡å†…çš„ä¸åŒ S3 Bucket ä¹‹é—´è¿ç§» Collectionã€‚
      - åœ¨ä¸åŒ S3 æœåŠ¡çš„ä¸¤ä¸ª Milvus å®ä¾‹ä¹‹é—´è¿›è¡Œå¤‡ä»½å’Œæ¢å¤ï¼šåœ¨ä½¿ç”¨ä¸åŒ S3 æœåŠ¡çš„ Milvus å®ä¾‹ä¹‹é—´å¤åˆ¶ Collectionã€‚
    - datanodeå†™minioçš„é€Ÿåº¦è·Ÿä¸ä¸Šä»pulsarè¯»å–æ•°æ®çš„é€Ÿåº¦ï¼Œå¯¼è‡´datanodeçš„å†…å­˜ä¸æ–­å‡é«˜ç›´åˆ°oomï¼Œæ€ä¹ˆèƒ½æ§åˆ¶datanodeè¯»å–pulsarçš„é€Ÿåº¦å‘¢
      - ä¸€èˆ¬å¯ä»¥é€šè¿‡quotaåå‹ æˆ–è€…datanodeåŠ èµ„æºè§£å†³
    - éœ€è¦ä¸€ä¸ªclipæ¨¡å‹å¸®ä½ åšembeddingï¼Œmilvusåªæ˜¯åšå‘é‡æœç´¢ã€‚milvusæ˜¯å¦æ”¯æŒé€šè¿‡å¤§æ¨¡å‹è¾“æ–‡å­—åˆ°milvusé‡Œé¢æœç´¢å¯¹åº”çš„å›¾ç‰‡çš„åŠŸèƒ½ï¼Ÿ
    - milvusæœ‰æ²¡æœ‰å…³äºå‘é‡æ•°æ®çš„æ’å…¥æ€§èƒ½æµ‹è¯•ï¼Œå…ˆåˆ›å»ºç´¢å¼•åœ¨æ’å…¥ï¼Ÿ
      - æ’å…¥çš„è´Ÿè½½ä¸»è¦ä¼šåœ¨proxyï¼Œdatanodeå’ŒMQï¼Œå¦‚æœæ˜¯å…ˆå»ºç´¢å¼•å’Œloadå†åšæ’å…¥çš„è¯ï¼Œindexnodeå»ºç´¢å¼•çš„å¿«æ…¢ä¹Ÿä¼šå½±å“growing segmentçš„æ•°é‡ï¼Œè¿›è€Œå½±å“datanodeçš„è´Ÿè½½ç„¶åå½±å“æ’å…¥çš„æ€§èƒ½ï¼›æˆ‘ä»¬æµ‹è¯•è¿‡æ’å…¥åå200+MB/sçš„åœºæ™¯ï¼Œç†è®ºä¸Šè¿˜å¯ä»¥æ›´é«˜
    - æœç´¢ç»“æœä¸å…¨ï¼Œæœ‰å¯èƒ½æ˜¯ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š
      - ä¸€ç§æ˜¯åˆšinsertçš„æ•°æ®ä¸ä¸€å®šèƒ½æœå‡ºæ¥ï¼ŒæŠŠsearchçš„consistency_levelå‚æ•°è®¾ä¸ºStrongï¼Œèƒ½ä¿è¯è¯¥æ—¶é—´ç‚¹ä¹‹å‰çš„æ•°æ®éƒ½èƒ½æœå‡ºæ¥ï¼Œä½†latencyä¼šå¢åŠ å‡ ç™¾æ¯«ç§’ã€‚
      - å¦ä¸€ç§æ˜¯å¸¦ç´¢å¼•åŠ è¿‡æ»¤æ¡ä»¶ï¼Œå› ä¸ºç´¢å¼•åªæœä¸€å°å—æ•°æ®ï¼ŒåŠ äº†è¿‡æ»¤ä¹‹åï¼Œé‚£ä¸€å°å—é‡Œé¢æœ‰å¯èƒ½è¢«è¿‡æ»¤æ‰å¾ˆå¤šï¼Œå¯¼è‡´ç»“æœä¸è¶³ã€‚ä½ æŠŠç´¢å¼•æ¢æˆFLATï¼Œä¹Ÿå°±æ˜¯æš´æœï¼Œå°±å¯ä»¥æœåˆ°ã€‚
    - [Milvusæºç å¼€å‘](https://mp.weixin.qq.com/s/kKmcVciEf_WcuiGwYzYMxg)
    - [How does Milvus GPU work](https://github.com/milvus-io/milvus/discussions/36328)
      - milvus loads GPU index into GPU RAM. If the GPU RAM is insufficient, you will get an error about load failure.
      - When you call search(), the request's vector is copied into GPU RAM to compute, then result is copied from GPU RAM to CPU RAM, and returned to the client. So, there is an extra cost for copying data between GPU RAM and CPU RAM.
      - GPU is faster than CPU for large number of parallel tasks. So, GPU index is suitable for large NQ search, NQ is the number of vectors you input to search().
    - [the difference between SPARSE_INVERTED_INDEX and SPARSE_WAND](https://github.com/milvus-io/milvus/discussions/34806)
      - SPARSE_INVERTED_INDEX is the plain old inverted index: for each dimension, maintain a list of doc ids that is not zero in this dimension; at search time, only compute scores of docs in merged lists of the query's non zero dimensions.
      - SPARSE_WAND is similar to SPARSE_INVERTED_INDEX in that they both have the same inverted index, but SPARSE_WAND maintains more metadata in the index to allow the utilization of the WAND algorithm to greatly reduce the number of docs that needs to be evaluated. 
      - The choice between SPARSE_WAND and SPARSE_INVERTED_INDEX mostly depends on the density(average number of non zeros / total number of possible dimensions) of the dataset and the queries. 
        - In most cases SPARSE_WAND should be much faster than SPARSE_INVERTED_INDEX, especially for doc embeddings with higher density and datasets with tons of docs. 
        - But SPARSE_WAND's performance downgrades fast as the dimensions of the query increases: every time when we see slower WAND, we see long queries with small drop_ratio_search.
      - The default value for drop_ratio_build/search is 0. With this setting both indexes yield 100% recall rate. And the same drop_ratio_build/search yields the same recall rate on SPARSE_WAND/SPARSE_INVERTED_INDEX.
      - suggest to start from drop_ratio_build=0.3 and drop_ratio_search=0.6 and see if that meets your recall requirement, and adjust as needed. 
      - Also I suggest to adjust drop_ratio_search more aggressively if it's ok to sacrifice recall a little for a huge performance improvement
      - https://weaviate.io/blog/blockmax-wand
    - åœ¨milvusä¸­ä¸€ä¸ªcollection åˆšæ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥æ£€ç´¢åˆ°ï¼Œä½†æ˜¯è¿‡å‡ åˆ†é’Ÿå°±æŸ¥ä¸å‡ºæ¥äº†ï¼Œæˆ‘æŸ¥è¯¢æ¡ä»¶æ˜¯ä»1000ä¸‡æ•°æ®é‡Œé¢å–top200
      - åœ¨ Milvus ä¸­æ’å…¥æ–°æ•°æ®åï¼Œç«‹å³è¿›è¡Œæœç´¢ï¼Œå¯ä»¥æ£€ç´¢åˆ°æ–°æ’å…¥çš„æ•°æ®ã€‚è¿™æ˜¯å› ä¸ºæ–°æ•°æ®å°šæœªè¢«çº³å…¥ç´¢å¼•ï¼Œæœç´¢è¿‡ç¨‹å¯¹æ–°æ•°æ®é‡‡ç”¨çš„æ˜¯ç²¾ç¡®çš„æš´åŠ›æœç´¢ï¼ˆBrute-Force Searchï¼‰
      - ç»è¿‡ä¸€æ®µæ—¶é—´ï¼ŒMilvus åå°ä¼šè‡ªåŠ¨è§¦å‘ç´¢å¼•æ„å»ºæˆ–åˆå¹¶è¿‡ç¨‹ï¼Œæ–°æ•°æ®è¢«çº³å…¥å‘é‡ç´¢å¼•ä¸­ã€‚æ­¤æ—¶ï¼Œæœç´¢è¿‡ç¨‹ä¸»è¦ä¾èµ–äºç´¢å¼•ç»“æ„è¿›è¡Œè¿‘ä¼¼æœç´¢ï¼Œå¯èƒ½å¯¼è‡´æ— æ³•æ£€ç´¢åˆ°å…ˆå‰æ’å…¥çš„æ•°æ®ã€‚
    - æ•°æ®åˆ†å¸ƒä¸å‡åŒ€
      - å…ˆéƒ¨ç½²ä¸ªç›‘æ§å’Œwebui çœ‹çœ‹æœ‰å‡ ä¸ªsegment æ˜¯ä¸æ˜¯åœ¨ä¸‰å°æœºå™¨ä¸Šå‡åŒ€ æ•°æ®å¤ªå°äº†ä¸‰å°ç”¨ä¸èµ·æ¥ éœ€è¦å¼€ä¸‰replica.Milvusæ˜¯åˆ†segmentçš„ 
      - ä¸€ç™¾ä¸‡æ•°æ®å¯èƒ½å°±ä¸€ä¸¤ä¸ªsegment åŠ å†å¤šæœºå™¨ä¹Ÿåªæœ‰ä¸€ä¸¤ä¸ªæœ‰æ•°æ® replicaå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜
      - 1024ç»´ï¼Œ150ä¸‡æ•°æ®æ˜¯6GBï¼Œå¤§çº¦ä¼šæœ‰ä¸ƒå…«ä¸ªsegmentã€‚å¦‚æœæœ‰é›†ç¾¤é‡Œæœ‰3ä¸ªquerynodeï¼Œå¹¶ä¸”æ¯ä¸ªquerynodeçš„cpuèµ„æºè·Ÿä½ çš„standaloneçš„cpuèµ„æºç›¸ç­‰ï¼Œé‚£ä¹ˆ150ä¸‡æ•°æ®çš„è¿™ä¸ªé›†ç¾¤æŸ¥è¯¢æ€§èƒ½ä¼šæ¯”50ä¸‡æ•°æ®çš„è¿™ä¸ªå•æœºç¨æ…¢ä¸€äº›ï¼Œ
        - å› ä¸ºé›†ç¾¤å†…éƒ¨å‡ ä¸ªèŠ‚ç‚¹é—´æœ‰é€šä¿¡ï¼Œ3ä¸ªquerynodeçš„ç»“æœé›†è¿˜è¦åšåˆå¹¶ã€‚
    - [ä½¿ç”¨å¤–éƒ¨pulsar](https://github.com/milvus-io/milvus/discussions/40914)
      - é™¤äº†milvus.yamlä¸­çš„mq.typeè®¾ç½®æˆpulsarä¹‹å¤–ï¼Œè¿˜è¦milvus.yamlä¸­çš„pulsar.address/portè¿™äº›è®¾ç½®æ­£ç¡®
      - è¿™ä¸ªpulsaræœ€å¥½èƒ½å…è®¸milvusåˆ›å»ºtopicï¼Œå¦‚æœä¸èƒ½åˆ›å»ºï¼Œé‚£å°±å¾—è®¾ç½®milvus.yamlä¸­çš„common.preCreatedTopicæŒ‡å®šä½ é¢„å…ˆè®¾ç½®çš„topic
- [BigANN 2023](https://mp.weixin.qq.com/s/7H7xtGzEfAdu-zQv0NHYzg)
  - Filters èµ›é“: æœ¬èµ›é“ä½¿ç”¨äº† YFCC 100M æ•°æ®é›†ï¼Œè¦æ±‚å‚èµ›è€…å¤„ç†ä»è¯¥æ•°æ®é›†ä¸­é€‰å–çš„ 1000 ä¸‡å¼ å›¾ç‰‡
    - å…·ä½“ä»»åŠ¡è¦æ±‚ä¸ºæå–æ¯å¼ å›¾ç‰‡çš„ç‰¹å¾å¹¶ä½¿ç”¨ CLIP ç”Ÿæˆ Embedding å‘é‡ï¼Œä¸”éœ€åŒ…å«å›¾åƒæè¿°ã€ç›¸æœºå‹å·ã€æ‹æ‘„å¹´ä»½å’Œå›½å®¶ç­‰å…ƒç´ çš„æ ‡ç­¾ï¼ˆå…ƒç´ å‡æ¥è‡ªäºè¯æ±‡è¡¨ï¼‰ã€‚
    - ä¸»è¦æŒ‘æˆ˜æ˜¯å‚èµ›è€…éœ€è¦æˆåŠŸåœ°å°† 10 ä¸‡ä¸ªæŸ¥è¯¢ä¸æ•°æ®é›†ä¸­çš„ç›¸åº”å›¾åƒå’Œæ ‡ç­¾åŒ¹é…ï¼Œæ¯ä¸ªæŸ¥è¯¢éƒ½åŒ…å«ä¸€ä¸ªå›¾åƒå‘é‡å’Œç‰¹å®šçš„æ ‡ç­¾ã€‚
    - è§£å†³æ–¹æ¡ˆæ˜¯åŸºäºå›¾ç®—æ³•å’Œ tag åˆ†ç±»
      - Build æ—¶ï¼Œä¼šå¯¹æ¯ç§å¯èƒ½å‡ºç°çš„ tag ç»„åˆè¿›è¡Œ cardinality åˆ†æï¼›å¯¹äºè¾ƒåŒ…å«å‘é‡è¾ƒå¤šçš„ç»„åˆå»ºå›¾ï¼Œå…¶ä»–çš„ç»„åˆå»ºç«‹å€’æ’ç´¢å¼•ï¼›æœç´¢æ—¶åˆ™æ ¹æ®ä¸åŒçš„ç»„åˆé€‰å–å¯¹åº”çš„æœç´¢æ–¹å¼
      - å¯¹ query æŒ‰æ‰€å±çš„ tag è¿›è¡Œåˆ†ç±»ï¼Œæœç´¢æ—¶åˆ†åˆ«å¯¹æ¯ä¸ª tag æ‰€å¯¹åº”çš„ query ä¾æ¬¡è¿›è¡Œæœç´¢
        - ä¸€æ˜¯å¯ä»¥æœ€å¤§åŒ– cache åˆ©ç”¨ç‡ï¼ŒäºŒæ˜¯åœ¨çˆ†æœæ—¶å¯ä»¥ä½¿ç”¨çŸ©é˜µä¹˜æ³•è®¡ç®—è¿›è¡ŒåŠ é€Ÿã€‚å½“ç„¶ï¼Œä¸ºäº†åŠ é€Ÿè®¡ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¯¹æ•°æ®è¿›è¡Œé‡åŒ–ï¼Œå¹¶åˆ©ç”¨ SIMD ä¼˜åŒ–ç›¸å…³çš„è·ç¦»è®¡ç®—
  - Out-Of-Distribution(OOD) èµ›é“: æœ¬èµ›é“ä½¿ç”¨äº† Yandex Text-to-Image 10M æ•°æ®é›†ï¼Œå¼ºè°ƒè·¨æ¨¡æ€æ•°æ®çš„æ•´åˆã€‚
    - åŸºç¡€æ•°æ®é›†åŒ…æ‹¬æ¥è‡ª Yandex è§†è§‰æœç´¢æ•°æ®åº“çš„ 1000 ä¸‡å¼ å›¾åƒ Embedding å‘é‡ï¼Œè¿™äº›å‘é‡ç”± Se-ResNext-101 æ¨¡å‹ç”Ÿæˆçš„ï¼Œä½†æŸ¥è¯¢å‘é‡æ˜¯åŸºäºæ–‡æœ¬æœç´¢å’Œä¸åŒçš„æ¨¡å‹ç”Ÿæˆçš„
    - å‚èµ›è€…éœ€è¦æœ‰æ•ˆåœ°å¼¥åˆè¿™äº›ä¸åŒæ¨¡æ€æ•°æ®ä¹‹é—´çš„å·®å¼‚
    - è§£å†³æ–¹æ¡ˆåŸºäºå›¾ç®—æ³•ä»¥åŠé«˜åº¦ä¼˜åŒ–çš„æœç´¢è¿‡ç¨‹
      - è®¡ç®—æ–¹é¢ï¼Œç”¨ä¸åŒç²¾åº¦çš„é‡åŒ–è¿›è¡Œæœç´¢å’Œ refineï¼Œå¹¶ä½¿ç”¨ SIMD è¿›è¡Œè®¡ç®—åŠ é€Ÿ
      - æœç´¢å¼€å§‹å‰ï¼Œå…ˆå¯¹ query å‘é‡è¿›è¡Œèšç±»ã€‚åœ¨å›¾æœæ—¶ï¼Œå¯¹åˆ†å±ä¸åŒçš„èšç±»çš„ query åˆ†é…ä¸åŒçš„åˆå§‹ç‚¹ï¼Œå¹¶ä¸”å¯¹æ¯ä¸ªèšç±»è¿›è¡Œä¾æ¬¡æœç´¢ã€‚
        - èšç±»å¯ä»¥ä½“ç°ä¸¤å¤§ä¼˜åŠ¿ï¼Œä¸€æ˜¯å¯¹ä¸åŒèšç±»ä¾æ¬¡æœç´¢ä¼˜åŒ–äº† cache åˆ©ç”¨ç‡ï¼ŒäºŒæ˜¯ç”±äºå¯¹ä¸åŒèšç±»åˆ†é…è‡ªé€‚åº”çš„åˆå§‹ç‚¹ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†å‘é‡ä¸åŒåˆ†å¸ƒçš„é—®é¢˜
        - ä½¿ç”¨äº†å¤šçº§çš„ bitset æ•°æ®ç»“æ„
          - åœ¨å›¾æœçš„è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„æ¥æ ‡è®°å“ªäº›ç‚¹è¢«è®¿é—®è¿‡ï¼Œä¼ ç»Ÿçš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ª bitset æˆ–è€…å“ˆå¸Œè¡¨ï¼Œbitset çš„ç¼ºç‚¹æ˜¯å…¶ä¸­å¤§éƒ¨åˆ†çš„å†…å­˜å¹¶ä¸ä¼šè¢«ä½¿ç”¨åˆ°ï¼Œä½¿å¾—æ¯æ¬¡è¯»å–æ—¶ä¼šæœ‰å¤§æ¦‚ç‡çš„ cache miss
          - å“ˆå¸Œè¡¨çš„ç¼ºç‚¹æ˜¯ç³Ÿç³•çš„å¸¸æ•°å¯¼è‡´æ€§èƒ½ä½ä¸‹
          - å—å†…å­˜ä¸­å¤šçº§é¡µè¡¨çš„å¯å‘ï¼Œè®¾è®¡å‡ºäº†å¤šçº§ bitset çš„æ•°æ®ç»“æ„ï¼Œå°†ä¸Šå±‚ bitset ç¼“å­˜åœ¨ cpu cache ä¸­ï¼Œä½¿å¾—è¯»å†™æ€§èƒ½å¾—åˆ°å¤§å¹…æå‡ã€‚
  - Sparse èµ›é“: æœ¬èµ›é“ä»¥ MSMARCO passage retrieval æ•°æ®é›†ä¸ºæ ¸å¿ƒï¼Œå¤„ç†å¤§é‡çš„æ–‡ç« ï¼ˆè¶…è¿‡ 880 ä¸‡ä¸ªï¼‰ï¼Œæ‰€æœ‰æ–‡ç« éƒ½é€šè¿‡ SPLADE æ¨¡å‹ç¼–ç æˆç¨€ç–å‘é‡ã€‚
    - æŸ¥è¯¢æ•°é‡è¿‘ 7000ä¸ªï¼Œä¸”æŸ¥è¯¢ä¹Ÿé€šè¿‡ç›¸åŒçš„æ¨¡å‹å¤„ç†ï¼Œä½†é•¿åº¦è¾ƒçŸ­ã€éé›¶å…ƒç´ è¾ƒå°‘ã€‚
    - æœ¬èµ›é“çš„ä¸»è¦æŒ‘æˆ˜æ˜¯é€‰æ‰‹éœ€å‡†ç¡®æ£€ç´¢ç»™å®šæŸ¥è¯¢çš„ Top ç»“æœï¼Œé‡ç‚¹æ˜¯æŸ¥è¯¢å‘é‡å’Œæ•°æ®åº“å‘é‡ä¹‹é—´çš„æœ€å¤§å†…ç§¯ã€‚
    - è§£å†³æ–¹æ¡ˆæ˜¯åŸºäºå›¾ç®—æ³•å’Œä¸€äº›åŸºäºç¨€ç–å‘é‡çš„ä¼˜åŒ–
      - æ¯ä¸ªç¨€ç–å‘é‡é€šè¿‡ (data[float32], index[int32]) å…ƒç»„çš„åˆ—è¡¨è¿›è¡Œè¡¨ç¤ºï¼Œå¯¹ data è¿›è¡Œå¤šç²¾åº¦é‡åŒ–ï¼Œåˆ†åˆ«ç”¨æˆ·å›¾æœæ—¶çš„è®¡ç®—å’Œæœ€åçš„ refineã€‚åŒæ—¶ index ä¹Ÿå¯ä»¥ç”¨ int16 è¡¨ç¤ºï¼Œä»¥é™ä½å†…å­˜å¸¦å®½ä½¿ç”¨ã€‚
      - å†…ç§¯è®¡ç®—æœ‰ä¸€ä¸ªé‡è¦ç‰¹æ€§å³ç»å¯¹å€¼è¾ƒå¤§çš„å€¼æœ‰æ›´å¤§çš„é‡è¦æ€§ï¼Œè€Œç»å¯¹å€¼è¾ƒå°çš„å€¼æœ‰è¾ƒå°çš„é‡è¦æ€§ã€‚
      - å¯ä»¥æ ¹æ®è¿™ä¸€ç‰¹æ€§è®¾è®¡å‰ªæç­–ç•¥ï¼Œå³åœ¨å›¾æœè¿‡ç¨‹ä¸­å°†ç»å¯¹å€¼è¾ƒå°çš„å€¼è£å‰ªæ‰ï¼Œå¹¶åœ¨å›¾æœç»“æŸåä½¿ç”¨å®Œæ•´å‘é‡è¿›è¡Œ refineã€‚
      - è¿˜ç”¨ SIMD è¿›è¡Œå¿«é€Ÿçš„æœ‰åºåˆ—è¡¨æ±‚äº¤é›†ï¼Œè¿›è€Œå®ç°é«˜æ•ˆçš„ç¨€ç–å‘é‡å†…ç§¯è®¡ç®—
  - Streaming èµ›é“: æœ¬èµ›é“åŸºäº MS Turing æ•°æ®é›†ä¸­çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å« 1000 ä¸‡ä¸ªæ•°æ®
    - å‚ä¸è€…çš„ä»»åŠ¡æ˜¯éµå¾ªæä¾›çš„â€œæ“ä½œæ‰‹å†Œâ€ï¼ˆè¯¥æ‰‹å†Œè¯¦ç»†è¯´æ˜äº†ä¸€ç³»åˆ—æ•°æ®æ’å…¥ã€åˆ é™¤å’Œæœç´¢æ“ä½œï¼‰ï¼Œå¹¶åœ¨ 1 å°æ—¶å†…å®Œæˆæ“ä½œã€‚æ­¤å¤–ï¼Œé€‰æ‰‹ä»¬è¿˜æœ‰ 8GB DRAM çš„é™åˆ¶
    - èµ›é“çš„é‡ç‚¹æ˜¯ä¼˜åŒ–å¤„ç†è¿™äº›æ“ä½œçš„è¿‡ç¨‹ï¼Œå¹¶ä¿æŒæ•°æ®é›†çš„ç´¢å¼•æµç•…ã€‚
    - è§£å†³æ–¹æ¡ˆæ˜¯åŸºäºå›¾ç®—æ³•ä»¥åŠ SQ é‡åŒ–
      - å¯¹äºåˆ é™¤æ“ä½œï¼Œ é‡‡ç”¨äº†æƒ°æ€§åˆ é™¤ç­–ç•¥
      - æœç´¢ä¸­ï¼Œå¯¹å‘é‡è¿›è¡Œä¸åŒç²¾åº¦çš„é‡åŒ–åˆ†åˆ«ç”¨ä»¥å›¾æœå’Œ refine
        - ç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨ä½ç²¾åº¦é‡åŒ–åçš„å‘é‡è¿›è¡Œå›¾æœã€‚
        - ç”±äºä½¿ç”¨æƒ°æ€§åˆ é™¤ç­–ç•¥ï¼Œæœç´¢å¾—åˆ°çš„ä¸€äº›å‘é‡å·²ç»è¢«åˆ é™¤äº†ï¼Œå› æ­¤åœ¨ç¬¬äºŒæ­¥ä½¿ç”¨åç½®è¿‡æ»¤çš„ç­–ç•¥å°†è¢«åˆ é™¤çš„å‘é‡è¿‡æ»¤æ‰
        - ç”¨æ›´é«˜ç²¾åº¦çš„é‡åŒ–å‘é‡è¿›è¡Œ refine å¾—åˆ°æœ€ç»ˆç»“æœã€‚
  - https://github.com/harsha-simhadri/big-ann-benchmarks/pulls?q=Zilliz+Solution+author%3Ahhy3
- [å‘é‡æ£€ç´¢å¤§èµ›](https://mp.weixin.qq.com/s/pngwV1Ibe4rxmtWrcr_D2g)
- [Vector DB Comparison](https://www.superlinked.com/vector-db-comparison)
  - Pinecone vs Weaviate
    - Pinecone Key Features
      - Compute and Storage Separation:
      - Static Sharding: By employing static sharding within its POD-based clusters, Pinecone ensures seamless distribution of data for enhanced query processing
    - Weaviate
      - Contextualized Embeddings: Weaviate's unique ability to generate contextualized embeddings enhances the understanding of data relationships
      - hybrid search strategy combines dense vectors for contextual understanding with sparse vectors for keyword matching
- ç¨ å¯†ã€ç¨€ç–å’ŒäºŒè¿›åˆ¶ embedding å‘é‡ï¼Œå®ƒä»¬å„è‡ªçš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿
  - Sparse vectors are very high-dimensional but contain few non-zero values, making them suitable for traditional information retrieval use cases
    - Typically (but not always), the dimensions represent different tokens in one or more languages, with values assigned to each, indicating their relative importance in that document.
    - This type of layout is beneficial for tasks that require some keyword matching.
    - BM25 is a well-known algorithm for generating sparse vectors, improving upon TF-IDF by incorporating a saturation function for term frequency and a length normalization factor.
    - ç¨€ç–å‘é‡èƒ½å¤Ÿé«˜æ•ˆè¡¨ç¤ºé«˜ç»´ä½†ç‰¹å¾æ´»è·ƒåº¦è¾ƒä½çš„æ•°æ®ã€‚è¿™ç§è¡¨ç¤ºæ–¹å¼åœ¨æ–‡æœ¬å¤„ç†ä¸­å°¤ä¸ºå¸¸è§ï¼Œå› ä¸ºä¸€ç¯‡æ–‡æ¡£é€šå¸¸åªä½¿ç”¨è¯æ±‡è¡¨ä¸­çš„ä¸€å°éƒ¨åˆ†è¯æ±‡
  - Dense vectors, on the other hand, are embeddings from neural networks that, when combined in an ordered array, capture the semantics of the input text
    - These vectors are typically generated by text embedding models and are characterized by most or all elements being non-zero
    - This makes them highly effective for semantic search, as they return the most similar results based on distance, even without exact keyword matches.
  - Summary
    - dense embeddings are better for encoding the semantics or fuzzy meaning of a piece of text
      - dense embedding -> L2 or cosine
      - Use L2 distance because it effectively captures the overall similarity in a continuous vector space, 
      - which aligns with the semantic similarity encoded in dense embeddings.
    - sparse embeddings are better for encoding exact or adjacent concepts
      - sparse embedding -> IP
      - Use Inner Product because it measures the overlap in non-zero dimensions, 
      - which is crucial for capturing exact or adjacent concepts in high-dimensional sparse vectors.
  - [ binary embeddings](https://zilliz.com/learn/what-are-binary-vector-embedding)
    - Binary embeddings are a type of vector representation in which each dimension is encoded using a single binary digit, typically represented as either 0 or 1.
    - Binary embeddings offer storage efficiency and computational speed, limited memory resources or large datasets
    - may not capture all the nuances or complexities in the original data.
    - How to Generate Binary Embeddings
      - Hashing-based methods utilize locality-sensitive hashing (LSH) or random projections to directly map high-dimensional input data to binary codes
      - Deep learning architectures, such as deep belief networks (DBNs) and restricted Boltzmann machines (RBMs), generate binary embeddings as part of their output
      - Quantization-based techniques convert continuous-valued embeddings into binary representations.
    - https://weaviate.io/blog/binary-quantization
    - é’ˆå¯¹è®¡ç®—æœºè§†è§‰ã€å›¾åƒæŒ‡çº¹ä»¥åŠæ¨èç³»ç»Ÿç­‰åœºæ™¯è®¾è®¡ï¼Œé€‚ç”¨äºæ•°æ®ä»¥äºŒè¿›åˆ¶ç‰¹å¾è¡¨ç¤ºçš„æƒ…å†µ
    - åœ¨éœ€è¦ç²¾ç¡®åŒ¹é…çš„åœºæ™¯ï¼ˆå¦‚å›¾åƒå»é‡ã€æ•°å­—æ°´å°å’Œç‰ˆæƒæ£€æµ‹ï¼‰ä¸­ï¼Œç»è¿‡ä¼˜åŒ–çš„äºŒå€¼ç´¢å¼•èƒ½æä¾›ç²¾å‡†çš„ç›¸ä¼¼æ€§æ£€æµ‹
    - è€Œåœ¨å¯¹é€Ÿåº¦è¦æ±‚é«˜äºå®Œç¾å¬å›çš„åœºæ™¯ä¸­ï¼ˆå¦‚é«˜ååé‡çš„æ¨èç³»ç»Ÿå’Œå¤§è§„æ¨¡ç‰¹å¾åŒ¹é…ï¼‰ï¼ŒäºŒå€¼ç´¢å¼•ä¹Ÿèƒ½å±•ç°å‡ºä¼˜å¼‚çš„æ€§èƒ½ã€‚
  - â€¢ ğ—¦ğ—½ğ—®ğ—¿ğ˜€ğ—² ğ—˜ğ—ºğ—¯ğ—²ğ—±ğ—±ğ—¶ğ—»ğ—´ğ˜€: https://weaviate.io/learn/knowledgecards/sparse-embeddings?utm_source=channels&utm_medium=w_social&utm_campaign=dev_education&utm_content=knowledge_cards_680689769
  - â€¢ ğ——ğ—²ğ—»ğ˜€ğ—² ğ—˜ğ—ºğ—¯ğ—²ğ—±ğ—±ğ—¶ğ—»ğ—´ğ˜€: https://weaviate.io/learn/knowledgecards/dense-embeddings?utm_source=channels&utm_medium=w_social&utm_campaign=dev_education&utm_content=knowledge_cards_680996000
  - â€¢ ğ—•ğ—¶ğ—»ğ—®ğ—¿ğ˜† ğ—˜ğ—ºğ—¯ğ—²ğ—±ğ—±ğ—¶ğ—»ğ—´ğ˜€: https://weaviate.io/learn/knowledgecards/binary-embeddings?utm_source=channels&utm_medium=w_social&utm_campaign=dev_education&utm_content=knowledge_cards_680640507
  - â€¢ ğ—¤ğ˜‚ğ—®ğ—»ğ˜ğ—¶ğ˜‡ğ—²ğ—± ğ—˜ğ—ºğ—¯ğ—²ğ—±ğ—±ğ—¶ğ—»ğ—´ğ˜€: https://weaviate.io/learn/knowledgecards/quantized-embeddings?utm_source=channels&utm_medium=w_social&utm_campaign=dev_education&utm_content=knowledge_cards_680040494
  - â€¢ ğ—©ğ—®ğ—¿ğ—¶ğ—®ğ—¯ğ—¹ğ—² ğ——ğ—¶ğ—ºğ—²ğ—»ğ˜€ğ—¶ğ—¼ğ—» ğ—˜ğ—ºğ—¯ğ—²ğ—±ğ—±ğ—¶ğ—»ğ—´ğ˜€: https://weaviate.io/learn/knowledgecards/variable-dimensions?utm_source=channels&utm_medium=w_social&utm_campaign=dev_education&utm_content=knowledge_cards_680791951
    - å¯ä»¥åªä½¿ç”¨å‰8ã€16ã€32ç­‰ç»´åº¦ï¼ŒåŒæ—¶ä¿ç•™å¤§éƒ¨åˆ†ä¿¡æ¯ã€‚è¿™ç§èƒ½åŠ›æ¥è‡ªæ¨¡å‹è®­ç»ƒï¼šå‰é¢çš„ç»´åº¦æ¯”åé¢çš„ç»´åº¦æ•è·æ›´å¤šä¿¡æ¯
  - â€¢ ğ— ğ˜‚ğ—¹ğ˜ğ—¶-ğ—©ğ—²ğ—°ğ˜ğ—¼ğ—¿ ğ—˜ğ—ºğ—¯ğ—²ğ—±ğ—±ğ—¶ğ—»ğ—´ğ˜€: https://weaviate.io/learn/knowledgecards/multivector-embeddings?utm_source=channels&utm_medium=w_social&utm_campaign=dev_education&utm_content=knowledge_cards_680980442
    - å¤šå‘é‡Embedding ä¸æ˜¯æ¯ä¸ªå¯¹è±¡ä¸€ä¸ªå‘é‡ï¼Œè€Œæ˜¯è·å¾—ä»£è¡¨å¯¹è±¡ä¸åŒéƒ¨åˆ†çš„å¤šä¸ªå‘é‡ï¼ˆå¦‚æ–‡æœ¬çš„tokenï¼Œå›¾åƒçš„patchï¼‰ã€‚è¿™å®ç°äº†"å»¶è¿Ÿäº¤äº’" - æ¯”è¾ƒæ–‡æœ¬çš„å„ä¸ªéƒ¨åˆ†è€Œä¸æ˜¯æ•´ä¸ªæ–‡æ¡£
  - ğ—ªğ—µğ—¶ğ—°ğ—µ ğ˜ğ˜†ğ—½ğ—² ğ˜€ğ—µğ—¼ğ˜‚ğ—¹ğ—± ğ˜†ğ—¼ğ˜‚ ğ˜‚ğ˜€ğ—²? It depends on your use case:
    - â€¢ Need semantic matching? â†’ Dense embeddings
    - â€¢ Storage-constrained? â†’ Binary or quantized
    - â€¢ Complex documents? â†’ Multi-vector
    - â€¢ Keyword search? â†’ Sparse vectors
  - [Vector Visualization](https://milvus.io/docs/vector_visualization.md)
  - [Embedding Models for Audio Data](https://zilliz.com/learn/top-10-most-used-embedding-models-for-audio-data)
- VectorDB challenge
  - å·¥ç¨‹
    - å‘é‡ç´¢å¼•çš„ åˆå¹¶ã€æ‹†åˆ† - small index merge into large index
    - å‘é‡ç´¢å¼•çš„ é«˜æ•ˆæ›´æ–° - mutable vs immutable index
  - é‡‡ç”¨HNSW + DiskANNçš„æ··åˆæ£€ç´¢ç­–ç•¥
    - HNSW delta + DiskANN
- ByteHouse ä¸»è¦åœ¨å‘é‡æ£€ç´¢è®¡ç®—ä¸‹æ¨ã€è¿‡æ»¤æ“ä½œä¼˜åŒ–ã€æ•°æ®å†·è¯»é—®é¢˜ä¼˜åŒ–å‡ ä¸ªæ–¹é¢é‡‡å–äº†ä¼˜åŒ–æªæ–½
  - è®¡ç®—ä¸‹æ¨
    - é¦–å…ˆï¼Œå¯¹æ¯ä¸ª Part è¿›è¡Œ Vector Searchï¼Œç›¸å½“äºå°†ä¸€ä¸ªç®—å­æ‹†åˆ†æˆä¸‰ä¸ªç®—å­ï¼Œå…ˆåšVector Searchã€‚
    - ç„¶åï¼Œå¯¹ Vector Search çš„ç»“æœè¿›è¡Œå…¨å±€æ’åºï¼Œæ­¤æ—¶ä¸è¯»å–æ ‡é‡ä¿¡æ¯åˆ—ã€‚
    - æœ€åï¼Œåœ¨å…¨å±€æ’åºçš„ç»“æœä¸Šï¼Œæ‰§è¡Œ Read Taskï¼Œå¾—åˆ°æœ€ç»ˆç»“æœ
  - è¿‡æ»¤æ“ä½œä¼˜åŒ–
    - åŸºäºæ ‡é‡ä¸»é”®èŒƒå›´æŸ¥æ‰¾
      - æ ‡é‡å…¶å®æ˜¯ä¸€ä¸ªæ’åºé”®ï¼Œç±»ä¼¼äº MySQL ä¸­çš„ä¸»é”®ã€‚é€šå¸¸ï¼Œåœ¨è¿›è¡Œæœç´¢æ—¶ï¼Œä¼šå…ˆè¿›è¡Œæ ‡é‡è¿‡æ»¤ï¼Œä»è€Œè·å–ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ•°æ®ã€‚å¦‚æœæŒ‰ä¸€èˆ¬æ–¹æ³•è®¡ç®—ï¼Œå°±ä¼šæœ‰å¾ˆå¤§çš„æ¶ˆè€—ã€‚
      - ç”±äºæ ‡é‡æœ¬èº«æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å¯ç®€å•ç†è§£ä¸ºï¼šåªéœ€è¯»å–é¦–å°¾éƒ¨åˆ†æ•°æ®ï¼Œè¿›è¡Œè¿‡æ»¤ï¼Œæ„å»ºç¬¦åˆæ¡ä»¶çš„row id bitmapã€‚æ¯”å¦‚åœ¨è®¡ç®—timestampå¤§äºæŸä¸ªå€¼çš„æƒ…å†µæ—¶ï¼Œåªéœ€è®¡ç®—å¼€å§‹å’Œç»“æŸä½ç½®æ‰€å¯¹åº”çš„è¡Œï¼Œå› ä¸ºä¸­é—´ç»“æœéƒ½æ˜¯ç¬¦åˆçš„ã€‚
    - åŠ é€Ÿæ ‡é‡åˆ—å‰ªæ
      - æ•°æ®å‰ªæï¼Œä¸»è¦æ˜¯æ ¹æ®å®é™…æƒ…å†µå¯¹ç‰©ç†ä¸Šçš„é”®æ’åˆ—åˆ†åŒºï¼ŒåŒ…æ‹¬å¯¹ä¸»é”®å’Œè¾…åŠ©ç´¢å¼•çš„åˆ†åŒºï¼Œä»¥æ­¤æ¥åŠ é€ŸæŸ¥è¯¢ã€‚
    - å­˜å‚¨å±‚è¿‡æ»¤
      - åœ¨å­˜å‚¨å±‚é¢è¿›è¡Œä¼˜åŒ–ï¼Œå°†è¿‡æ»¤æ¡ä»¶ä¸‹æ¨åˆ°å­˜å‚¨ä¸­ï¼Œå°½é‡å‡å°‘ IO æ“ä½œã€‚å¯¹ç±»ä¼¼OLAPå’ŒOLTPçš„æ•°æ®åº“è€Œè¨€ï¼ŒæŸ¥è¯¢åŠ¨ä½œçš„åº•å±‚ä¼šæœ‰å¾ˆé«˜çš„è®¡ç®—å¼€é”€
- [Vector Database vs Graph Database](https://zilliz.com/learn/vector-database-vs-graph-database)
- [Weaviate]
  - [ACORN (ANN Constraint-Optimized Retrieval Network)  filter search](https://weaviate.io/blog/speed-up-filtered-vector-search)
    - improves speed and accuracy when using rule-based filtered with vector-based search by employing predicate subgraph traversal
    - benefit those of you with very large datasets
    - improve performance challenges with negatively correlated filtered HNSW searches
    - Filtered search has two main drawbacks:
      - The filter can start at the â€œwrongâ€ end of the vector space, making it slow.
      - The filter can also filter out the most relevant items to the search query. This is called negatively correlated filtered search.
    - pre-filter or post-filter?
      - pre-filtering determine which objects match the filter, skip the HNSW graph index, and just brute force these filtered objects
      - post-filtering we first search for the closest vectors to our query using the HNSW graph index, and then we apply the filter.
      - use the flatSearchCutOff param to trigger switching between the two solutions. The post-filtering solution, however, is enhanced by filtering the result set inline while searching.
    - The Weaviate implementation of ACORN differs from that of the paper in a few ways
      - The first important change is during building the graph. While it is true that a different pruning logic helps keep the graph connected, we decided not to modify the indexing from â€œvanillaâ€ HNSW.
      - The second important difference is how we explore the graph while querying. Weaviate's ACORN implementation conditionally evaluates whether to use the two-hop expansion.
      - The third difference is how we seed additional entry points at layer zero of the graph to better deal with the problem of queries having low correlation to the filter.
- [ğ— ğ—¨ğ—©ğ—˜ğ—¥ğ—”: converting multi-vector embeddings into single fixed-size vectors](https://weaviate.io/blog/muvera)
  - ğ—¦ğ—½ğ—®ğ—°ğ—² ğ—£ğ—®ğ—¿ğ˜ğ—¶ğ˜ğ—¶ğ—¼ğ—»ğ—¶ğ—»ğ—´
    - Divides the vector space into "buckets" using techniques like SimHash or k-means clustering. Each vector gets assigned to a bucket, creating sub-vectors for each partition.
  - ğ——ğ—¶ğ—ºğ—²ğ—»ğ˜€ğ—¶ğ—¼ğ—»ğ—®ğ—¹ğ—¶ğ˜ğ˜† ğ—¥ğ—²ğ—±ğ˜‚ğ—°ğ˜ğ—¶ğ—¼ğ—»
    - Applies random linear projection to shrink those sub-vectors, which helps fill empty buckets and compress what's in them. This uses the Johnson-Lindenstrauss lemma to preserve important dot products while reducing size.
  - ğ— ğ˜‚ğ—¹ğ˜ğ—¶ğ—½ğ—¹ğ—² ğ—¥ğ—²ğ—½ğ—²ğ˜ğ—¶ğ˜ğ—¶ğ—¼ğ—»ğ˜€
    - Repeats steps 1-2 multiple times and concatenates results. This improves accuracy by capturing different aspects of the original embeddings.
  - ğ—™ğ—¶ğ—»ğ—®ğ—¹ ğ—£ğ—¿ğ—¼ğ—·ğ—²ğ—°ğ˜ğ—¶ğ—¼ğ—»
    - Creates the final single vector representation. The result? One fixed-size vector per document instead of hundreds.
- [Data Lakehouse vs. Data Lake vs. Data Warehouse](https://zilliz.com/glossary/data-lakehouse)
- [S3Vector](https://mp.weixin.qq.com/s/cB4dzM6IUZB5QW1IwrXBsA)
  - åŠ¨æ€å±€éƒ¨æ›´æ–°ç´¢å¼•ï¼ˆSPFreshï¼‰ï¼šå†™æ•°æ®ååªæ›´ä¸€éƒ¨åˆ†ç´¢å¼•ï¼Œä¸ç”¨å…¨é‡å»ºã€‚ å¥½å¤„æ˜¯å†™ä»£ä»·æ¯”è¾ƒä½ï¼Œä¸éœ€è¦é‡å»ºç´¢å¼•ï¼Œåå¤„æ˜¯æ›´æ–°årecallä¼šä¸‹é™å‡ ä¸ªç™¾åˆ†ç‚¹ï¼›
  - æ·±åº¦é‡åŒ–ï¼ˆ4-bit PQï¼‰ï¼šæŠŠé«˜ç»´å‘é‡å‹å°ï¼Œå‡å°‘ S3 è¯»å†™é‡ â€”â€” å¥½å¤„æ˜¯ä¾¿å®œã€æŸ¥å¾—å¿«ï¼Œåå¤„ä¾ç„¶æ˜¯å¬å›ç‡ä½ï¼ŒRecall ç¨³å®šåœ¨ 85% å·¦å³ï¼Œè€Œä¸”ç”¨æˆ·å‡ ä¹æ— è°ƒå‚ä½™åœ°ã€‚
  - åè¿‡æ»¤ï¼ˆPost-Filterï¼‰æœºåˆ¶ ï¼šå…ˆç²—ç•¥æŸ¥ä¸€æ‰¹ï¼Œå†æŒ‰æ¡ä»¶ç­› â€”â€” å¥½å¤„æ˜¯å¥½å®ç°ï¼Œèƒ½åˆ©ç”¨ç»Ÿä¸€çš„åº•å±‚ç´¢å¼•ç»“æ„ï¼Œç¼ºç‚¹æ˜¯åœ¨è¿‡æ»¤æ¡ä»¶è¾ƒå¤šæ—¶ï¼ŒTopK ç»“æœå¯èƒ½ä¸¥é‡ä¸è¶³ï¼ˆæˆ‘ä»¬æµ‹åˆ°åˆ é™¤ 50% æ•°æ®åï¼ŒTopK 20 åªèƒ½è¿”å› 15 ä¸ªç»“æœï¼‰ã€‚è¯´æ˜S3å›¢é˜Ÿç”¨çš„åŸºæœ¬å°±æ˜¯å¼€æºç´¢å¼•ï¼Œæ²¡æœ‰åœ¨ç´¢å¼•ä¾§åšå¤ªå¤šæ”¹é€ ã€‚
  - åˆ†å±‚ç¼“å­˜ï¼ˆMulti-tier Cacheï¼‰ï¼šå¯èƒ½ç”¨ SSD  æˆ–è€…NVMe åšç¼“å­˜ï¼Œå­˜æœ€è¿‘æŸ¥è¿‡çš„ç´¢å¼•ã€‚æ–°æŸ¥è¯¢ä¸å‘½ä¸­SSDç¼“å­˜æ—¶å»¶è¿Ÿæ˜æ˜¾è¾ƒé«˜
  - å¤§è§„æ¨¡åˆ†å¸ƒå¼è°ƒåº¦ ï¼šS3 æœ¬èº«æœ‰æµ·é‡æœºå™¨æ± ï¼ŒS3Vector å¯èƒ½åˆ©ç”¨å¾®æœåŠ¡å°†â€œè¯»å–-è§£å‹-æ£€ç´¢â€æ‹†æˆæµæ°´çº¿ï¼Œè®©æŸ¥è¯¢å»¶è¿Ÿåˆ†å¸ƒéå¸¸ç¨³ã€‚
- How to choose between Milvus, Elasticsearch and Pgvector
  - ## Milvus: **The first choice for vector databases**
    - Purpose-built for vectors
    - Superior performance at scale
    - Advanced indexing (IVF, HNSW)
    - Excellent horizontal scaling
    ### LIMITATIONS
    - Operational complexity
    - No relational data support
    ### BEST FOR
    - High-performance vector workloads at massive scale
  - ## Elasticsearch: **The preferred choice for traditional search**
    ### STRENGTHS
    - Advanced full-text search features (fuzzy matching, phrase queries)
    - Mature ecosystem & tooling
    - Rich aggregation capabilities
    ### LIMITATIONS
    - Vector performance lags
    - Resource-heavy stack
    - Complex query DSL
    ### BEST FOR
    - Applications need sophisticated search with aggregation capabilities.
  - ## Pgvector: **The PostgreSQL native**
    ### STRENGTHS
    - Familiar SQL interface
    - ACID compliance
    - Direct PostgreSQL integration
    - Unified data model
    ### LIMITATIONS
    - Performance ceiling
    - Limited indexing options
    - Traditional scaling issues
    - Not optimized for vectors
    ### BEST FOR
    - Adding vector capabilities to existing PostgreSQL applications
- [wal3: A Write-Ahead Log for Chroma, Built on Object Storage](https://trychroma.com/engineering/wal3)
  - æœ¬è´¨æ˜¯â€œæœ¬åœ°é¡ºåºå†™ + åå°å¼‚æ­¥å¤åˆ¶åˆ°å¯¹è±¡å­˜å‚¨ï¼ˆS3 åŠå…¶ä»–






















